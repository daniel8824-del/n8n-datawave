{
  "name": "Google News Scraper",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyX",
              "value": 5,
              "unit": "minutes"
            }
          ]
        },
        "databaseId": {
          "__rl": true,
          "value": "29a61622-43bc-8020-90bd-f074a40c210b",
          "mode": "list",
          "cachedResultName": "íŠ¸ë Œë“œ ë¶„ì„ í‚¤ì›Œë“œ",
          "cachedResultUrl": "https://www.notion.so/29a6162243bc802090bdf074a40c210b"
        },
        "simple": false
      },
      "type": "n8n-nodes-base.notionTrigger",
      "typeVersion": 1,
      "position": [
        -1264,
        -400
      ],
      "id": "a3f95af4-a660-4676-ac6f-2293870f2088",
      "name": "Notion Trigger",
      "credentials": {
        "notionApi": {
          "id": "1IYH8sk8KrXGZta9",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "564b5895-0e91-4cf4-b4b0-4ccfcd75da74",
              "name": "Movie",
              "value": "={{ $json.properties.Movie.title[0].plain_text }}",
              "type": "string"
            },
            {
              "id": "c17340f5-1e43-4a16-be24-512a692c07f6",
              "name": "Keywords",
              "value": "={{ $json.properties.Keywords.multi_select.map(tag => tag.name.replace(/^#/, '')) }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1088,
        -400
      ],
      "id": "c7b8093e-b081-48ab-a301-0520ebe68408",
      "name": "Keywords Field"
    },
    {
      "parameters": {
        "fieldToSplitOut": "Keywords",
        "include": "allOtherFields",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -912,
        -400
      ],
      "id": "8989f40b-64a3-4530-8fa9-a7c24d932d07",
      "name": "News Split Out"
    },
    {
      "parameters": {
        "url": "https://serpapi.com/search",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "engine",
              "value": "google_news"
            },
            {
              "name": "q",
              "value": "={{ $json.Keywords }}"
            },
            {
              "name": "gl",
              "value": "kr"
            },
            {
              "name": "hl",
              "value": "ko"
            },
            {
              "name": "num",
              "value": "200"
            },
            {
              "name": "tbs",
              "value": "qdr:w"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -704,
        -400
      ],
      "id": "a5b5f372-d95d-4770-a4f4-bcaf2a500f86",
      "name": "News Search",
      "credentials": {
        "httpQueryAuth": {
          "id": "exmpyksk5mqSMFrr",
          "name": "SerpAPI Auth account"
        }
      }
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        768,
        -16
      ],
      "id": "3d241a17-d8d7-407b-be76-6252ed49769a",
      "name": "Merge"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nfunction cleanNewsBody(rawContent) {\n  if (!rawContent) return rawContent;\n  if (typeof rawContent !== 'string') return rawContent;\n  if (rawContent.length < 50) return rawContent;\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 1: ë¸”ë¡œê·¸ í—¤ë” ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  const isBlog = /ë£¨ë¹µë£¨ë‚˜|URL ë³µì‚¬|ë³¸ë¬¸ ê¸°íƒ€ ê¸°ëŠ¥/.test(rawContent);\n  const hasSharePattern = /ê³µìœ í•˜ê¸°\\s*ì‹ ê³ í•˜ê¸°/.test(rawContent);\n  \n  if (isBlog && hasSharePattern) {\n    const shareIndex = rawContent.search(/ê³µìœ í•˜ê¸°\\s*ì‹ ê³ í•˜ê¸°/);\n    if (shareIndex > 0 && shareIndex < rawContent.length * 0.3) {\n      rawContent = rawContent.replace(/^[\\s\\S]*?ê³µìœ í•˜ê¸°\\s*ì‹ ê³ í•˜ê¸°\\s*/, '');\n    }\n  }\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 2: ê¸°ì ì •ë³´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n  // ê¸°ìëª… ì´ë©”ì¼ íŒ¨í„´ ì œê±°\n  rawContent = rawContent.replace(/\\n\\/[ê°€-í£]{2,4}\\s*ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s\\n]+/g, '');\n  rawContent = rawContent.replace(/\\/[ê°€-í£]{2,4}\\s*ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s\\n]+/g, '');\n  \n  // ì§€ì—­ëª… ê¸°ìëª… ì´ë©”ì¼ íŒ¨í„´ ì œê±°\n  rawContent = rawContent.replace(/\\n\\/[ê°€-í£]+\\s*[ê°€-í£]{2,4}ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s\\n]+/g, '');\n  rawContent = rawContent.replace(/\\/[ê°€-í£]+\\s*[ê°€-í£]{2,4}ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s\\n]+/g, '');\n  rawContent = rawContent.replace(/\\[ë””ì§€í„¸ë°ì¼ë¦¬\\s*[ê°€-í£]+ê¸°ì\\]/g, '');\n  rawContent = rawContent.replace(/\\[ë””ì§€í„¸íˆ¬ë°ì´\\s*AI\\s*ë¦¬í¬í„°\\]/g, '');\n  rawContent = rawContent.replace(/\\[[ê°€-í£]+(?:ë°ì¼ë¦¬|íˆ¬ë°ì´|ë‰´ìŠ¤|íƒ€ì„ì¦ˆ)\\s*[ê°€-í£]*(?:ê¸°ì|ë¦¬í¬í„°|AIë¦¬í¬í„°)\\]/g, '');\n\n  // ê¸°ë³¸ ê¸°ì íŒ¨í„´\n  rawContent = rawContent.replace(/\\([\\sê°€-í£]*=\\s*ì—°í•©ë‰´ìŠ¤\\)\\s*[ê°€-í£\\s]+ê¸°ì\\s*[=]*\\s*/g, '');\n  rawContent = rawContent.replace(/\\([^)]*=\\s*[^)]+\\)\\s*[ê°€-í£\\s]+ê¸°ì\\s*[=]*\\s*/g, '');\n  rawContent = rawContent.replace(/[ê°€-í£]+ê¸°ì\\s+êµ¬ë…\\s+êµ¬ë…ì¤‘/g, '');\n  rawContent = rawContent.replace(/\\[[^\\]]*ê¸°ì\\]/g, '');\n\n  // ì–¸ë¡ ì‚¬=ê¸°ì íŒ¨í„´\n  rawContent = rawContent.replace(/ë¸Œë ˆì´í¬ë‰´ìŠ¤\\s+[ê°€-í£]{2,4}\\s*ê¸°ì\\s*=\\s*/g, '');\n  \n  // ì–¸ë¡ ì‚¬ êµ¬ë¶„ì\n  rawContent = rawContent.replace(/\\në¦¬ê±¸íƒ€ì„ì¦ˆ\\s*$/gm, '');\n  rawContent = rawContent.replace(/ë¦¬ê±¸íƒ€ì„ì¦ˆ\\s+[ê°€-í£]{2,4}\\s*ê¸°ì/g, '');\n  \n  // ì¤‘ì•™ì´ì½”ë…¸ë¯¸ë‰´ìŠ¤ íŒ¨í„´\n  rawContent = rawContent.replace(/\\[ì¤‘ì•™ì´ì½”ë…¸ë¯¸ë‰´ìŠ¤\\s+[ê°€-í£]{2,4}\\]/g, '');\n  \n  // iMBCì—°ì˜ˆ íŒ¨í„´\n  rawContent = rawContent.replace(/iMBCì—°ì˜ˆ\\s+[ê°€-í£]{2,4}\\s*\\|\\s*ì‚¬ì§„ì¶œì²˜[^\\n]*/g, '');\n  rawContent = rawContent.replace(/iMBCì—°ì˜ˆ\\s+[ê°€-í£]{2,4}/g, '');\n\n  // ë¹ˆ ê´„í˜¸ ê¸°ì ì •ë³´\n  rawContent = rawContent.replace(/[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\(\\s*\\)/g, '');\n  rawContent = rawContent.replace(/\\n[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\(\\s*\\)\\s*$/gm, '');\n\n  // ì–¸ë¡ ì‚¬ êµ¬ë¶„ì íŒ¨í„´\n  rawContent = rawContent.replace(/[ê°€-í£]+íƒ€ì„ìŠ¤\\s*=\\s*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\|/g, '');\n  rawContent = rawContent.replace(/\\në¬¸í™”ë‰´ìŠ¤\\s*\\/\\s*$/gm, '');\n  rawContent = rawContent.replace(/ë¬¸í™”ë‰´ìŠ¤\\s*\\/\\s*/g, '');\n\n  // ë°©ì†¡ ì–¸ë¡ ì‚¬ íŒ¨í„´\n  rawContent = rawContent.replace(/\\n[ê°€-í£]{2,4}\\s*ë¨¸ë‹ˆíˆ¬ë°ì´ë°©ì†¡\\s*MTN\\s*ê¸°ì\\s*$/gm, '');\n  rawContent = rawContent.replace(/[ê°€-í£]{2,4}\\s*ë¨¸ë‹ˆíˆ¬ë°ì´ë°©ì†¡\\s*MTN\\s*ê¸°ì/g, '');\n\n  // AIë¦¬í¬í„° íŒ¨í„´\n  rawContent = rawContent.replace(/\\[[^\\]]*AI\\s*ë¦¬í¬í„°\\]/g, '');\n  rawContent = rawContent.replace(/\\[[ê°€-í£]+(?:ë°ì¼ë¦¬|íˆ¬ë°ì´|ë‰´ìŠ¤|íƒ€ì„ì¦ˆ|ê²½ì œ|ì¼ë³´|ì‹ ë¬¸)\\s+[ê°€-í£]+(?:ê¸°ì|ë¦¬í¬í„°)\\]/g, '');\n  rawContent = rawContent.replace(/\\[[ê°€-í£]+(?:ë°ì¼ë¦¬|íˆ¬ë°ì´|ë‰´ìŠ¤|íƒ€ì„ì¦ˆ|ê²½ì œ|ì¼ë³´|ì‹ ë¬¸)\\s+AI\\s*ë¦¬í¬í„°\\]/g, '');\n  rawContent = rawContent.replace(/\\[[ê°€-í£]+\\s+[ê°€-í£]{2,4}ê¸°ì\\]/g, '');\n\n  // ë‰´ìŠ¤1 íŠ¹ìˆ˜ íŒ¨í„´\n  rawContent = rawContent.replace(/\\([ê°€-í£]+=ë‰´ìŠ¤1\\)\\s*=\\s*/g, '');\n  rawContent = rawContent.replace(/\\([^)]*ì œê³µ\\.\\s*ì¬íŒë§¤\\s*ë°\\s*DB\\s*ê¸ˆì§€\\)\\s*\\d{4}\\.\\d{1,2}\\.\\d{1,2}\\/ë‰´ìŠ¤1/g, '');\n  \n  // ë‰´ì‹œìŠ¤ íŒ¨í„´\n  rawContent = rawContent.replace(/â“’ë‰´ì‹œìŠ¤/g, '');\n  rawContent = rawContent.replace(/\\[([ê°€-í£]+)=ë‰´ì‹œìŠ¤\\]\\s*/g, '');\n  rawContent = rawContent.replace(/\\[([ê°€-í£]+)=ë‰´ì‹œìŠ¤\\][ê°€-í£\\s]+ê¸°ì\\s*=\\s*/g, '');\n  rawContent = rawContent.replace(/[a-zA-Z0-9._-]+@newsis\\.com/g, '');\n  \n  rawContent = rawContent.replace(/^[ê°€-í£]{2,4}\\s+ê¸°ì\\s*=\\s*/gm, '');\n  rawContent = rawContent.replace(/\\n[ê°€-í£]{2,4}\\s+ê¸°ì\\s*=\\s*/g, '');\n\n  // BBC ìŠ¤íƒ€ì¼ ê¸°ì ì •ë³´\n  rawContent = rawContent.replace(/^ê¸°ì,\\s*[^\\n]+ê¸°ì,?\\s*[^\\n]*$/gm, '');\n  rawContent = rawContent.replace(/ê¸°ì,\\s*[ê°€-í£\\s]+ê¸°ì/g, '');\n\n  // ë‚´ì™¸ê²½ì œTV íŒ¨í„´\n  rawContent = rawContent.replace(/\\|\\s*[^\\|]+=[ê°€-í£\\s]+ê¸°ì\\s*\\|\\s*=\\s*/g, '');\n\n  // ë‚´ì™¸ë‰´ìŠ¤í†µì‹  íŒ¨í„´\n  rawContent = rawContent.replace(/\\[[^\\]]+\\]\\s*[ê°€-í£\\s]+ê¸°ì/g, '');\n  rawContent = rawContent.replace(/\\|\\s*[^\\|]+=[ê°€-í£\\s]+ê¸°ì\\s*\\|/g, '');\n\n  // ë„ì‹œ/í†µì‹ ì‚¬ ì—°í•©ë‰´ìŠ¤ íŒ¨í„´\n  rawContent = rawContent.replace(/[ê°€-í£]+\\/(ë¡œì´í„°|AFP|AP|ë¸”ë£¸ë²„ê·¸|Getty Images)\\s+ì—°í•©ë‰´ìŠ¤/g, '');\n  rawContent = rawContent.replace(/^[ê°€-í£]+\\/(ë¡œì´í„°|AFP|AP|ë¸”ë£¸ë²„ê·¸|Getty Images)\\s+ì—°í•©ë‰´ìŠ¤\\s*$/gm, '');\n\n  // íŠ¹íŒŒì› ë’¤ viewer ì œê±°\n  rawContent = rawContent.replace(/([ê°€-í£]+=?[ê°€-í£\\s]+íŠ¹íŒŒì›)\\s*\\n\\s*viewer\\s*/gi, '$1');\n  \n  // ë„ì‹œ=íŠ¹íŒŒì› íŒ¨í„´ ì œê±°\n  rawContent = rawContent.replace(/[ê°€-í£]+=[ê°€-í£]{2,4}\\s*íŠ¹íŒŒì›/g, '');\n  rawContent = rawContent.replace(/^[ê°€-í£]+=[ê°€-í£]{2,4}\\s*íŠ¹íŒŒì›\\s*$/gm, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 3: ì—°í•©ë‰´ìŠ¤ íƒœê·¸ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  rawContent = rawContent.replace(/<ì—°í•©ë‰´ìŠ¤>/g, '');\n  rawContent = rawContent.replace(/^<ì—°í•©ë‰´ìŠ¤>\\s*$/gm, '');\n  \n  // ì—°í•©ë‰´ìŠ¤ íŒ¨í„´\n  rawContent = rawContent.replace(/\\/\\s*ì—°í•©ë‰´ìŠ¤\\s*/g, '');\n  rawContent = rawContent.replace(/\\n\\/\\s*ì—°í•©ë‰´ìŠ¤\\s*$/gm, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 4: TTS ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  rawContent = rawContent.replace(/ê¸°ì‚¬ë¥¼\\s*ì½ì–´ë“œë¦½ë‹ˆë‹¤\\s*Your\\s*browser\\s*does\\s*not\\s*support\\s*the\\s*audio\\s*element\\.\\s*\\d+:\\d+\\s*/g, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 5: ì‚¬ì§„/ì˜ìƒ ë©”íƒ€ ì •ë³´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  \n  // ì¶œì²˜ ê´„í˜¸ íŒ¨í„´\n  rawContent = rawContent.replace(/\\(í™”ë©´ì¶œì²˜\\s*[:ï¼š]?\\s*[^\\)]+\\)/g, '');\n  rawContent = rawContent.replace(/\\(ì‚¬ì§„\\s*=\\s*[^\\)]+\\s*ì œê³µ\\)/g, '');\n  rawContent = rawContent.replace(/\\(ì‚¬ì§„ì¶œì²˜=[^\\)]+\\)/g, '');\n  rawContent = rawContent.replace(/\\(ì¶œì²˜=[^\\)]+\\)/g, '');\n  \n  // ì‚¬ì§„='...' ìœ íŠœë¸Œ ìº¡ì²˜\n  rawContent = rawContent.replace(/\\(ì‚¬ì§„=['\"'][^'\"']+['\"']\\s*ìœ íŠœë¸Œ\\s*ìº¡ì²˜,\\s*ì—°í•©ë‰´ìŠ¤\\)/g, '');\n  \n  // ì‚¬ì§„ ì¶œì²˜ íŒ¨í„´\n  rawContent = rawContent.replace(/<ì‚¬ì§„ì¶œì²˜=[^>]+>/g, '');\n  rawContent = rawContent.replace(/\\n<ì‚¬ì§„ì¶œì²˜=[^>]+>\\s*$/gm, '');\n  \n  // iMBC ì‚¬ì§„ì¶œì²˜\n  rawContent = rawContent.replace(/\\/\\s*ì‚¬ì§„ì¶œì²˜\\s*[^\\n]+\\/\\s*â€»ì´ ê¸°ì‚¬ì˜ ì €ì‘ê¶Œì€ iMBC[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\/\\s*ì‚¬ì§„ì¶œì²˜\\s*[^\\n]+\\s*\\/\\s*/gi, '');\n  \n  // SNS ìº¡ì²˜\n  rawContent = rawContent.replace(/SNS\\s*ìº¡ì²˜/gi, '');\n  rawContent = rawContent.replace(/\\nSNS\\s*ìº¡ì²˜\\s*$/gmi, '');\n  \n  // ê²Œí‹°ì´ë¯¸ì§€\n  rawContent = rawContent.replace(/ì‚¬ì§„\\s*\\/\\s*gettyimagesBank/gi, '');\n  rawContent = rawContent.replace(/\\nì‚¬ì§„\\s*\\/\\s*gettyimagesBank\\s*$/gmi, '');\n  \n  // í°ì‚¬ì§„ë³´ê¸° ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„°\n  rawContent = rawContent.replace(/í°ì‚¬ì§„ë³´ê¸°\\s*â–²[^\\n]*â“’[^\\n]*ê´€ë ¨ì‚¬ì§„ë³´ê¸°/gi, '');\n  \n  // ì‚¬ì§„ í™•ëŒ€\n  rawContent = rawContent.replace(/ì‚¬ì§„\\s*í™•ëŒ€/gi, '');\n  \n  // ì‚¬ì§„ í¬ë ˆë”§\n  rawContent = rawContent.replace(/\\/ì‚¬ì§„\\s*=\\s*[ê°€-í£]+\\s*ê¸°ì/g, '');\n  rawContent = rawContent.replace(/\\/\\s*ì‚¬ì§„\\s*ì œê³µ\\s*=\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/[â–²â–¼][^\\n]*(?:\\/ì‚¬ì§„=|Â©)[^\\n]*/g, '');\n  rawContent = rawContent.replace(/[â–²â–¼]\\s*ì‚¬ì§„\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/[â–²â–¼]\\s*ì¶œì²˜\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/ì‚¬ì§„\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/ì‚¬ì§„ì œê³µ\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/ì‚¬ì§„ì œê³µ\\s*[ï½œ|]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/^ì‚¬ì§„ì œê³µ\\s*[ï½œ|]\\s*[^\\n]+$/gm, '');\n  \n  // ë‰´ìŠ¤1 ì‚¬ì§„ íŒ¨í„´\n  rawContent = rawContent.replace(/\\d{4}\\.\\d{1,2}\\.\\d{1,2}\\/ë‰´ìŠ¤1\\s*â“’\\s*News1/g, '');\n  \n  // BBC ìŠ¤íƒ€ì¼ ì‚¬ì§„ ë©”íƒ€\n  rawContent = rawContent.replace(/^ì‚¬ì§„\\s*ì¶œì²˜,\\s*[^\\n]+$/gm, '');\n  rawContent = rawContent.replace(/^ì‚¬ì§„\\s*ì„¤ëª…,\\s*[^\\n]+$/gm, '');\n  \n  // ë¯¸ë””ì–´ íƒœê·¸\n  rawContent = rawContent.replace(/\\[ì‚¬ì§„[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ì˜ìƒ[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ì´ë¯¸ì§€[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ë™ì˜ìƒ[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ê·¸ë˜í”½[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\n?\\[ì‚¬ì§„[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\n?ì‚¬ì§„[:ï¼š]\\s*[^\\n]+\\]/g, '');;\n\n  // ì¬íŒë§¤ ë° DB ê¸ˆì§€ íŒ¨í„´\n  rawContent = rawContent.replace(/[^\\n]*\\[[^\\]]*(?:ì œê³µ|ì—°í•©ë‰´ìŠ¤|ìº¡ì²˜|ìë£Œì‚¬ì§„)\\.\\s*ì¬íŒë§¤\\s*ë°\\s*DB\\s*ê¸ˆì§€\\]/g, '');\n  rawContent = rawContent.replace(/\\*ì¬íŒë§¤\\s*ë°\\s*DB\\s*ê¸ˆì§€/g, ''); \n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 6: ë°©ì†¡ ëŒ€ë³¸/ì¸í„°ë·° íŒ¨í„´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  rawContent = rawContent.replace(/â—€\\s*(ì•µì»¤|ë¦¬í¬íŠ¸|ê¸°ì|ì¸í„°ë·°)\\s*â–¶/g, '\\n');\n  rawContent = rawContent.replace(/\\[[^\\]]+\\/[^\\]]+\\s*\\([^)]+\\)\\]/g, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 7: ì˜ìƒ ì œì‘ ì •ë³´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  rawContent = rawContent.replace(/ì˜ìƒì·¨ì¬\\s*[:ï¼š][^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/ì˜ìƒí¸ì§‘\\s*[:ï¼š][^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/ì˜ìƒì œê³µ\\s*[:ï¼š][^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/MBCë‰´ìŠ¤\\s+[ê°€-í£]+ì…ë‹ˆë‹¤\\./g, '');\n  \n  // VOD ì‹œì²­ ì•ˆë‚´\n  rawContent = rawContent.replace(/VOD\\s*ì‹œì²­\\s*ì•ˆë‚´[\\s\\S]*?ë¸Œë¼ìš°ì €\\s*ì—…ê·¸ë ˆì´ë“œ\\s*ë°\\s*ì„¤ì¹˜\\s*/gi, '');\n  rawContent = rawContent.replace(/ì–´ë„ë¹„\\s*í”Œë˜ì‹œ\\s*í”Œë ˆì´ì–´\\s*ì„œë¹„ìŠ¤\\s*ì¢…ë£Œ[\\s\\S]*?ë¸Œë¼ìš°ì €\\s*ì—…ê·¸ë ˆì´ë“œ[^\\n]*/gi, '');\n  \n  // ë¸Œë¼ìš°ì € ì§€ì› ë©”ì‹œì§€\n  rawContent = rawContent.replace(/ë¸Œë¼ìš°ì €ê°€\\s*(video|ì˜¤ë””ì˜¤)\\s*íƒœê·¸ë¥¼\\s*ì§€ì›í•˜ì§€\\s*ì•ŠìŠµë‹ˆë‹¤[\\s\\S]*?ë‹«ê¸°\\s*/gi, '');\n  rawContent = rawContent.replace(/ì£„ì†¡í•˜ì§€ë§Œ\\s*ë‹¤ë¥¸\\s*ë¸Œë¼ìš°ì €ë¥¼\\s*ì‚¬ìš©í•˜ì—¬\\s*ì£¼ì‹­ì‹œì˜¤\\./gi, '');\n  \n  // YTN ì˜ìƒ ì œì‘ì§„ ì •ë³´ ë¸”ë¡\n  rawContent = rawContent.replace(/\\nì˜ìƒê¸°ì\\s*[:ï¼š]\\s*[^\\n]+\\nì˜ìƒí¸ì§‘\\s*[;ï¼›:ï¼š]\\s*[^\\n]+[\\s\\S]*?YTN[^\\n]*\\nâ€»\\s*'ë‹¹ì‹ ì˜ ì œë³´ê°€ ë‰´ìŠ¤ê°€ ë©ë‹ˆë‹¤'[\\s\\S]*?(\\[ë©”ì¼\\]|\\[ì´ë©”ì¼\\])[^\\n]*/gi, '');\n  \n  // YTN ì œë³´ ì•ˆë‚´\n  rawContent = rawContent.replace(/â€»\\s*'ë‹¹ì‹ ì˜ ì œë³´ê°€ ë‰´ìŠ¤ê°€ ë©ë‹ˆë‹¤'[\\s\\S]*?(\\[ë©”ì¼\\]|\\[ì´ë©”ì¼\\])[^\\n]*/gi, '');\n  \n  // YTN ê´€ë ¨ ì¶”ê°€ íŒ¨í„´\n  rawContent = rawContent.replace(/\\[ì¹´ì¹´ì˜¤í†¡\\]\\s*YTN\\s*ê²€ìƒ‰í•´\\s*ì±„ë„\\s*ì¶”ê°€/gi, '');\n  rawContent = rawContent.replace(/\\[ì „í™”\\]\\s*\\d{2,3}-\\d{3,4}-\\d{4}/g, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 8: ì œë³´/ì—°ë½ì²˜ ì •ë³´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  rawContent = rawContent.replace(/â–·\\s*ì „í™”[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/â–·\\s*ì´ë©”ì¼[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/â–·\\s*ì¹´ì¹´ì˜¤í†¡[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/â– \\s*ì œë³´í•˜ê¸°/g, '');\n  rawContent = rawContent.replace(/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g, '');\n  \n  // ì—°í•©ë‰´ìŠ¤TV ì œë³´\n  rawContent = rawContent.replace(/ì—°í•©ë‰´ìŠ¤TV\\s*ê¸°ì‚¬ë¬¸ì˜\\s*ë°\\s*ì œë³´[\\s\\S]*?ë¼ì¸\\s*ì•±ì—ì„œ[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/ë‹¹ì‹ ì´\\s*ë‹´ì€\\s*ìˆœê°„ì´\\s*ë‰´ìŠ¤ì…ë‹ˆë‹¤!/gi, '');\n  rawContent = rawContent.replace(/jebo23/gi, '');\n  rawContent = rawContent.replace(/\\nì¹´í†¡\\/ë¼ì¸\\s*jebo23\\s*/gi, '');\n  \n  // ë¼ì¸ ì•± ì¹œêµ¬ ì¶”ê°€\n  rawContent = rawContent.replace(/\\në¼ì¸\\s*ì•±ì—ì„œ\\s*['\"'']['\"'']\\s*ì¹œêµ¬\\s*ì¶”ê°€\\s*/gi, '');\n  rawContent = rawContent.replace(/ë¼ì¸\\s*ì•±ì—ì„œ\\s*['\"'']['\"'']\\s*ì¹œêµ¬\\s*ì¶”ê°€/gi, '');\n\n  // ì œë³´ ì¹´ì¹´ì˜¤í†¡ íŒ¨í„´\n  rawContent = rawContent.replace(/\\nì œë³´ëŠ”\\s*ì¹´ì¹´ì˜¤í†¡\\s+[a-zA-Z0-9]+/g, '');\n  rawContent = rawContent.replace(/ì œë³´ëŠ”\\s*ì¹´ì¹´ì˜¤í†¡\\s+[a-zA-Z0-9]+/g, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 9: UI ìš”ì†Œ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  rawContent = rawContent.replace(/ì´ë¯¸ì§€\\s*í™•ëŒ€/g, '');\n  rawContent = rawContent.replace(/ì´ì „\\s+ë‹¤ìŒ/g, '');\n  rawContent = rawContent.replace(/ì¢‹ì•„ìš”\\s*ì‘ì›ìˆ˜/g, '');\n  rawContent = rawContent.replace(/viewer/gi, '');\n  \n  // ê¸€ìí¬ê¸° ë³€ê²½ ì•ˆë‚´\n  rawContent = rawContent.replace(/ê¸°ì‚¬ì˜\\s*ë³¸ë¬¸\\s*ë‚´ìš©ì€\\s*ì´\\s*ê¸€ìí¬ê¸°ë¡œ\\s*ë³€ê²½ë©ë‹ˆë‹¤\\./g, '');\n  rawContent = rawContent.replace(/\\nê¸°ì‚¬ì˜\\s*ë³¸ë¬¸\\s*ë‚´ìš©ì€\\s*ì´\\s*ê¸€ìí¬ê¸°ë¡œ\\s*ë³€ê²½ë©ë‹ˆë‹¤\\.\\s*/g, '');\n  \n  // AI ìš”ì•½ ì•ˆë‚´\n  rawContent = rawContent.replace(/AI\\s*ìš”ì•½ì€\\s*OpenAIì˜\\s*ìµœì‹ \\s*ê¸°ìˆ ì„[\\s\\S]*?í•¨ê»˜\\s*í™•ì¸í•˜ëŠ”\\s*ê²ƒì´\\s*ì¢‹ìŠµë‹ˆë‹¤\\./gi, '');\n  \n  // Credits íŒ¨í„´\n  rawContent = rawContent.replace(/\\nCredits\\s+[^\\n]+$/gm, '');\n  rawContent = rawContent.replace(/Credits\\s+[A-Za-z\\s]+/g, '');\n  \n  // ê¸°ì‚¬ì˜ ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ìë£Œ\n  rawContent = rawContent.replace(/\\nê¸°ì‚¬ì˜\\s*ì´í•´ë¥¼\\s*ë•ê¸°\\s*ìœ„í•œ\\s*ìë£Œ\\s*/gi, '');\n  rawContent = rawContent.replace(/ê¸°ì‚¬ì˜\\s*ì´í•´ë¥¼\\s*ë•ê¸°\\s*ìœ„í•œ\\s*ìë£Œ\\s*/gi, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 10: íŠ¹ìˆ˜ íŒ¨í„´ ì œê±°\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  \n  // ì¸í¬ë§¥ìŠ¤ ë‹¨ë§ê¸° ì•ˆë‚´\n  rawContent = rawContent.replace(/\\në³¸ ê¸°ì‚¬ëŠ” ì¸í¬ë§¥ìŠ¤ ê¸ˆìœµì •ë³´ ë‹¨ë§ê¸°ì—ì„œ \\d{1,2}ì‹œ \\d{1,2}ë¶„ì— ì„œë¹„ìŠ¤ëœ ê¸°ì‚¬ì…ë‹ˆë‹¤\\./g, '');\n  \n  // ì—°í•©ì¸í¬ë§¥ìŠ¤/ì—°í•©ë‰´ìŠ¤ íŠ¹íŒŒì›\n  rawContent = rawContent.replace(/\\n?\\([ê°€-í£]+=ì—°í•©(ì¸í¬ë§¥ìŠ¤|ë‰´ìŠ¤)[^\\)]*\\)\\s*[ê°€-í£\\s]+\\s*(íŠ¹íŒŒì›|ê¸°ì)\\s*=\\s*/g, '');\n\n  // ê´‘ê³  í‘œì‹œ\n  rawContent = rawContent.replace(/\\nê´‘ê³ \\n/g, '\\n');\n  rawContent = rawContent.replace(/^ê´‘ê³ $/gm, '');\n  \n  // ê´„í˜¸ ì•ˆ ê¸°ì ì •ë³´\n  rawContent = rawContent.replace(/\\(\\n?\\s*[ê°€-í£\\s]+ê¸°ì\\s*=\\s*[^\\)]*\\)?/g, '');\n  rawContent = rawContent.replace(/\\(\\n?\\s*[ê°€-í£\\s]+íŠ¹íŒŒì›\\s*=\\s*[^\\)]*\\)?/g, '');\n  \n  // Grammy/ì‹œìƒì‹ ëŒ€ê·œëª¨ ë¦¬ìŠ¤íŠ¸\n  rawContent = rawContent.replace(/\\n\\d{4}\\s+Grammy\\s+nominees[\\s\\S]*?(?=\\n\\n[ê°€-í£]|$)/gi, '');\n  rawContent = rawContent.replace(/\\n\\*\\s*(Record|Album|Song|Best)\\s+of\\s+the\\s+Year[\\s\\S]*?(?=\\n\\n[ê°€-í£]|$)/gi, '');\n  \n  // ì˜ë¬¸ ê¸°ì‚¬ Google Translate ì•ˆë‚´\n  rawContent = rawContent.replace(/\\n\\*ì•„ë˜ëŠ”\\s*ìœ„\\s*ê¸°ì‚¬ë¥¼\\s*'êµ¬ê¸€\\s*ë²ˆì—­'ìœ¼ë¡œ\\s*ë²ˆì—­í•œ\\s*ì˜ë¬¸\\s*ê¸°ì‚¬ì˜\\s*\\[ì „ë¬¸\\]ì…ë‹ˆë‹¤\\.[\\s\\S]*?Hanteo Chart website\\./gi, '');\n  rawContent = rawContent.replace(/<\\*The following is \\[the full text\\][\\s\\S]*?Google Translate' is working hard to improve understanding[\\s\\S]*?>\\s*/gi, '');\n  \n  // ì¨í´ì°¨íŠ¸ ë°ì´í„° ë¸”ë¡\n  rawContent = rawContent.replace(/\\ní•¨ê»˜\\s*ê³µê°œëœ\\s*\\d{4}ë…„\\s*\\d+ì£¼ì°¨[\\s\\S]*?ì¸ì¦ì„\\s*ë°›ëŠ”ë‹¤\\./gi, '');\n  rawContent = rawContent.replace(/ì¨í´ì°¨íŠ¸ì—ì„œëŠ”\\s*HUNTR\\/X[\\s\\S]*?ì¸ì¦ì„\\s*ë°›ëŠ”ë‹¤\\./gi, '');\n  \n  // ì§¤eëª½ë•… í—¤ë” ë¦¬ìŠ¤íŠ¸\n  rawContent = rawContent.replace(/^\\d+\\.\\s*\"[^\"]+\"\\s*â€¦[^\\n]+\\n/gm, '');\n  rawContent = rawContent.replace(/^[1-9]\\d*\\.\\s+[^\\n]+\\n/gm, '');\n  rawContent = rawContent.replace(/í‡´ê·¼ê¸¸\\s*'ì§¤'ë¡œ\\s*ë³´ëŠ”\\s*ë‰´ìŠ¤,\\s*<ì§¤eëª½ë•…>ì…ë‹ˆë‹¤\\./gi, '');\n  \n  // ì§¤eëª½ë•… í‘¸í„°\n  rawContent = rawContent.replace(/\\[.*?ë””ì§€í„¸ë‰´ìŠ¤ë¶€\\s*ì¸í„´ê¸°ì[\\s\\S]*?<ì§¤eëª½ë•…>ì…ë‹ˆë‹¤\\./gi, '');\n  rawContent = rawContent.replace(/\\.\\s*\\[ë°•ì„¤ì•„\\s*ë””ì§€í„¸ë‰´ìŠ¤ë¶€\\s*ì¸í„´ê¸°ì\\s*\\]/gi, '.');\n  rawContent = rawContent.replace(/\\[ë°•ì„¤ì•„\\s*ë””ì§€í„¸ë‰´ìŠ¤ë¶€\\s*ì¸í„´ê¸°ì\\s*\\]/gi, '');\n  rawContent = rawContent.replace(/\\[[ê°€-í£]+\\s*ë””ì§€í„¸ë‰´ìŠ¤ë¶€\\s*ì¸í„´ê¸°ì\\s*\\]/gi, '');\n  \n  // í¬íŠ¸ë‚˜ì´íŠ¸ í™ˆí˜ì´ì§€ ì•ˆë‚´\n  rawContent = rawContent.replace(/'ì¼€ì´íŒ\\s*ë°ëª¬\\s*í—Œí„°ìŠ¤'\\s*í˜‘ì—…ì—\\s*ê´€í•œ\\s*ìì„¸í•œ\\s*ë‚´ìš©ì€\\s*í¬íŠ¸ë‚˜ì´íŠ¸\\s*í™ˆí˜ì´ì§€\\s*ë‚´\\s*ë¸”ë¡œê·¸ì—ì„œ\\s*í™•ì¸í• \\s*ìˆ˜\\s*ìˆë‹¤\\./gi, '');\n  rawContent = rawContent.replace(/í˜‘ì—…ì—\\s*ê´€í•œ\\s*ìì„¸í•œ\\s*ë‚´ìš©ì€\\s*í¬íŠ¸ë‚˜ì´íŠ¸\\s*í™ˆí˜ì´ì§€\\s*ë‚´\\s*ë¸”ë¡œê·¸ì—ì„œ\\s*í™•ì¸í• \\s*ìˆ˜\\s*ìˆë‹¤\\./gi, '');\n  \n  // ì„œìš¸ê²½ì œ ê´€ë ¨ë‰´ìŠ¤ ë¸”ë¡\n  rawContent = rawContent.replace(/'ì‚¬ìƒ\\s*ì²«'.*?\\[ë§ˆì¼“ì‹œê·¸ë„\\]/gi, '');\n  rawContent = rawContent.replace(/\\d{4}ë…„\\s*\\d+ì›”\\d+ì¼\\([ê°€-í£]\\).*?\\[ON\\s*AIR\\s*ì„œìš¸ê²½ì œ\\]/gi, '');\n  rawContent = rawContent.replace(/ì¥ë™í˜\\s*\"æì •ë¶€.*?\"/gi, '');\n  \n  // ì €ì‘ê¶Œ/ë¬´ë‹¨ì „ì¬/ì¬ë°°í¬ ê¸ˆì§€ íŒ¨í„´ (ëª¨ë“  ë³€í˜• í¬í•¨)\n  rawContent = rawContent.replace(/\\nì €ì‘ê¶Œì\\s*Â©\\s*[^\\n]*?(?:ë¬´ë‹¨ì „ì¬|ë¬´ë‹¨\\s*ì „ì¬)[^\\n]*?(?:ì¬ë°°í¬|ì¬\\s*ë°°í¬)[^\\n]*?ê¸ˆì§€[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\nâ“’[^\\n]*?(?:ë¬´ë‹¨ì „ì¬|ë¬´ë‹¨\\s*ì „ì¬)[^\\n]*?(?:ì¬ë°°í¬|ì¬\\s*ë°°í¬)[^\\n]*?ê¸ˆì§€[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\.\\s*\\nâ“’[^\\n]*?(?:ë¬´ë‹¨ì „ì¬|ë¬´ë‹¨\\s*ì „ì¬)[^\\n]*?(?:ì¬ë°°í¬|ì¬\\s*ë°°í¬)[^\\n]*?ê¸ˆì§€[^\\n]*/gi, '.');\n  rawContent = rawContent.replace(/\\.\\s*\\nì €ì‘ê¶Œì[^\\n]*?(?:ë¬´ë‹¨ì „ì¬|ë¬´ë‹¨\\s*ì „ì¬)[^\\n]*?(?:ì¬ë°°í¬|ì¬\\s*ë°°í¬)[^\\n]*?ê¸ˆì§€[^\\n]*/gi, '.');\n  rawContent = rawContent.replace(/â“’[^\\n]*?(?:ë¬´ë‹¨ì „ì¬|ë¬´ë‹¨\\s*ì „ì¬)[^\\n]*?(?:ì¬ë°°í¬|ì¬\\s*ë°°í¬)[^\\n]*?ê¸ˆì§€[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/ì €ì‘ê¶Œì\\s*Â©[^\\n]*?(?:ë¬´ë‹¨ì „ì¬|ë¬´ë‹¨\\s*ì „ì¬)[^\\n]*?(?:ì¬ë°°í¬|ì¬\\s*ë°°í¬)[^\\n]*?ê¸ˆì§€[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\nCopyright\\s*â“’\\s*[^\\n]*?(?:ë¬´ë‹¨|ì „ì¬|ì¬ë°°í¬|ê¸ˆì§€)[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\nÂ©\\s*[^\\n]*?\\([^)]*www\\.[^)]+\\)[^\\n]*?(?:ë¬´ë‹¨|ì „ì¬|ì¬ë°°í¬|ê¸ˆì§€)[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\nâ€»\\s*ì €ì‘ê¶Œì[^\\n]*/g, '');\n  rawContent = rawContent.replace(/\\nCopyright\\s*â“’\\s*[^\\n]*?(?:ë¬´ë‹¨|ì „ì¬|ì¬ë°°í¬|ê¸ˆì§€)[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\nÂ©\\s*[^\\n]*?\\([^)]*www\\.[^)]+\\)[^\\n]*?(?:ë¬´ë‹¨|ì „ì¬|ì¬ë°°í¬|ê¸ˆì§€)[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\n+Copyright\\s*â“’\\s*[^\\n]*?(?:ë¬´ë‹¨|ì „ì¬|ì¬ë°°í¬|ê¸ˆì§€)[^\\n]*/gi, '');\n  rawContent = rawContent.replace(/\\n+Copyright\\s*[Â©â“’]\\s*[^\\n]*$/gmi, '');\n  rawContent = rawContent.replace(/\\n+Copyright\\s*[Â©â“’]\\s*[^\\n]*/gi, '');\n\n  // êº½ì‡ ê´„í˜¸ ì €ì‘ê¶Œ íŒ¨í„´\n  rawContent = rawContent.replace(/<ì €ì‘ê¶Œì\\([cC]\\)\\s*ì—°í•©ë‰´ìŠ¤[^>]*>/g, '');\n  rawContent = rawContent.replace(/Copyright\\s*Â©\\s*[^.]+\\.\\s*All rights reserved\\.[^\\n]*/g, '');\n  rawContent = rawContent.replace(/<â“’[^>]*(?:ì•„ì‹œì•„ê²½ì œ|ê²½ì œì½˜í…ì¸ )[^>]*>/g, '');\n  rawContent = rawContent.replace(/Â©'[^']*'\\s*ì•„ì£¼ê²½ì œ\\.[^\\n]*/g, '');\n  rawContent = rawContent.replace(/<ì €ì‘ê¶Œì[^>]*>/g, '');\n  rawContent = rawContent.replace(/â€»\\s*ì´\\s*ì½˜í…ì¸ ëŠ”\\s*ì €ì‘ê¶Œë²•ì—\\s*ì˜í•˜ì—¬[^\\n]*?ê¸ˆí•©ë‹ˆë‹¤\\.\\s*/gi, '');\n  rawContent = rawContent.replace(/\\nâ€»\\s*ì´\\s*ì½˜í…ì¸ ëŠ”\\s*ì €ì‘ê¶Œë²•ì—\\s*ì˜í•˜ì—¬[^\\n]*?ê¸ˆí•©ë‹ˆë‹¤\\.\\s*/gi, '');\n\n  // Copyright ì§ì ‘ ì œê±°\n  rawContent = rawContent.split('\\nCopyright').join('');\n  rawContent = rawContent.split('\\n\\nCopyright').join('');\n  rawContent = rawContent.split('Copyright â“’').join('');\n  rawContent = rawContent.split('Copyright Â©').join('');\n  \n  // ë°˜ë³µ ë¬¸ì íŒ¨í„´\n  rawContent = rawContent.replace(/^([ê°€-í£]\\s*){3,}\\n/gm, '');\n  \n  // ê¸°ì í˜ì´ì§€ ë§í¬\n  rawContent = rawContent.replace(/[ê°€-í£\\s]+ê¸°ì\\s+ê¸°ìí˜ì´ì§€/g, '');\n  \n  // í›„ì› ì•ˆë‚´\n  rawContent = rawContent.replace(/Fníˆ¬ë°ì´ëŠ” ì—¬ëŸ¬ë¶„ì˜ í›„ì›ê¸ˆì„ ê·€í•˜ê²Œ ì“°ê² ìŠµë‹ˆë‹¤\\./g, '');\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 11: ë¼ì¸ë³„ í•„í„°ë§\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  let lines = rawContent.split('\\n').map(line => line.trim());\n\n  lines = lines.filter(line => {\n    if (!line || line.length < 3) return false;\n    if (line === '.' || line === '=' || line === '(' || line === ')') return false;\n    if (line === '/') return false;\n    if (/^\\/[ê°€-í£]*$/.test(line)) return false;\n    if (/^\\/\\s*$/.test(line)) return false;\n    \n    // viewer ë‹¨ë… ë‹¨ì–´\n    if (/^viewer$/i.test(line)) return false;\n    \n    // YTN ë‹¨ë… ë¼ì¸\n    if (/^YTN$/i.test(line)) return false;\n    \n    // í°ì‚¬ì§„ë³´ê¸° íŒ¨í„´\n    if (/í°ì‚¬ì§„ë³´ê¸°/i.test(line)) return false;\n    if (/ê´€ë ¨ì‚¬ì§„ë³´ê¸°/i.test(line)) return false;\n    \n    // ì˜ìƒ ì œì‘ì§„ ì •ë³´\n    if (/^ì˜ìƒê¸°ì\\s*[:ï¼š]/i.test(line)) return false;\n    if (/^ì˜ìƒí¸ì§‘\\s*[;ï¼›:ï¼š]/i.test(line)) return false;\n    \n    // YTN ì œë³´ ê´€ë ¨\n    if (/ë‹¹ì‹ ì˜ ì œë³´ê°€ ë‰´ìŠ¤ê°€ ë©ë‹ˆë‹¤/i.test(line)) return false;\n    if (/YTN\\s*ê²€ìƒ‰í•´\\s*ì±„ë„\\s*ì¶”ê°€/i.test(line)) return false;\n    \n    // ì‚¬ì§„ í™•ëŒ€\n    if (/^ì‚¬ì§„\\s*í™•ëŒ€$/i.test(line)) return false;\n    \n    // Credits\n    if (/^Credits\\s+/i.test(line)) return false;\n    \n    // SNS ìº¡ì²˜\n    if (/^SNS\\s*ìº¡ì²˜$/i.test(line)) return false;\n    \n    // ì¢‹ì•„ìš”/ë‚˜ë¹ ìš”\n    if (/^ì¢‹ì•„ìš”\\s+\\d+\\s+ë‚˜ë¹ ìš”\\s+\\d+$/i.test(line)) return false;\n    if (/ì¢‹ì•„ìš”\\s+\\d+\\s+ë‚˜ë¹ ìš”\\s+\\d+/i.test(line)) return false;\n    \n    // ë¦¬ê±¸íƒ€ì„ì¦ˆ\n    if (/^ë¦¬ê±¸íƒ€ì„ì¦ˆ$/i.test(line)) return false;\n    \n    // ê¸°ì/íŠ¹íŒŒì› íŒ¨í„´ (100ì ì´í•˜ ë¼ì¸ë§Œ)\n    if (line.length < 100) {\n      if (/^[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)\\s*$/.test(line)) return false;\n      if (/^[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)\\s*[\\/\\|]/.test(line)) return false;\n      if (/[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)\\s*(êµ¬ë…|í˜ì´ì§€|ê¸°ìí˜ì´ì§€)/.test(line)) return false;\n      if (/^[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\(\\s*\\)$/.test(line)) return false;\n    }\n\n    // ë„ì‹œ/í†µì‹ ì‚¬ ì—°í•©ë‰´ìŠ¤ ë¼ì¸\n    if (/^[ê°€-í£]+\\/(ë¡œì´í„°|AFP|AP|ë¸”ë£¸ë²„ê·¸|Getty Images)\\s+ì—°í•©ë‰´ìŠ¤/.test(line)) return false;\n    \n    // ê´‘ê³  ë¼ì¸\n    if (/^ê´‘ê³ $/.test(line)) return false;\n    \n    // ë‰´ì‹œìŠ¤ íŒ¨í„´\n    if (/^\\[([ê°€-í£]+)=ë‰´ì‹œìŠ¤\\]/.test(line)) return false;\n    if (/@newsis\\.com/.test(line)) return false;\n    \n    // ì‚¬ì§„ ê´€ë ¨\n    if (/^\\(ì‚¬ì§„\\s*=/.test(line)) return false;\n    if (/^\\(ì‚¬ì§„ì¶œì²˜=/.test(line)) return false;\n    if (/^<ì‚¬ì§„ì¶œì²˜=/.test(line)) return false;\n    if (/^ì‚¬ì§„ì œê³µ\\s*[ï½œ|]/.test(line)) return false;\n    if (/^ì‚¬ì§„\\s*ì¶œì²˜,/.test(line)) return false;\n    if (/^ì‚¬ì§„\\s*ì„¤ëª…,/.test(line)) return false;\n    if (/^ì‚¬ì§„\\s*ì œê³µ\\s*=/.test(line)) return false;\n    if (/^[â–²â–¼]\\s*ì‚¬ì§„\\s*=/.test(line)) return false;\n    if (/^[â–²â–¼]\\s*ì¶œì²˜\\s*[:ï¼š=]/.test(line)) return false;\n    if (/^\\/ì‚¬ì§„\\s*=\\s*[ê°€-í£]+\\s*ê¸°ì$/.test(line)) return false;\n    if (/^\\/\\s*ì‚¬ì§„\\s*ì œê³µ\\s*=/.test(line)) return false;\n    if (/^\\([ê°€-í£\\s]+\\s*ì œê³µ\\)$/.test(line)) return false;\n    if (/^ì‚¬ì§„\\s*\\/\\s*gettyimagesBank$/i.test(line)) return false;\n    \n    // BBC ìŠ¤íƒ€ì¼\n    if (/^ê¸°ì,\\s*[^\\n]+ê¸°ì/.test(line)) return false;\n    \n    // ë‚ ì§œ íŒ¨í„´\n    if (/^\\d{4}ë…„\\s*\\d{1,2}ì›”\\s*\\d{1,2}ì¼$/.test(line)) return false;\n    if (/^\\d{4}\\.\\d{1,2}\\.\\d{1,2}\\./.test(line)) return false;\n    \n    // ë‚´ì™¸ë‰´ìŠ¤í†µì‹ \n    if (/^\\[[^\\]]+\\]\\s*[ê°€-í£\\s]+ê¸°ì$/.test(line)) return false;\n    if (/^ë‚´ì™¸ë‰´ìŠ¤í†µì‹ ,\\s*NBNNEWS$/.test(line)) return false;\n    if (/^ê¸°ì‚¬\\s*URL\\s*:/.test(line)) return false;\n    if (/^\\|\\s*[^\\|]+=[ê°€-í£\\s]+ê¸°ì\\s*\\|$/.test(line)) return false;\n    \n    // ë°©ì†¡ì‚¬ UI\n    if (/^ê¸°ìë³„\\s*ë‰´ìŠ¤$/.test(line)) return false;\n    if (/^NEWS$/.test(line)) return false;\n    if (/^í™”ë©´\\s*í”„ë¦°íŠ¸$/.test(line)) return false;\n    if (/^TJB\\s*ëŒ€ì „ë°©ì†¡$/.test(line)) return false;\n    if (/^\\[ì±„ë„A\\s*ë‰´ìŠ¤\\]\\s*êµ¬ë…í•˜ê¸°$/.test(line)) return false;\n    if (/ì±„ë„A\\s*ë‰´ìŠ¤/.test(line)) return false;\n    if (/^MBCë‰´ìŠ¤ëŠ” 24ì‹œê°„/.test(line)) return false;\n    \n    // ë™ì˜ìƒ UI\n    if (/^(Cancel|live|CC|1x|2x|Speed|Subtitles)$/.test(line)) return false;\n    if (/^\\d{2}:\\d{2}$/.test(line)) return false;\n    if (/^ë™ì˜ìƒ\\s*ê³ ì •\\s*ì·¨ì†Œ$/.test(line)) return false;\n    if (/^ë™ì˜ìƒ\\s*ê³ ì •$/.test(line)) return false;\n    if (/^ì¬ìƒ$|^ì¼ì‹œì •ì§€$|^ìŒì†Œê±°$/.test(line)) return false;\n    if (/^ì „ì²´ì¬ìƒ$/.test(line)) return false;\n    \n    // ì¡°ì„ ì¼ë³´ íŒ¨í„´\n    if (/^\\d{6}\\s+ì—¬ë¡ \\d+/.test(line)) return false;\n    if (/ë§¤ì¼\\s*ì¡°ì„ ì¼ë³´ì—\\s*ì‹¤ë¦°\\s*ì¹¼ëŸ¼/.test(line)) return false;\n    if (/ë‰´ìŠ¤ë ˆí„°ë¥¼\\s*ë°›ì•„ë³´ì„¸ìš”/.test(line)) return false;\n    if (/'5ë¶„\\s*ì¹¼ëŸ¼'\\s*ë”ë³´ê¸°/.test(line)) return false;\n    \n    // êµ¬ë… ê´€ë ¨\n    if (/^êµ¬ë…ìˆ˜$/.test(line)) return false;\n    if (/^êµ¬ë…$/.test(line)) return false;\n    if (/^\\d{1,5}$/.test(line)) return false;\n    \n    // í•´ì‹œíƒœê·¸\n    if (line.length < 30 && /^[a-zA-Zê°€-í£]+$/.test(line)) {\n      if (/^(ì¼€ë°í—Œ|ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤|kpopdemonhunters|ë§ˆí…”|í•´ì¦ˆë¸Œë¡œ|í¬ë¦¬ìŠ¤ë§ˆìŠ¤|ë„·í”Œë¦­ìŠ¤|êµ¬ë…|íƒœí‰ë¡œ)$/.test(line)) {\n        return false;\n      }\n    }\n    \n    // ë„¤ë¹„ê²Œì´ì…˜\n    if (/^ê´€ë ¨\\s*ê¸°ì‚¬$/.test(line)) return false;\n    if (/^ì´ì „\\s+ë‹¤ìŒ$/.test(line)) return false;\n    if (/^ì¢‹ì•„ìš”$|^ì‘ì›ìˆ˜$/.test(line)) return false;\n    if (/^ìµœì‹ ë‰´ìŠ¤$/.test(line)) return false;\n    if (/^ë”ë³´ê¸°$/.test(line)) return false;\n    if (/^ë§ì´\\s*ë³¸\\s*ë‰´ìŠ¤$/.test(line)) return false;\n    if (/^ë‹¤ë¥¸ê¸°ì‚¬ë³´ê¸°$/.test(line)) return false;\n    if (/^ëŒì•„ê°€ê¸°$/.test(line)) return false;\n    if (/^ëŒ“ê¸€ì„\\s*ì…ë ¥í•´ì£¼ì„¸ìš”$/.test(line)) return false;\n    \n    // í‘œ/êµ¬ì¡°\n    if (/^êµ¬ë¶„\\s+ë‚´ìš©$/.test(line)) return false;\n    if (/^ì‘í’ˆëª…|^ì œì‘|^ê³µê°œ ì˜ˆì •|^ì „í¸ ê³µê°œ|^íŠ¹ì§•|^í¥í–‰|^ì—°ì¶œ|^í•µì‹¬ ì£¼ì œ|^ê¸°ëŒ€ í¬ì¸íŠ¸/.test(line)) return false;\n    \n    // ì €ì‘ê¶Œ/ì œë³´\n    if (/ì €ì‘ê¶Œì.*?Â©.*?ë¬´ë‹¨.*?ì¬ë°°í¬.*?ê¸ˆì§€/i.test(line)) return false;\n    if (/â“’.*?ë¬´ë‹¨.*?ì¬ë°°í¬.*?ê¸ˆì§€/i.test(line)) return false;\n    if (/ì œë³´í•˜ê¸°/.test(line)) return false;\n    if (/â–·/.test(line)) return false;\n    if (/^â– /.test(line)) return false;\n    if (/\\([^)]*=\\s*ì—°í•©ë‰´ìŠ¤\\)/.test(line)) return false;\n    if (/í›„ì›ê¸ˆì„ ê·€í•˜ê²Œ ì“°ê² ìŠµë‹ˆë‹¤/.test(line)) return false;\n    if (/^<\\s*ì €ì‘ê¶Œì/.test(line)) return false;\n    if (/Copyright\\s*Â©/.test(line)) return false;\n    if (/ì œë³´ëŠ”\\s*ì¹´ì¹´ì˜¤í†¡/.test(line)) return false;\n    if (/â€»\\s*ì´\\s*ì½˜í…ì¸ ëŠ”\\s*ì €ì‘ê¶Œë²•/.test(line)) return false;\n    \n    // ë¸”ë¡œê·¸/UI\n    if (/^#/.test(line)) return false;\n    if (/^ì¶œì²˜\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ì¸ì‡„$/.test(line)) return false;\n    if (/^ğŸ“¸/.test(line)) return false;\n    \n    // ì–¸ë¡ ì‚¬ êµ¬ë¶„ì\n    if (/^ë¬¸í™”ë‰´ìŠ¤\\s*\\/\\s*$/.test(line)) return false;\n    \n    // ì—°í•©ë‰´ìŠ¤ êµ¬ë¶„ì\n    if (/^\\/\\s*ì—°í•©ë‰´ìŠ¤\\s*$/.test(line)) return false;\n    \n    // ì§¤eëª½ë•… ë¦¬ìŠ¤íŠ¸ í•­ëª©\n    if (/^\\d+\\.\\s*\"/.test(line)) return false;\n    if (/^\\d+\\.\\s+[^\\n]+ë°°ìš°\\s+í‚¤ì•„ëˆ„\\s+ë¦¬ë¸ŒìŠ¤/.test(line)) return false;\n    \n    // í¬íŠ¸ë‚˜ì´íŠ¸ ë¼ì¸ í•„í„°\n    if (/í˜‘ì—…ì—\\s*ê´€í•œ\\s*ìì„¸í•œ\\s*ë‚´ìš©ì€\\s*í¬íŠ¸ë‚˜ì´íŠ¸/i.test(line)) return false;\n    \n    // ì„œìš¸ê²½ì œ ê´€ë ¨ë‰´ìŠ¤ ë¼ì¸ í•„í„°\n    if (/'ì‚¬ìƒ\\s*ì²«'.*\\[ë§ˆì¼“ì‹œê·¸ë„\\]/.test(line)) return false;\n    if (/\\d{4}ë…„\\s*\\d+ì›”\\d+ì¼\\([ê°€-í£]\\).*\\[ON\\s*AIR/.test(line)) return false;\n    if (/ì¥ë™í˜\\s*\"æì •ë¶€/.test(line)) return false;\n    \n    // ê¸°ì‚¬ì˜ ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ìë£Œ\n    if (/ê¸°ì‚¬ì˜\\s*ì´í•´ë¥¼\\s*ë•ê¸°\\s*ìœ„í•œ\\s*ìë£Œ/i.test(line)) return false;\n    \n    return true;\n  });\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 12: í›„ì²˜ë¦¬ (ê³µë°± ì •ë¦¬)\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  let txt = lines.join('\\n')\n    .replace(/https?:\\/\\/[^\\s)]+/g, '')\n    .replace(/\\n\\?[a-zA-Z0-9_=&]+/g, '')\n    .replace(/\\*\\*/g, '')\n    .replace(/\\n{3,}/g, '\\n\\n')\n    .replace(/ {2,}/g, ' ')\n    .replace(/\\[\\s*\\n/g, '\\n')\n    .replace(/\\.\\s*\\[\\s*$/gm, '.')\n    .trim();\n  \n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // STEP 13: ìµœì¢… ì •ë¦¬ (ëë¶€ë¶„ ë©”íƒ€ë°ì´í„°)\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  \n  // ê´„í˜¸ ì•ˆ ê¸°ì ì •ë³´\n  txt = txt.replace(/\\([^)]*ê¸°ì\\)\\s*/g, '');\n  \n  // ì‚¬ì§„/ì˜ìƒ/ê·¸ë˜í”½ í¬ë ˆë”§\n  txt = txt.replace(/\\n*ì‚¬ì§„\\s*[=:ï¼š]\\s*[^\\n]*ê¸°ì\\s*$/g, '');\n  txt = txt.replace(/\\n*ì˜ìƒ\\s*[=:ï¼š]\\s*[^\\n]*ê¸°ì\\s*$/g, '');\n  txt = txt.replace(/\\n*ê·¸ë˜í”½\\s*[=:ï¼š]\\s*[^\\n]*ê¸°ì\\s*$/g, '');\n  \n  // ê¸°ì ì´ë©”ì¼/ì†Œê°œ\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s]+\\s*$/g, '');\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\/\\s*ê²½ì œë¥¼ ì½ëŠ”[^\\n]*$/g, '');\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s]+(\\s+[ê°€-í£]{2,4}\\s*ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s]+)*\\s*$/g, '');\n  \n  // ê¸°ì ë¹ˆ ê´„í˜¸\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\(\\s*\\)\\s*$/g, '');\n  txt = txt.replace(/[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\(\\s*\\)/g, '');\n  \n  // ë°©ì†¡ ì–¸ë¡ ì‚¬\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ë¨¸ë‹ˆíˆ¬ë°ì´ë°©ì†¡\\s*MTN\\s*ê¸°ì\\s*$/g, '');\n  \n  // MBNë‰´ìŠ¤ íŒ¨í„´\n  txt = txt.replace(/\\n*MBNë‰´ìŠ¤\\s+[ê°€-í£]{2,4}ì…ë‹ˆë‹¤\\.\\s*\\[\\s*\\]\\s*$/g, '');\n  txt = txt.replace(/MBNë‰´ìŠ¤\\s+[ê°€-í£]{2,4}ì…ë‹ˆë‹¤\\.\\s*\\[\\s*\\]/g, '');\n  \n  // KBS ë‰´ìŠ¤ íŒ¨í„´\n  txt = txt.replace(/\\n*KBS\\s*ë‰´ìŠ¤\\s*[ê°€-í£]{2,4}ì…ë‹ˆë‹¤\\.\\s*$/g, '');\n  txt = txt.replace(/\\nKBS\\s*ë‰´ìŠ¤\\s*[ê°€-í£]{2,4}ì…ë‹ˆë‹¤\\.$/g, '');\n  txt = txt.replace(/KBS\\s*ë‰´ìŠ¤\\s*[ê°€-í£]{2,4}ì…ë‹ˆë‹¤\\.\\s*$/g, '');\n\n  // YTN ê¸°ì ì´ë¦„\n  txt = txt.replace(/\\nì§€ê¸ˆê¹Œì§€\\s+YTN[^\\n]*ì—ì„œ\\s+YTN\\s+[ê°€-í£]{2,4}ì…ë‹ˆë‹¤\\.\\s*\\nYTN\\s+[ê°€-í£]{2,4}\\s*\\(\\s*\\)\\s*\\n\\[ì €ì‘ê¶Œì\\([cC]\\)\\s*YTN[^\\]]*\\]\\s*$/g, '');\n  txt = txt.replace(/\\n*YTN\\s+[ê°€-í£]{2,4}\\s*\\(\\s*\\)\\s*$/g, '');\n  txt = txt.replace(/YTN\\s+[ê°€-í£]{2,4}\\s*\\(\\s*\\)\\s*$/g, '');\n  txt = txt.replace(/\\n\\[ì €ì‘ê¶Œì\\([cC]\\)\\s*YTN[^\\]]*\\]\\s*$/g, '');\n  \n  // ì§¤eëª½ë•… í‘¸í„° ë§ˆì§€ë§‰ ì²˜ë¦¬\n  txt = txt.replace(/\\.\\s*\\[ë°•ì„¤ì•„\\s*ë””ì§€í„¸ë‰´ìŠ¤ë¶€\\s*ì¸í„´ê¸°ì\\s*\\]/gi, '.');\n  txt = txt.replace(/\\[[ê°€-í£]+\\s*ë””ì§€í„¸ë‰´ìŠ¤ë¶€\\s*ì¸í„´ê¸°ì\\s*\\]/gi, '');\n  \n  // ëë¶€ë¶„ ê¸°ì/íŠ¹íŒŒì› ì´ë¦„\n  txt = txt.replace(/\\n+[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\n[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '');\n  txt = txt.replace(/[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\.\\s*\\n+[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '.');\n  txt = txt.replace(/\\n+[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\n[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '');\n  txt = txt.replace(/[ê°€-í£]{2,4}\\s*(ê¸°ì|íŠ¹íŒŒì›)(\\s|\\n)*$/g, '');\n  \n  // í•œêµ­ê²½ì œ êµ¬ë… ì•ˆë‚´\n  txt = txt.replace(/\\n(ì‹«ì–´ìš”|í›„ì†ê¸°ì‚¬ ì›í•´ìš”)(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\ní•œêµ­ê²½ì œ êµ¬ë…ì‹ ì²­(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\nëª¨ë°”ì¼í•œê²½ ë³´ê¸°(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\nê·€ ê¸°ìš¸ì—¬ ë“£ê² ìŠµë‹ˆë‹¤\\.(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\nì§€ë©´\\s*A\\d+(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\nê¸€ìí¬ê¸° ì¡°ì ˆ(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\nê¸°ì‚¬ ìŠ¤í¬ë©(\\s|\\n)*$/g, '');\n  txt = txt.replace(/\\ní´ë¦°ë·°(\\s|\\n)*$/g, '');\n  \n  txt = txt.trim();\n\n  return txt;\n}\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// ë©”ì¸ ì²˜ë¦¬ ë¡œì§\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nreturn items.map(item => {\n  const data = item.json;\n  \n  if (data.success === true && data.content) {\n    const cleanedContent = cleanNewsBody(data.content);\n    return {\n      json: {\n        success: data.success,\n        url: data.url,\n        content: cleanedContent,\n        content_length: cleanedContent.length,\n        extraction_method: data.extraction_method\n      }\n    };\n  }\n  \n  return { json: data };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        368,
        -160
      ],
      "id": "b3b5473e-2dd3-4198-b6d0-a20480ac893c",
      "name": "FastAPI Cleaning"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nfunction cleanNewsBody(rawContent) {\n  if (!rawContent) return rawContent;\n  if (typeof rawContent !== 'string') return rawContent;\n  if (rawContent.length < 50) return rawContent;\n\n  // Firewall ì°¨ë‹¨ ë©”ì‹œì§€ ê°ì§€\n  if (/The request.*?contrary to the Web firewall|Hold tight|secure connection|security service|protect.*?online attack|ì ì‹œë§Œ ê¸°ë‹¤ë ¤|ë³´ì•ˆ ê²€ì‚¬|CAPTCHA|ì„œë²„ ì ‘ì†.*?ë³´ì•ˆ/i.test(rawContent)) {return '';}\n\n  // ì¸ë¼ì¸ íŒ¨í„´ ì¹˜í™˜\n  rawContent = rawContent.replace(/ì…ë ¥\\s*\\d{4}\\.\\d{2}\\.\\d{2}\\.\\s*\\d{2}:\\d{2}/g, '');\n  rawContent = rawContent.replace(/ì—…ë°ì´íŠ¸\\s*\\d{4}\\.\\d{2}\\.\\d{2}\\.\\s*\\d{2}:\\d{2}/g, '');\n  rawContent = rawContent.replace(/\\[By Taboola\\][^\\n]*/g, '');\n  rawContent = rawContent.replace(/\\[AD\\][^\\n]*/g, '');\n  \n  // ë§¥ìŠ¤ë¬´ë¹„ UI íŒ¨í„´ ì œê±°\n  rawContent = rawContent.replace(/\\n\\d+ë¶„\\s*ì´ë‚´\\n/g, '\\n');\n  rawContent = rawContent.replace(/\\nê¸€ì\\s*í¬ê¸°\\s*ë³€ê²½\\n/g, '\\n');\n  rawContent = rawContent.replace(/\\nì´\\s*ê¸°ì‚¬ë¥¼\\s*ì¶”ì²œí•©ë‹ˆë‹¤\\.?\\n/g, '\\n');\n  \n  // í•œêµ­ê²½ì œ UI íŒ¨í„´ ì œê±°\n  rawContent = rawContent.replace(/^[ê°€-í£]+\\nì…ë ¥\\nìˆ˜ì •\\nì§€ë©´\\n[A-Z]\\d+\\n[^\\n]*\\n[^\\n]*\\n[^\\n]*\\n[^\\n]*\\n[^\\n]*\\n[^\\n]*\\n[^\\n]*\\n[^\\n]*\\n/gm, '');\n  rawContent = rawContent.replace(/\\nì‹«ì–´ìš”\\ní›„ì†ê¸°ì‚¬ ì›í•´ìš”\\ní•œêµ­ê²½ì œ êµ¬ë…ì‹ ì²­\\nëª¨ë°”ì¼í•œê²½ ë³´ê¸°\\nê·€ ê¸°ìš¸ì—¬ ë“£ê² ìŠµë‹ˆë‹¤\\.\\s*$/g, '');\n  \n  // ì œëª©ì—ì„œ ë§¤ì²´ëª… ì œê±°\n  rawContent = rawContent.replace(/\\s+ì±„ë„A\\s*ë‰´ìŠ¤\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\s+MBC\\s*ë‰´ìŠ¤\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\s+KBS\\s*ë‰´ìŠ¤\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\s+SBS\\s*ë‰´ìŠ¤\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\s+YTN\\s*$/gm, '');\n\n  // ë¸”ë¡œê·¸ í—¤ë” í†µì§¸ë¡œ ì œê±°\n  const isBlog = /ë£¨ë¹µë£¨ë‚˜|URL ë³µì‚¬|ë³¸ë¬¸ ê¸°íƒ€ ê¸°ëŠ¥/.test(rawContent);\n  const hasSharePattern = /ê³µìœ í•˜ê¸°\\s*ì‹ ê³ í•˜ê¸°/.test(rawContent);\n  \n  if (isBlog && hasSharePattern) {\n    const shareIndex = rawContent.search(/ê³µìœ í•˜ê¸°\\s*ì‹ ê³ í•˜ê¸°/);\n    if (shareIndex > 0 && shareIndex < rawContent.length * 0.3) {\n      rawContent = rawContent.replace(/^[\\s\\S]*?ê³µìœ í•˜ê¸°\\s*ì‹ ê³ í•˜ê¸°\\s*/, '');\n    }\n  }\n\n  // ê¸°ì ì •ë³´ ì¸ë¼ì¸ ì œê±°\n  rawContent = rawContent.replace(/\\([\\sê°€-í£]*=\\s*ì—°í•©ë‰´ìŠ¤\\)\\s*[ê°€-í£\\s]+ê¸°ì\\s*[=]*\\s*/g, '');\n  rawContent = rawContent.replace(/\\([^)]*=\\s*[^)]+\\)\\s*[ê°€-í£\\s]+ê¸°ì\\s*[=]*\\s*/g, '');\n  rawContent = rawContent.replace(/[ê°€-í£]+ê¸°ì\\s+êµ¬ë…\\s+êµ¬ë…ì¤‘/g, '');\n  rawContent = rawContent.replace(/\\[[^\\]]*ê¸°ì\\]/g, '');\n  rawContent = rawContent.replace(/\\[[^\\]]*AI\\s*ë¦¬í¬í„°\\]/g, '');\n  rawContent = rawContent.replace(/\\n[ê°€-í£]{2,4}\\s*\\nê¸°ì\\s*[\\/]?\\s*\\n/gm, '\\n');\n  \n  // ë‰´ì‹œìŠ¤ ìŠ¤íƒ€ì¼ ê¸°ì ì •ë³´ ì œê±°\n  rawContent = rawContent.replace(/\\[[^\\]]+=[^\\]]+\\][ê°€-í£\\s]+ê¸°ì\\s*=\\s*/g, '');\n  rawContent = rawContent.replace(/\\[[^\\]]+=[^\\]]+\\]\\s*[^\\n]+\\n/g, '');\n  rawContent = rawContent.replace(/â—ê³µê°ì–¸ë¡ \\s*ë‰´ì‹œìŠ¤/g, '');\n  \n  // ì–¸ë¡ ì‚¬ëª…/í”„ë¡œê·¸ë¨ëª… ë‹¨ë… ë¼ì¸\n  rawContent = rawContent.replace(/\\nOSEN\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\nOSEN\\s+DB\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\nì•„ì¹¨&\\s*ì†Œì…œí”½\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\n[ê°€-í£]{2,4}\\s+ì•µì»¤\\s*$/gm, '');\n  rawContent = rawContent.replace(/\\nì—”í„°í”Œë ˆì´\\s*$/gm, '');\n  \n  // iMBCì—°ì˜ˆ íŒ¨í„´\n  rawContent = rawContent.replace(/iMBCì—°ì˜ˆ\\s+[ê°€-í£]{2,4}\\s*\\|\\s*ì‚¬ì§„ì¶œì²˜[^\\n]*/g, '');\n  rawContent = rawContent.replace(/iMBCì—°ì˜ˆ\\s+[ê°€-í£]{2,4}\\s+ì‚¬ì§„ì¶œì²˜[^\\n]*/g, '');\n  rawContent = rawContent.replace(/\\niMBCì—°ì˜ˆ\\s+[ê°€-í£]{2,4}\\s+ì‚¬ì§„ì¶œì²˜[^\\n]*/g, '');\n  rawContent = rawContent.replace(/iMBCì—°ì˜ˆ\\s+[ê°€-í£]{2,4}/g, '');\n  \n  // íŠ¹íŒŒì›/ê¸°ì íŒ¨í„´ ì œê±°\n  rawContent = rawContent.replace(/^[ê°€-í£]+\\s*[=ï¼]\\s*[ê°€-í£\\s]+\\s*(íŠ¹íŒŒì›|ê¸°ì)\\s*\\n/gm, '');\n  \n  // ë³´ê·¸ ì½”ë¦¬ì•„ ì „ìš© íŒ¨í„´\n  rawContent = rawContent.replace(/^[\\*\\s]+$/gm, '');\n  rawContent = rawContent.replace(/^\\(\\)\\s*$/gm, '');\n  rawContent = rawContent.replace(/^korea\\s*$/gm, '');\n  rawContent = rawContent.replace(/^(ìµœì‹ ê¸°ì‚¬|ì¶”ì²œê¸°ì‚¬|ì¸ê¸°ê¸°ì‚¬|ë” ë³¼ë§Œí•œ ê¸°ì‚¬)\\s*$/gm, '');\n  rawContent = rawContent.replace(/^ì§€ê¸ˆ ì¸ê¸° ìˆëŠ” ë·°í‹° ê¸°ì‚¬\\s*$/gm, '');\n  rawContent = rawContent.replace(/^ì§€ê¸ˆ, ë³´ê·¸ê°€ ì£¼ëª©í•˜ëŠ” ì¸ë¬¼\\s*$/gm, '');\n  rawContent = rawContent.replace(/^PEOPLE NOW\\s*$/gm, '');\n  rawContent = rawContent.replace(/^[^\\n]*\\(Vogue Korea\\)\\n\\(\\)\\n(\\*\\s*\\n)+/gm, '');\n  rawContent = rawContent.replace(/^ë³´ê·¸ ì½”ë¦¬ì•„[^\\n]*\\n\\(\\)\\n(\\*\\s*\\n)+/gm, '');\n  rawContent = rawContent.replace(/^([^\\n]{10,})\\n\\*\\s*\\n\\1\\n/gm, '$1\\n');\n  rawContent = rawContent.replace(/\\n\\*\\s+(ë³µì‚¬|ê³µìœ |top)\\s*\\n/g, '\\n');\n  rawContent = rawContent.replace(/^(ë³µì‚¬|ê³µìœ )\\s*$/gm, '');\n  rawContent = rawContent.replace(/^SNS ê³µìœ í•˜ê¸°\\s*$/gm, '');\n  rawContent = rawContent.replace(/^VOGUE\\.CO\\.KR IS OPERATED BY\\s*$/gm, '');\n  rawContent = rawContent.replace(/^top\\s*$/gm, '');\n  rawContent = rawContent.replace(/ë³´ê·¸ ì½”ë¦¬ì•„\\s*\\(Vogue Korea\\)[^\\n]*\\n\\(\\)\\n(\\*\\s*\\n)+[^\\n]+\\n\\*\\s*\\n[^\\n]+\\n\\*\\s*ë³µì‚¬\\n\\*\\s*ê³µìœ \\n/g, '');\n  \n  // ë³´ê·¸ ì´ë¯¸ì§€ ë§ˆí¬ë‹¤ìš´ ì œê±°\n  rawContent = rawContent.replace(/!\\[Image \\d+:?\\]\\([^\\)]+\\)/g, '');\n  rawContent = rawContent.replace(/\\[!\\[Image \\d+:?[^\\]]*\\]\\([^\\)]*\\)\\]\\([^\\)]*\\)/g, '');\n  rawContent = rawContent.replace(/\\n\\*\\s*ê³µìœ \\s*\\n/g, '\\n');\n  rawContent = rawContent.replace(/\\n\\*\\s*ë³µì‚¬\\s*\\n/g, '\\n');\n  rawContent = rawContent.replace(/\\n\\*\\s*top\\s*\\n/g, '\\n')\n  \n  // ì‚¬ì§„/ì˜ìƒ í¬ë ˆë”§ ì œê±°\n  rawContent = rawContent.replace(/\\/ì‚¬ì§„\\s*=\\s*[ê°€-í£]+\\s*ê¸°ì/g, '');\n  rawContent = rawContent.replace(/\\/\\s*ì‚¬ì§„\\s*ì œê³µ\\s*=\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/[â–²â–¼][^\\n]*(?:\\/ì‚¬ì§„=|Â©)[^\\n]*/g, '');\n  rawContent = rawContent.replace(/[â–²â–¼]\\s*ì‚¬ì§„\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/[â–²â–¼]\\s*ì¶œì²˜\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/ì‚¬ì§„\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/ì‚¬ì§„ì œê³µ\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/ì‚¬ì§„ì¶œì²˜\\s*[:ï¼š=]\\s*[^\\n]+/g, '');\n  rawContent = rawContent.replace(/\\n?\\[í™”ë©´ì¶œì²˜\\s+[^\\]]+\\]/g, '');\n\n  // ë°©ì†¡ ëŒ€ë³¸ ë§ˆì»¤ ì œê±°\n  rawContent = rawContent.replace(/â—€\\s*(ì•µì»¤|ë¦¬í¬íŠ¸|ê¸°ì|ì¸í„°ë·°)\\s*â–¶/g, '\\n');\n  rawContent = rawContent.replace(/\\[[^\\]]+\\/[^\\]]+\\s*\\([^)]+\\)\\]/g, '');\n\n  // ë¯¸ë””ì–´ ë©”íƒ€ ì •ë³´ ì œê±°\n  rawContent = rawContent.replace(/\\[ì‚¬ì§„[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ì˜ìƒ[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ì´ë¯¸ì§€[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ë™ì˜ìƒ[^\\]]*\\]/g, '');\n  rawContent = rawContent.replace(/\\[ê·¸ë˜í”½[^\\]]*\\]/g, '');\n\n  // ì˜ìƒ/ì œë³´ ì •ë³´ ì œê±°\n  rawContent = rawContent.replace(/ì˜ìƒì·¨ì¬\\s*[:ï¼š][^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/ì˜ìƒí¸ì§‘\\s*[:ï¼š]?[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/\\nì˜ìƒí¸ì§‘\\s+[ê°€-í£]{2,4}\\s*$/gm, '');\n  rawContent = rawContent.replace(/ì˜ìƒì œê³µ\\s*[:ï¼š][^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/MBCë‰´ìŠ¤\\s+[ê°€-í£]+ì…ë‹ˆë‹¤\\./g, '');\n  rawContent = rawContent.replace(/â–·\\s*ì „í™”[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/â–·\\s*ì´ë©”ì¼[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/â–·\\s*ì¹´ì¹´ì˜¤í†¡[^\\nâ–·]*/g, '');\n  rawContent = rawContent.replace(/â– \\s*ì œë³´í•˜ê¸°/g, '');\n\n  // ê¸°íƒ€ ë…¸ì´ì¦ˆ\n  rawContent = rawContent.replace(/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g, '');\n  rawContent = rawContent.replace(/ì´ì „\\s+ë‹¤ìŒ/g, '');\n  rawContent = rawContent.replace(/ì¢‹ì•„ìš”\\s*ì‘ì›ìˆ˜/g, '');\n  rawContent = rawContent.replace(/Fníˆ¬ë°ì´ëŠ” ì—¬ëŸ¬ë¶„ì˜ í›„ì›ê¸ˆì„ ê·€í•˜ê²Œ ì“°ê² ìŠµë‹ˆë‹¤\\./g, '');\n\n  let lines = rawContent.split('\\n').map(line => line.trim());\n\n  // ëì  ì°¾ê¸° - íŠ¹ì • íŒ¨í„´ ì´í›„ ëª¨ë‘ ì œê±°\n  const endPatterns = [\n    /^ë§ì´\\s*ë³¸\\s*ê¸°ì‚¬$/,\n    /^ë§ì´\\s*ë³¸\\s*ë‰´ìŠ¤$/,\n    /^ë‹¤ë¥¸\\s*ê¸°ì‚¬\\s*ë³´ê¸°$/,\n    /^ê´€ë ¨ê¸°ì‚¬$/,\n    /^ìµœì‹ ê¸°ì‚¬$/,\n    /^ì¶”ì²œê¸°ì‚¬$/,\n    /^ê´€ë ¨\\s*í‚¤ì›Œë“œ$/,\n    /^ì£¼ìš”\\s*ê¸°ì‚¬$/,\n    /^iMBCì—°ì˜ˆ\\s*[ê°€-í£]+$/,\n  ];\n  \n  for (const pattern of endPatterns) {\n    const endIdx = lines.findIndex(line => pattern.test(line));\n    if (endIdx >= 0) {\n      lines = lines.slice(0, endIdx);\n      break;\n    }\n  }\n\n  // === â–² ë§ˆì»¤ íŒ¨í„´ ê°ì§€ ë° ì œê±° ===\n  const triangleIndices = lines.map((line, idx) => line === 'â–²' ? idx : -1).filter(i => i >= 0);\n  if (triangleIndices.length >= 3) {\n    const firstTriangle = triangleIndices[0];\n    if (firstTriangle > 0) {\n      lines = lines.slice(0, firstTriangle);\n    }\n  }\n  \n  // ë¼ì¸ í•„í„°ë§\n  lines = lines.filter(line => {\n    if (!line || line.length < 2) return false;\n    if (line === '.' || line === '=') return false;\n    \n    // === ìŠ¤í¬ì¸ ì¡°ì„ /ì¡°ì„ ì¼ë³´ ê´€ë ¨ ê¸°ì‚¬ ===\n    if (line.length < 100 && /ì´í˜¼|ì‚¬ë§|ìˆ¨ì§„|ë…¼ë€|í­ë°œ|ì €ê²©|ì¶©ê²©|ë°œê²¬|ì„ì‹ |ì¶œì‚°|ê¹œì§|ê°•íƒˆ|ì•„ì°”|ì„¹ì‹œ|ì˜†íƒœ|ë³¼ë¥¨ê°|ì‹œì„ ê°•íƒˆ|ë›°ì³ë‚˜ì™€|í­í’ì„±ì¥|ë”°ê·€/.test(line)) return false;\n    if (/^pickcon=/.test(line)) return false;\n    if (/^[ê°€-í£]{2,4}\\s+[ê°€-í£]+ë‹·ì»´\\s+(ê°ì›)?ê¸°ì$/.test(line)) return false;\n    \n    // === í•œêµ­ê²½ì œ UI ===\n    if (/^ì…ë ¥$|^ìˆ˜ì •$/.test(line)) return false;\n    if (/^ì§€ë©´$/.test(line)) return false;\n    if (/^A\\d+$/.test(line)) return false;\n    if (/^ê¸€ìí¬ê¸°\\s*ì¡°ì ˆ$/.test(line)) return false;\n    if (/^ê¸°ì‚¬\\s*ìŠ¤í¬ë©$/.test(line)) return false;\n    if (/^ëŒ“ê¸€$/.test(line)) return false;\n    if (/^í´ë¦°ë·°$/.test(line)) return false;\n    if (/^í”„ë¦°íŠ¸$/.test(line)) return false;\n    if (/^ì‹«ì–´ìš”$/.test(line)) return false;\n    if (/^í›„ì†ê¸°ì‚¬\\s*ì›í•´ìš”$/.test(line)) return false;\n    if (/^í•œêµ­ê²½ì œ\\s*êµ¬ë…ì‹ ì²­$/.test(line)) return false;\n    if (/^ëª¨ë°”ì¼í•œê²½\\s*ë³´ê¸°$/.test(line)) return false;\n    if (/^ê·€\\s*ê¸°ìš¸ì—¬\\s*ë“£ê² ìŠµë‹ˆë‹¤\\.$/.test(line)) return false;\n    \n    // === ë³´ê·¸ ì½”ë¦¬ì•„ ===\n    if (/^\\*+\\s*$/.test(line)) return false;\n    if (/^\\(\\)\\s*$/.test(line)) return false;\n    if (/^korea$/.test(line)) return false;\n    if (/^Vogue Korea$/.test(line)) return false;\n    if (/^(ìµœì‹ |ì¶”ì²œ|ì¸ê¸°)ê¸°ì‚¬$/.test(line)) return false;\n    if (/^ë” ë³¼ë§Œí•œ ê¸°ì‚¬$/.test(line)) return false;\n    if (/^ì§€ê¸ˆ ì¸ê¸° ìˆëŠ” ë·°í‹° ê¸°ì‚¬$/.test(line)) return false;\n    if (/^ì§€ê¸ˆ, ë³´ê·¸ê°€ ì£¼ëª©í•˜ëŠ” ì¸ë¬¼$/.test(line)) return false;\n    if (/^PEOPLE NOW$/.test(line)) return false;\n    if (/^(ë³µì‚¬|ê³µìœ |top)$/.test(line)) return false;\n    if (/^SNS ê³µìœ í•˜ê¸°$/.test(line)) return false;\n    if (/^VOGUE\\.CO\\.KR IS OPERATED BY$/.test(line)) return false;\n    if (/^í¬í† \\s+Netflix$/.test(line)) return false;\n    if (/^ê´€ë ¨ê¸°ì‚¬$/.test(line)) return false;\n    if (/^\\d{4}\\.\\d{2}\\.\\d{2}$/.test(line)) return false;\n    if (/^Image \\d+:/.test(line)) return false;\n    if (/^\\[Image \\d+/.test(line)) return false;\n    if (/^!\\[Image/.test(line)) return false;\n    \n    // === TJB ëŒ€ì „ë°©ì†¡ ===\n    if (/^ê¸°ìë³„\\s*ë‰´ìŠ¤$/.test(line)) return false;\n    if (/^NEWS$/.test(line)) return false;\n    if (/^í™”ë©´\\s*í”„ë¦°íŠ¸$/.test(line)) return false;\n    if (/^TJB\\s*(ëŒ€ì „)?ë°©ì†¡$/.test(line)) return false;\n    if (/ì‹œì²­ìë“¤ì˜ ìƒê°ê³¼ ëŠë‚Œì„ ë‹´ì€/.test(line)) return false;\n    if (/ë”ìš± ê³µì •í•˜ê³  ì‹ ë¢°ë°›ëŠ” ë°©ì†¡ì´/.test(line)) return false;\n    if (/^ì „ì²´ê²€ìƒ‰/.test(line)) return false;\n    if (/^ì—´ê¸°$/.test(line)) return false;\n    if (/^\\(ì‚¬ì§„=ì—°í•©ë‰´ìŠ¤\\)$/.test(line)) return false;\n    \n    // === ì±„ë„A ===\n    if (/^\\[ì±„ë„A\\s*ë‰´ìŠ¤\\]\\s*êµ¬ë…í•˜ê¸°$/.test(line)) return false;\n    if (/ì±„ë„A\\s*ë‰´ìŠ¤/.test(line)) return false;\n    if (/^\\[â€¢\\s*[ê°€-í£]+\\s*ê¸°ì/.test(line)) return false;\n    if (/^â€¢\\s*\\[ì±„ë„A/.test(line)) return false;\n    if (/êµ¬ë…í•˜ê¸°$/.test(line)) return false;\n\n    // === ì¡°ì„ ì¼ë³´ ===\n    if (/ì¡°ì„ ì¼ë³´\\s*(êµ­ì œë¶€|ê²½ì œë¶€|ì •ì¹˜ë¶€|ì‚¬íšŒë¶€)ê°€\\s*í”½í•œ/i.test(line)) return false;\n    if (/ì›ìƒ·\\s*êµ­ì œë‰´ìŠ¤\\s*ë”\\s*ë³´ê¸°/i.test(line)) return false;\n    if (/^(Cancel|live|CC|1x|2x|Speed|Subtitles)$/.test(line)) return false;\n    if (/^\\d{2}:\\d{2}$/.test(line)) return false;\n    if (/^\\d{6}\\s+ì—¬ë¡ \\d+/.test(line)) return false;\n    if (/ë§¤ì¼\\s*ì¡°ì„ ì¼ë³´ì—\\s*ì‹¤ë¦°\\s*ì¹¼ëŸ¼/.test(line)) return false;\n    if (/ë‰´ìŠ¤ë ˆí„°ë¥¼\\s*ë°›ì•„ë³´ì„¸ìš”/.test(line)) return false;\n    if (/I\\s+Can't\\s+Go\\s+On,?\\s+I'll\\s+Go\\s+On/.test(line)) return false;\n    if (/'5ë¶„\\s*ì¹¼ëŸ¼'\\s*ë”ë³´ê¸°/.test(line)) return false;\n    if (/\\(ì‚¬ë¬´ì—˜\\s*ë² ì¼“\\)/.test(line)) return false;\n    if (/^#[ê°€-í£a-zA-Z0-9\\s-]+$/.test(line)) return false;\n    if (/^êµ¬ë…ìˆ˜$/.test(line)) return false;\n    if (/^êµ¬ë…$/.test(line)) return false;\n    if (/^\\d{1,5}$/.test(line)) return false;\n    if (/^\\d{1,5}[,]\\d{1,3}$/.test(line)) return false;\n\n    // === ì–¸ë¡ ì‚¬ëª…/í¬ë ˆë”§ ===\n    if (/^OSEN$/.test(line)) return false;\n    if (/^OSEN\\s+DB$/.test(line)) return false;\n    if (/^ì—”í„°í”Œë ˆì´$/.test(line)) return false;\n    if (/^ìŠ¤í¬ì¸ ì¡°ì„ $/.test(line)) return false;\n\n    // === í”„ë¡œê·¸ë¨/ì•µì»¤ ===\n    if (/^ì•„ì¹¨&\\s*ì†Œì…œí”½$/.test(line)) return false;\n    if (/^[ê°€-í£]{2,4}\\s+ì•µì»¤$/.test(line)) return false;\n\n    // === ë§í¬ íŒ¨í„´ ===\n    if (/^\\(\\/author\\/\\d+\\)$/.test(line)) return false;\n\n    // === ë„¤ë¹„ê²Œì´ì…˜ ë¸”ë¡ ===\n    if (/^ê´€ë ¨\\s*í‚¤ì›Œë“œ$/.test(line)) return false;\n    if (/^ì£¼ìš”\\s*ê¸°ì‚¬$/.test(line)) return false;\n\n    // === ë‰´ìŠ¤1 í‘¸í„° ì •ë³´ ===\n    if (/^ëŒ€í‘œì´ì‚¬\\/ë°œí–‰ì¸\\s*[:ï¼š]/.test(line)) return false;\n    if (/^í¸ì§‘ì¸\\s*[:ï¼š]/.test(line)) return false;\n    if (/^í¸ì§‘êµ­ì¥\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ì£¼ì†Œ\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ê³ ì¶©ì²˜ë¦¬ì¸\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ì²­ì†Œë…„ë³´í˜¸ì±…ì„ì\\s*[:ï¼š]/.test(line)) return false;\n    if (/^í†µì‹ íŒë§¤ì—…ì‹ ê³ \\s*[:ï¼š]/.test(line)) return false;\n    if (/^ë“±ë¡ì¼\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ì œí˜¸\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ëŒ€í‘œ\\s*ì „í™”\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ëŒ€í‘œ\\s*ì´ë©”ì¼\\s*[:ï¼š]/.test(line)) return false;\n    if (/ë‰´ìŠ¤1ì½”ë¦¬ì•„\\(ì½ê¸°:/.test(line)) return false;\n    if (/^Copyright\\s*â“’\\s*ë‰´ìŠ¤1\\./i.test(line)) return false;\n    if (/ë¬´ë‹¨\\s*ì‚¬ìš©\\s*ë°\\s*ì¬ë°°í¬.*?ê¸ˆì§€/i.test(line)) return false;\n    \n    // === ì¡°ì„ ì¼ë³´ í•´ì‹œíƒœê·¸ ë‹¨ì–´ ===\n    if (/^[a-zA-Zê°€-í£\\s-]+$/.test(line)) {\n      if (/^(ì¼€ë°í—Œ|ì¼€ì´íŒ\\s*ë°ëª¬\\s*í—Œí„°ìŠ¤|kpopdemonhunters|ë§ˆí…”|í•´ì¦ˆë¸Œë¡œ|í¬ë¦¬ìŠ¤ë§ˆìŠ¤|ë„·í”Œë¦­ìŠ¤|íƒœí‰ë¡œ|K-ì»¬ì²˜|KíŒ|ì§í‰|Golden|KATSEYE|íŠ¸ì™€ì´ìŠ¤|Strategy|ë£¨ë¯¸|ë¯¸ë¼|ì¡°ì´|í—ŒíŠ¸ë¦­ìŠ¤|ì œë„ˆëŸ´\\s*í•„ì¦ˆ|ê·¸ë˜ë¯¸|ì•„íŒŒíŠ¸|ë¡œì œ|ìº£ì¸ ì•„ì´|ê³¨ë“ |ë¸Œë£¨ë…¸\\s*ë§ˆìŠ¤|ì°°ìŠ¤\\d+ì„¸|ì‚¬ìë³´ì´ì¦ˆ|ì´ì¤‘ì •ì²´ì„±|ì˜¤ë“œë¦¬\\s*ëˆ„ë‚˜|ë ˆì´\\s*ì•„ë¯¸|ê¹€ì¢…ì€)$/i.test(line)) {\n        return false;\n      }\n    }\n    \n    // === ë‚ ì§œ/ì‹œê°„ ë©”íƒ€ ì •ë³´ ===\n    if (/^\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}\\s+[ê°€-í£]+$/.test(line)) return false;\n    if (/^\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}$/.test(line)) return false;\n    if (/^\\d{4}\\.\\d{2}\\.\\d{2}\\s+\\d{2}:\\d{2}$/.test(line)) return false;\n    if (/ì…ë ¥\\s*\\d{4}\\.\\d{2}\\.\\d{2}/.test(line)) return false;\n    if (/ìˆ˜ì •\\s*\\d{4}\\.\\d{2}\\.\\d{2}/.test(line)) return false;\n    if (/ì—…ë°ì´íŠ¸\\s*\\d{4}\\.\\d{2}\\.\\d{2}/.test(line)) return false;\n    \n    // === ë„¤ë¹„ê²Œì´ì…˜ ===\n    if (/^ìµœì‹ ë‰´ìŠ¤$/.test(line)) return false;\n    if (/^ë”ë³´ê¸°$/.test(line)) return false;\n    if (/^ë‹¤ë¥¸ê¸°ì‚¬ë³´ê¸°$/.test(line)) return false;\n    if (/^ëŒì•„ê°€ê¸°$/.test(line)) return false;\n    if (/^ê´€ë ¨\\s*ê¸°ì‚¬$/.test(line)) return false;\n    \n    // === UI ì›Œë”© ===\n    if (/ë°”ë¡œê°€ê¸°|ë³µì‚¬í•˜ê¸°|ë³¸ë¬¸ ê¸€ì”¨/.test(line)) return false;\n    if (/^ì „ì²´ì¬ìƒ$/.test(line)) return false;\n    if (/^ì´ì „\\s+ë‹¤ìŒ$/.test(line)) return false;\n    if (/^ì¢‹ì•„ìš”$|^ì‘ì›ìˆ˜$/.test(line)) return false;\n    if (/^ë™ì˜ìƒ\\s*ê³ ì •/.test(line)) return false;\n    if (/^ì¬ìƒ$|^ì¼ì‹œì •ì§€$|^ìŒì†Œê±°$/.test(line)) return false;\n    if (/^í˜„ì¬ìœ„ì¹˜$/.test(line)) return false;\n    if (/^ì¸ì‡„$/.test(line)) return false;\n    \n    // === ë§ˆí¬ë‹¤ìš´ í—¤ë” ===\n    if (/^#{1,6}\\s/.test(line)) return false;\n    \n    // === ê¸°ì‚¬ í—¤ë” ===\n    if (/^<\\s*[ê°€-í£]+\\s*<\\s*ê¸°ì‚¬ë³¸ë¬¸\\s*-/.test(line)) return false;\n    if (/^ê¸°ì‚¬ê²€ìƒ‰\\s*_ê²€ìƒ‰_$/.test(line)) return false;\n    \n    // === SNS ê³µìœ  ===\n    if (/SNS ê¸°ì‚¬ë³´ë‚´ê¸°/.test(line)) return false;\n    if (/í˜ì´ìŠ¤ë¶\\(ìœ¼\\)ë¡œ ê¸°ì‚¬ë³´ë‚´ê¸°/.test(line)) return false;\n    if (/íŠ¸ìœ„í„°\\(ìœ¼\\)ë¡œ ê¸°ì‚¬ë³´ë‚´ê¸°/.test(line)) return false;\n    if (/ì¹´ì¹´ì˜¤ìŠ¤í† ë¦¬\\(ìœ¼\\)ë¡œ ê¸°ì‚¬ë³´ë‚´ê¸°/.test(line)) return false;\n    if (/URLë³µì‚¬\\(ìœ¼\\)ë¡œ ê¸°ì‚¬ë³´ë‚´ê¸°/.test(line)) return false;\n    if (/ë‹¤ë¥¸ ê³µìœ  ì°¾ê¸°|ê¸°ì‚¬ìŠ¤í¬ë©í•˜ê¸°/.test(line)) return false;\n    \n    // === ì˜ì—­ í‘œì‹œ ===\n    if (/^ìƒë‹¨ì˜ì—­$/.test(line)) return false;\n    if (/^ë³¸ë¬¸ì˜ì—­$/.test(line)) return false;\n    if (/^í•˜ë‹¨ì˜ì—­$/.test(line)) return false;\n    if (/^ì „ì²´ê¸°ì‚¬$/.test(line)) return false;\n    \n    // === ë¡œê·¸ì¸/íšŒì› ===\n    if (/^ë¡œê·¸ì¸$|^íšŒì›ê°€ì…$|^ëª¨ë°”ì¼ì›¹$/.test(line)) return false;\n    \n    // === ê´‘ê³ /ì¶”ì²œ ì½˜í…ì¸  ===\n    if (/By Taboola|Sponsored|Learn More/.test(line)) return false;\n    if (/ë‹¹ì‹ ì´ ì¢‹ì•„í• |ì§€ê¸ˆ ëœ¨ëŠ”|ê³„ì† ì½ì–´ë³´ì„¸ìš”/.test(line)) return false;\n    \n    // === ê¸°ì ì •ë³´ ===\n    if (line.length < 50) {\n      if (/^ê¸°ì\\s*[\\/]?\\s*$/.test(line)) return false;\n      if (/ê¸°ì\\s+êµ¬ë…/.test(line)) return false;\n      if (/ê¸°ì\\s*=$/.test(line)) return false;\n      if (/^[ê°€-í£\\s]{2,10}ê¸°ì$/.test(line)) return false;\n      if (/\\/ê¸°ì$/.test(line)) return false;\n      if (/^[ê°€-í£\\s]+AI\\s*ë¦¬í¬í„°$/.test(line)) return false;\n      if (/^[ê°€-í£]{2,4}$/.test(line)) {\n        if (!/^(í•˜ì§€ë§Œ|ê·¸ëŸ¬ë‚˜|ë˜í•œ|ë”°ë¼ì„œ|í•œí¸|ì´ë‚ |ì˜¤ëŠ˜|ì–´ì œ|ë‚´ì¼|ì˜¬í•´|ì‘ë…„|ì§€ë‚œí•´|ìµœê·¼|ë‹¹ì‹œ|ì´í›„|í˜„ì¬|ì•ì„œ|íŠ¹íˆ|ì´ë¯¸|ë‹¤ë§Œ|ë‹¤ì‹œ|ì—¬ì „íˆ|ê³„ì†|ì´ì–´|ë¨¼ì €|ì´ë²ˆ|ì§€ë‚œ|ë¬¸í™”)$/.test(line)) {\n          return false;\n        }\n      }\n      if (/^[ê°€-í£]+\\s*[=ï¼]\\s*[ê°€-í£\\s]+\\s*(íŠ¹íŒŒì›|ê¸°ì)$/.test(line)) return false;\n    }\n    if (/^[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\/\\s*ê²½ì œë¥¼ ì½ëŠ”/.test(line)) return false;\n    if (/\\([^)]*=\\s*ì—°í•©ë‰´ìŠ¤\\)/.test(line)) return false;\n    if (/ì¡°ì„ NS ê¸°ì/.test(line)) return false;\n    \n    // === ì´ë©”ì¼ ë‹¨ë… ë¼ì¸ ===\n    if (/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(line)) return false;\n    \n    // === ê²½ì¸ì‹ ë¬¸ ===\n    if (/^_ê¸°ìëª…_\\s*[ê°€-í£]+\\s*ê¸°ì/.test(line)) return false;\n    if (/^\\*+\\s*ì…ë ¥\\s*\\d{4}/.test(line)) return false;\n    if (/^\\*+\\s*ìˆ˜ì •\\s*\\d{4}/.test(line)) return false;\n    if (/^\\*+\\s*ëŒ“ê¸€/.test(line)) return false;\n    \n    // === ë§¥ìŠ¤ë¬´ë¹„ ===\n    if (/^\\[ë§¥ìŠ¤ë¬´ë¹„=\\s*[ê°€-í£]+\\s*ê¸°ì\\]$/.test(line)) return false;\n    if (/ê¸°ì\\s*\\/\\s*[a-zA-Z0-9._-]+@maxmovie\\.com/.test(line)) return false;\n    if (/ê¸°ì‚¬\\s*ì œë³´\\s*ë°\\s*ë³´ë„ìë£Œ/.test(line)) return false;\n    if (/maxpress@maxmovie\\.com/.test(line)) return false;\n    if (/^Now$|^ë¦¬ë·°&í¬í…Œì´í† ì§€ìˆ˜$|^ì‹œì‚¬íšŒÂ·ì´ë²¤íŠ¸$|^í¬í† &ì˜ìƒ$|^ë¬´ë¹„ë ˆí„°$|^ë§¤ê±°ì§„$/.test(line)) return false;\n    if (/^\\d+ë¶„\\s*ì´ë‚´$/.test(line)) return false;\n    if (/^ê¸€ì\\s*í¬ê¸°\\s*ë³€ê²½$/.test(line)) return false;\n    if (/^ì´\\s*ê¸°ì‚¬ë¥¼\\s*ì¶”ì²œí•©ë‹ˆë‹¤\\.?$/.test(line)) return false;\n    if (/^ì…ë ¥\\s*\\d{4}\\.\\d{2}\\.\\d{2}/.test(line)) return false;\n    if (/^ì™¸$/.test(line)) return false;\n    if (/^ëª…$/.test(line)) return false;\n    if (/^ëŒ“ê¸€ë³´ê¸°$/.test(line)) return false;\n    if (/^ê³µìœ í•˜ê¸°$/.test(line)) return false;\n    if (/^ìŠ¤í¬ë©$/.test(line)) return false;\n    if (/^ì¸ì‡„í•˜ê¸°$/.test(line)) return false;\n    \n    // === ê¸°ì í”„ë¡œí•„ ===\n    if (/íŠ¹íŒŒì›\\.|ê¸°ìì…ë‹ˆë‹¤\\.|ë‹¤ë£¹ë‹ˆë‹¤\\.|ì”ë‹ˆë‹¤\\.|ë§¡ê³  ìˆìŠµë‹ˆë‹¤\\./.test(line)) return false;\n    if (/ì„\\/ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤\\.|ì„\\/ë¥¼ ì”ë‹ˆë‹¤\\./.test(line)) return false;\n    \n    // === ëŒ“ê¸€ ===\n    if (/^ëŒ“ê¸€\\s*\\d+$/.test(line)) return false;\n    if (/^ëŒ“ê¸€ì„\\s*ì…ë ¥í•´ì£¼ì„¸ìš”$/.test(line)) return false;\n    if (/^ë“±ë¡$/.test(line)) return false;\n    if (/^0\\/\\s*\\d+$/.test(line)) return false;\n    if (/^100ìí‰$/.test(line)) return false;\n    if (/^ë„ì›€ë§$|^ì‚­ì œê¸°ì¤€$/.test(line)) return false;\n    if (/^ìµœì‹ ìˆœ$|^ê´€ì‹¬ìˆœ$/.test(line)) return false;\n    \n    // === ì‚¬ì§„ ì„¤ëª… ===\n    if (/^[â–²â–¼]\\s*ì‚¬ì§„\\s*=/.test(line)) return false;\n    if (/^[â–²â–¼]\\s*ì¶œì²˜\\s*[:ï¼š=]/.test(line)) return false;\n    if (/^\\/ì‚¬ì§„\\s*=\\s*[ê°€-í£]+\\s*ê¸°ì$/.test(line)) return false;\n    if (/^\\/\\s*ì‚¬ì§„\\s*ì œê³µ\\s*=/.test(line)) return false;\n    if (/^ì‚¬ì§„ì œê³µ\\s*[=:]/.test(line)) return false;\n    if (/^\\([ê°€-í£\\s]+\\s*ì œê³µ\\)$/.test(line)) return false;\n    if (/^\\([ê°€-í£\\s]+(ì œê³µ|DB)\\)$/.test(line)) return false;\n    if (/^Netflix$/.test(line)) return false;\n    if (/^í¬í† \\s+Netflix$/.test(line)) return false;\n    \n    // === ë§í¬ ===\n    if (/^\\[\\]$/.test(line)) return false;\n    if (/^\\[\\]\\(\\)$/.test(line)) return false;\n    if (/^\\[\\]\\(mailto:/.test(line)) return false;\n    if (/^mailto:/.test(line)) return false;\n    if (/^\\[â€¢/.test(line)) return false;\n    \n    // === êµ¬ë¶„ì„  ===\n    if (/^---+$/.test(line)) return false;\n    if (/^===+$/.test(line)) return false;\n    if (/^={10,}$/.test(line)) return false;\n    \n    // === ì €ì‘ê¶Œ ===\n    if (/^<ì €ì‘ê¶Œì\\(c\\)/.test(line)) return false;\n    if (/ë¬´ë‹¨ì „ì¬\\s*ë°\\s*ì¬ë°°í¬\\s*ê¸ˆì§€/.test(line)) return false;\n    if (/ì €ì‘ê¶Œì\\s*Â©/.test(line)) return false;\n    if (/ì €ì‘ê¶Œì|ë¬´ë‹¨|ì „ì¬|ì¬ë°°í¬|ê¸ˆì§€/.test(line)) return false;\n    if (/ì œë³´í•˜ê¸°/.test(line)) return false;\n    if (/â–·/.test(line)) return false;\n    if (/^â– /.test(line)) return false;\n    \n    // === ê¸°íƒ€ ===\n    if (/^ì¶œì²˜\\s*[:ï¼š]/.test(line)) return false;\n    if (/^ğŸ“¸/.test(line)) return false;\n    if (/^###\\s*\\d+$/.test(line)) return false;\n    if (/^###\\s/.test(line)) return false;\n    \n    // === í‘œ/êµ¬ì¡° ===\n    if (/^êµ¬ë¶„\\s+ë‚´ìš©$/.test(line)) return false;\n    if (/^ì‘í’ˆëª…|^ì œì‘|^ê³µê°œ ì˜ˆì •|^ì „í¸ ê³µê°œ|^íŠ¹ì§•|^í¥í–‰|^ì—°ì¶œ|^í•µì‹¬ ì£¼ì œ|^ê¸°ëŒ€ í¬ì¸íŠ¸/.test(line)) return false;\n    \n    // === í›„ì› ì•ˆë‚´ ===\n    if (/í›„ì›ê¸ˆì„ ê·€í•˜ê²Œ ì“°ê² ìŠµë‹ˆë‹¤/.test(line)) return false;\n    \n    return true;\n  });\n\n  // í›„ì²˜ë¦¬\n  let txt = lines.join('\\n')\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, '')\n    .replace(/\\[[^\\]]+\\]\\(mailto:[^\\)]+\\)/g, '')\n    .replace(/\\[[^\\]]+\\]\\([^\\)]+\\)/g, '')\n    .replace(/https?:\\/\\/[^\\s)]+/g, '')\n    .replace(/mailto:[^\\s]+/g, '')\n    .replace(/[â–¶â–·â—â—†â– â˜…â€»â–²â–¼â†’â†â†‘â†“#]/g, '')\n    .replace(/[|â”‚]+/g, '')\n    .replace(/\\*\\*/g, '')\n    .replace(/\\[\\]/g, '');\n\n  txt = txt.replace(/\\n{2,}/g, '\\n\\n');\n  txt = txt.replace(/ {2,}/g, ' ');\n  txt = txt.replace(/\\[\\]\\(\\)/g, '');\n  txt = txt.replace(/\\n\\n(\\*\\s*\\n)+$/g, '');\n  txt = txt.replace(/\\n\\n\\*\\s*\\n\\*/g, '\\n');\n  txt = txt.replace(/(\\n\\*\\s*){3,}/g, '\\n');\n  txt = txt.trim();\n  \n  // ìµœì¢… ê¸°ì ì •ë³´ ì œê±°\n  txt = txt.replace(/\\([^)]*ê¸°ì\\)\\s*/g, '');\n  txt = txt.replace(/\\n*ì‚¬ì§„\\s*[=:ï¼š]\\s*[^\\n]*ê¸°ì\\s*$/g, '');\n  txt = txt.replace(/\\n*ì˜ìƒ\\s*[=:ï¼š]\\s*[^\\n]*ê¸°ì\\s*$/g, '');\n  txt = txt.replace(/\\n*ê·¸ë˜í”½\\s*[=:ï¼š]\\s*[^\\n]*ê¸°ì\\s*$/g, '');\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*[a-zA-Z0-9._-]+@[^\\s]+\\s*$/g, '');\n  txt = txt.replace(/\\n*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*\\/\\s*ê²½ì œë¥¼ ì½ëŠ”[^\\n]*$/g, '');\n  txt = txt.replace(/\\n+iMBCì—°ì˜ˆ\\s*[ê°€-í£]+\\s*$/g, '');\n  txt = txt.replace(/\\niMBCì—°ì˜ˆ\\s*[ê°€-í£]+$/g, '');\n  txt = txt.trim();\n  return txt;\n}\n\nreturn items.map(item => {\n  const data = item.json;\n  \n  if (data.success === true && data.content) {\n    const cleanedContent = cleanNewsBody(data.content);\n    const isSuccess = cleanedContent !== '' && cleanedContent.length > 0;\n    \n    return {\n      json: {\n        success: isSuccess,\n        url: data.url,\n        content: cleanedContent,\n        content_length: cleanedContent.length,\n        extraction_method: data.extraction_method\n      }\n    };\n  }\n  \n  return { json: data };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        368,
        16
      ],
      "id": "5676483a-71da-4844-9e2f-7d0feeff2488",
      "name": "Playwright Cleaning"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://google-news-scraper-production.up.railway.app/extract",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"url\": \"{{ $json.url }}\"\n}",
        "options": {
          "batching": {
            "batch": {
              "batchSize": 10
            }
          },
          "response": {
            "response": {
              "neverError": true,
              "responseFormat": "json"
            }
          },
          "timeout": 300000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -144,
        -144
      ],
      "id": "bfb1ee6b-dfeb-4909-b8f1-e7dc5b5040c6",
      "name": "FastAPI Extract",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://google-news-playwright-production.up.railway.app/playwright",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"url\": \"{{ $json.url }}\"\n}",
        "options": {
          "batching": {
            "batch": {
              "batchSize": 1
            }
          },
          "response": {
            "response": {
              "neverError": true,
              "responseFormat": "json"
            }
          },
          "timeout": 600000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        192,
        16
      ],
      "id": "3371b969-1894-4ab9-a75a-df86c729fa39",
      "name": "Playwright Extract"
    },
    {
      "parameters": {
        "jsCode": "// SerpAPI ì‘ë‹µì„ Notion í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (ì¤‘ë³µ ì œê±° + ë„¤ì´íŠ¸ í•„í„°ë§ + ë„˜ë²„ë§)\n\nconst movie = $('Notion Trigger').item.json.properties.Movie.title[0].plain_text;\nconst keywordPageId = $('Notion Trigger').item.json.id;\n\nconst allSerpResults = $input.all();\nconst splitOutItems = $('News Split Out').all();\n\nconst blockDomains = [\n  'news.nate.com', \n  'v.daum.net', \n  'msn.com', \n  'm.newsen.com',\n  'newneek.co',\n  'theqoo.net',\n  'animationmagazine.net'\n];\nconst seenUrls = new Set();\nconst allTransformedNews = [];\nconst collectedDateTime = new Date();\n\nallSerpResults.forEach((serpItem, index) => {\n  const serpResult = serpItem.json;\n  const currentKeyword = splitOutItems[index].json.Keywords;\n  \n  if (!serpResult.news_results || serpResult.news_results.length === 0) return;\n  \n  const allNews = [];\n  let globalPosition = 0;\n  \n  serpResult.news_results.forEach((group) => {\n    if (group.stories && Array.isArray(group.stories)) {\n      group.stories.forEach((story) => {\n        globalPosition++;\n        allNews.push({ ...story, position: globalPosition });\n      });\n    } else if (group.title) {\n      globalPosition++;\n      allNews.push({ ...group, position: globalPosition });\n    }\n  });\n  \n  allNews.forEach((news) => {\n    const url = news.link;\n    \n    if (url && blockDomains.some(domain => url.includes(domain))) return;\n    if (!url || seenUrls.has(url)) return;\n    seenUrls.add(url);\n    \n    let publishedDateOnly = null;\n    \n    if (news.date) {\n      try {\n        const dateStr = news.date.replace(/, \\+\\d{4} UTC$/, '');\n        const parsedDate = new Date(dateStr);\n        publishedDateOnly = parsedDate.toISOString().split('T')[0];\n      } catch (e) {\n        publishedDateOnly = new Date().toISOString().split('T')[0];\n      }\n    } else {\n      publishedDateOnly = new Date().toISOString().split('T')[0];\n    }\n    \n    const sourceName = news.source?.name || 'Unknown';\n    const searchText = `${news.title} ${sourceName}`.toLowerCase();\n    let category = 'ê¸°íƒ€';\n    \n    if (/ë¬¸í™”|ì—”í„°|entertainment|ì˜í™”|ìŒì•…|ì˜ˆëŠ¥|ë“œë¼ë§ˆ/.test(searchText)) category = 'ë¬¸í™”';\n    else if (/ê²½ì œ|finance|ì¦ì‹œ|ì£¼ì‹|ë¹„ì¦ˆë‹ˆìŠ¤/.test(searchText)) category = 'ê²½ì œ';\n    else if (/ê¸°ìˆ |tech|ai|ì¸ê³µì§€ëŠ¥|it/.test(searchText)) category = 'ê¸°ìˆ ';\n    else if (/ì •ì¹˜|politics|election|ì„ ê±°/.test(searchText)) category = 'ì •ì¹˜';\n    else if (/ìŠ¤í¬ì¸ |sports|ì¶•êµ¬|ì•¼êµ¬/.test(searchText)) category = 'ìŠ¤í¬ì¸ ';\n    \n    allTransformedNews.push({\n      title: news.title || 'Untitled',\n      url: url,\n      source: sourceName,\n      thumbnail: news.thumbnail || news.thumbnail_small || null,\n      publishedDateOnly: publishedDateOnly,\n      atTime: collectedDateTime.toISOString(),\n      position: news.position,\n      category: category,\n      keyword: currentKeyword,\n      movie: movie,\n      keywordPageId: keywordPageId\n    });\n  });\n});\n\nallTransformedNews.forEach((item, index) => {\n  item.number = index + 1;\n});\n\nreturn allTransformedNews.map(item => ({ json: item }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -512,
        -400
      ],
      "id": "80240c2a-a303-47d4-bd3d-8a8df06dde98",
      "name": "News Transform"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.success }}",
                    "rightValue": "true",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "c6202a5a-7874-4ad1-bc4c-0f126b31b08f"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ì„±ê³µ"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2f68e6c2-2c7d-4526-b584-8eb3c24b985c",
                    "leftValue": "={{ $json.success }}",
                    "rightValue": "false",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ì‹¤íŒ¨"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        16,
        -144
      ],
      "id": "3d19cae6-60e4-4e90-8584-c167cf20826e",
      "name": "FastAPI Switch"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0379356f-b59a-456f-9d9f-d943fb13f728",
              "name": "title",
              "value": "={{ $('News Transform').item.json.title }}",
              "type": "string"
            },
            {
              "id": "acdeff3f-c0dc-4a32-ab83-a3e2bddd0709",
              "name": "url",
              "value": "={{ $('News Transform').item.json.url }}",
              "type": "string"
            },
            {
              "id": "0ba61ddf-d7c3-454a-be98-601b79ca73aa",
              "name": "source",
              "value": "={{ $('News Transform').item.json.source }}",
              "type": "string"
            },
            {
              "id": "9a488c1b-d7a5-4443-acc6-891da6d53110",
              "name": "thumbnail",
              "value": "={{ $('News Transform').item.json.thumbnail }}",
              "type": "string"
            },
            {
              "id": "e31f3242-15b2-4942-8608-b12ba5665cc6",
              "name": "publishedDateOnly",
              "value": "={{ $('News Transform').item.json.publishedDateOnly }}",
              "type": "string"
            },
            {
              "id": "9c116319-bb37-495d-904d-75726f4f2bee",
              "name": "atTime",
              "value": "={{ $('News Transform').item.json.atTime }}",
              "type": "string"
            },
            {
              "id": "2f4e386c-bcbe-417f-b897-5a33f7262dee",
              "name": "position",
              "value": "={{ $('News Transform').item.json.position }}",
              "type": "string"
            },
            {
              "id": "b24e5376-3128-450d-8eaf-ee2854bd463d",
              "name": "category",
              "value": "={{ $('News Transform').item.json.category }}",
              "type": "string"
            },
            {
              "id": "4da5420c-f1b1-4599-bd0e-f5061b89ce24",
              "name": "keyword",
              "value": "={{ $('News Transform').item.json.keyword }}",
              "type": "string"
            },
            {
              "id": "c8a23baa-a534-41cc-8300-2625870da8fc",
              "name": "movie",
              "value": "={{ $('News Transform').item.json.movie }}",
              "type": "string"
            },
            {
              "id": "e04be037-3538-44ce-8dbd-c48a8a15cd3a",
              "name": "keywordPageId",
              "value": "={{ $('News Transform').item.json.keywordPageId }}",
              "type": "string"
            },
            {
              "id": "de9997af-d684-481b-ba64-2e1a495d1de6",
              "name": "newsBody",
              "value": "={{ $json.content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -144,
        -544
      ],
      "id": "0689d732-d25e-4b96-ab73-cf7f9ba126da",
      "name": "News Fields"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.content_length }}",
                    "rightValue": 100,
                    "operator": {
                      "type": "number",
                      "operation": "gte"
                    },
                    "id": "c6202a5a-7874-4ad1-bc4c-0f126b31b08f"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ì„±ê³µ"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2f68e6c2-2c7d-4526-b584-8eb3c24b985c",
                    "leftValue": "={{ $json.content_length }}",
                    "rightValue": 100,
                    "operator": {
                      "type": "number",
                      "operation": "lt"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ì‹¤íŒ¨"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        544,
        16
      ],
      "id": "0e5c6b19-779a-4b91-8d71-261e4797bed8",
      "name": "Playwright Switch"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/extract",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "urls",
              "value": "={{ $json.url }}"
            },
            {
              "name": "extract_depth",
              "value": "advanced"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        192,
        256
      ],
      "id": "506db955-72d9-4e43-950b-a8495d709af5",
      "name": "Tavily Extract",
      "credentials": {
        "httpHeaderAuth": {
          "id": "PRjiOUMMp9jAWe54",
          "name": "Header Tavily account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. í˜„ì¬ ë…¸ë“œ ë°ì´í„° (Tavily ê²°ê³¼)\nconst items = $input.all();\n\n// 2. Playwright Switch ì´ì „ì˜ Transform ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst transformData = $('Playwright Switch').all();\n\n// 3. ë³¸ë¬¸ ì •ì œ í•¨ìˆ˜\nfunction cleanNewsBody(rawContent, url = '') {\n  if (!rawContent) return '[ë³¸ë¬¸ ì—†ìŒ]';\n  if (Array.isArray(rawContent)) rawContent = rawContent.join('\\n');\n  else if (typeof rawContent === 'object' && rawContent !== null) {\n    rawContent = rawContent.content || JSON.stringify(rawContent);\n  }\n  if (typeof rawContent !== 'string') return '[ë³¸ë¬¸ ì—†ìŒ]';\n\n  const originalLength = rawContent.length;\n\n  // URL ê¸°ë°˜ ì–¸ë¡ ì‚¬ íŒë³„\n  const isNews1 = url.includes('news1.kr');\n  const isMaxMovie = url.includes('maxmovie.com');\n  const isChannelA = url.includes('ichannela.com');\n\n  // === 1ë‹¨ê³„: ë§ˆí¬ë‹¤ìš´ ë§í¬ ë¨¼ì € ì™„ì „ ì œê±° ===\n  rawContent = rawContent\n    .replace(/^\\*\\s+\\[.*?\\]\\(.*?\\)\\s*$/gm, '')\n    .replace(/^\\d+\\.\\s+\\[.*?\\]\\(.*?\\)\\s*$/gm, '')\n    .replace(/\\[[^\\]]+\\]\\([^\\)]+\\)/g, '')\n    .replace(/\\[\\]\\(\\)/g, '')\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, '');\n\n  // === 2ë‹¨ê³„: ë³´ê·¸ ì½”ë¦¬ì•„ ì „ìš© ì „ì²˜ë¦¬ ===\n  rawContent = rawContent.replace(/^[\\s\\S]*?===+\\n/, '');\n  rawContent = rawContent.replace(/\\[(FASHION|BEAUTY|LIVING|CULTURE|VIDEO)\\][\\s\\S]*?(?=\\n\\n[ê°€-í£])/gi, '');\n  rawContent = rawContent.replace(/korea\\n\\*\\s+\\[Adria\\][\\s\\S]*?(?=\\n\\n[ê°€-í£])/gi, '');\n  rawContent = rawContent.replace(/\\[(êµ¬ë…í•˜ê¸°|ì •ê¸°êµ¬ë…|íšŒì‚¬ì†Œê°œ|ê´‘ê³ \\/ì œíœ´|ê³µì§€ì‚¬í•­|MASTHEAD|ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨)\\]/g, '');\n\n  // === 3ë‹¨ê³„: ë‰´ìŠ¤1 ê¸°ì ì„œëª…ë§Œ ì œê±° ===\n  if (isNews1) {\n    rawContent = rawContent.replace(/\\([ê°€-í£]+=ë‰´ìŠ¤1\\)\\s*[ê°€-í£]{2,4}\\s*ê¸°ì\\s*=\\s*/g, '');\n    rawContent = rawContent.replace(/^[ê°€-í£]{2,4}\\s*ê¸°ì\\s*=\\s*/gm, '');\n  }\n\n  let lines = rawContent.split('\\n').map(line => line.trim()).filter(line => line.length > 0);\n\n  // === 4ë‹¨ê³„: ë³¸ë¬¸ ì‹œì‘ì  ì°¾ê¸° ===\n  let startIdx = -1;\n  \n  if (isChannelA) {\n    // ì±„ë„A: ë‚ ì§œ/ì‹œê°„ ì¤„ ë‹¤ìŒë¶€í„° ì‹œì‘\n    const dateIdx = lines.findIndex(line => /^\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}/.test(line));\n    if (dateIdx >= 0) {\n      startIdx = dateIdx + 1;\n    } else {\n      // ë‚ ì§œ ëª» ì°¾ìœ¼ë©´ ì²« í•œê¸€ ë³¸ë¬¸ ë¬¸ì¥\n      startIdx = lines.findIndex(line => \n        line.length > 10 && \n        /[ê°€-í£]/.test(line) &&\n        !/^#|^\\[|^!|^Image|^â€¢/.test(line)\n      );\n    }\n  } else if (isNews1) {\n    startIdx = lines.findIndex((line, idx) => \n      line.length > 20 &&\n      !/^#|^\\[|^!|^[ê°€-í£]{2,4}\\s*ê¸°ì$/.test(line) &&\n      /[ê°€-í£]/.test(line)\n    );\n    if (startIdx < 0) startIdx = 0;\n  } else {\n    startIdx = lines.findIndex(line =>\n      /^[ê°€-í£]{2,4}\\s+[ê°€-í£]+ì‹œê°€/.test(line) ||\n      /^ê²½ë¶\\s+[ê°€-í£]+ì‹œ/.test(line)\n    );\n    \n    if (startIdx < 0) {\n      startIdx = lines.findIndex(line =>\n        /^ë„·í”Œë¦­ìŠ¤|^<ë¸”ë£¸ë²„ê·¸>|^<[ê°€-í£]+>/.test(line) ||\n        /^[ê°€-í£].{20,}(ì…ë‹ˆë‹¤|í•œë‹¤|ëë‹¤|ìˆë‹¤)\\.$/.test(line)\n      );\n    }\n    \n    if (startIdx < 0) {\n      startIdx = lines.findIndex(line =>\n        line.length > 30 && /[ì´ê°€]ë¼ê³ |[ì´ê°€]ë©°|ë°í˜”ë‹¤|ë§í–ˆë‹¤|ì „í–ˆë‹¤|ì„¤ëª…í–ˆë‹¤|ê°•ì¡°í–ˆë‹¤/.test(line)\n      );\n    }\n  }\n  \n  if (!isMaxMovie && !isNews1 && !isChannelA && startIdx === 0 && lines[0].length < 50 && lines.length > 1) {\n    startIdx = 1;\n  }\n  \n  if (startIdx < 0) startIdx = 0;\n\n  // === 5ë‹¨ê³„: ë³¸ë¬¸ ëì  ì°¾ê¸° ===\n  let endIdx = lines.findIndex((line, idx) => {\n    if (idx <= startIdx + 1) return false; // ì±„ë„AëŠ” ë³¸ë¬¸ì´ ì§§ì•„ì„œ ìµœì†Œ 1ì¤„ë§Œ ë³´ì¥\n\n    // ì±„ë„A íŠ¹í™”\n    if (isChannelA) {\n      if (/^â€¢\\s*\\[ì±„ë„A ë‰´ìŠ¤\\]/.test(line) ||\n          line.includes('êµ¬ë…í•˜ê¸°') ||\n          line.includes('Copyright â’¸ ì±„ë„A') ||\n          line === 'ì¬ìƒëª©ë¡') {\n        return true;\n      }\n    }\n\n    // ë‰´ìŠ¤1 íŠ¹í™”\n    if (isNews1) {\n      if (line === 'ê´€ë ¨ í‚¤ì›Œë“œ' ||\n          /^[a-z0-9]+@news1\\.kr$/.test(line) ||\n          line.includes('ëŒ€í‘œì´ì‚¬/ë°œí–‰ì¸')) {\n        return true;\n      }\n    }\n\n    // ë§¥ìŠ¤ë¬´ë¹„ íŠ¹í™”\n    if (isMaxMovie) {\n      if (line === 'ëŒ“ê¸€0' ||\n          line === 'ê´€ë ¨ ê¸°ì‚¬' ||\n          /^[a-z0-9]+@maxmovie\\.com$/.test(line) ||\n          line.includes('<ì €ì‘ê¶Œì(c) ë§¥ìŠ¤ë¬´ë¹„')) {\n        return true;\n      }\n    }\n\n    // ê³µí†µ ì¢…ë£Œ íŒ¨í„´\n    if (/^ë§ì´ ë³¸ (ë‰´ìŠ¤|ê¸°ì‚¬|ì½˜í…ì¸ )\\s*(\\d+\\/\\d+)?$/.test(line) ||\n        /^(ê´€ë ¨ê¸°ì‚¬|ìµœì‹ ê¸°ì‚¬|ì¶”ì²œê¸°ì‚¬|ì¸ê¸°ê¸°ì‚¬|ì£¼ìš” ê¸°ì‚¬|ë§ì´ ë³¸ ê¸°ì‚¬|ì´ì‹œê° ì£¼ìš”ë‰´ìŠ¤)/i.test(line)) {\n      return true;\n    }\n    \n    if (/^(SNS ê³µìœ í•˜ê¸°|í•¨ê»˜ ë³¼ë§Œí•œ|ì´ ì‹œê°|top|ëŒ“ê¸€|Copyright|^AD$)/i.test(line)) {\n      return true;\n    }\n    \n    if (/^[ê°€-í£]{2,4}\\s*ê¸°ì\\s+[a-zA-Z0-9]+@[a-zA-Z]+\\.(co\\.kr|com)$/.test(line) ||\n        line.includes('[[í•œê²¨ë ˆ í›„ì›í•˜ê¸°]')) {\n      return true;\n    }\n    \n    return false;\n  });\n  \n  if (endIdx < 0) endIdx = lines.length;\n\n  lines = lines.slice(startIdx, endIdx);\n\n  // === 6ë‹¨ê³„: ë¼ì¸ í•„í„°ë§ ===\n  lines = lines.filter((line, idx) => {\n    if (!line || line.length < 2) return false;\n    \n    // ì±„ë„A í—¤ë”/í‘¸í„° ì œê±°\n    if (isChannelA) {\n      if (/^Image \\d+/.test(line)) return false; // Image 1, Image 2...\n      if (/^\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}/.test(line)) return false; // ë‚ ì§œ\n      if (/^ë¬¸í™”,êµ­ì œ$|^ì •ì¹˜,ì‚¬íšŒ$|^ê²½ì œ,êµ­ì œ$/.test(line)) return false; // ì¹´í…Œê³ ë¦¬\n      if (/^â€¢\\s*\\[ì±„ë„A/.test(line)) return false; // êµ¬ë… ë§í¬\n      if (line === 'ì¬ìƒëª©ë¡' || line === 'ë™ì˜ìƒ FAQ') return false;\n      if (/^\\d+\\/\\d+\\s+ì—°ì†ì¬ìƒ/.test(line)) return false;\n    }\n\n    // ë‰´ìŠ¤1 í—¤ë” ì œê±°\n    if (isNews1) {\n      if (/^#/.test(line)) return false;\n      if (/^[ê°€-í£]{2,4}\\s*ê¸°ì\\s*$/.test(line)) return false;\n      if (/^!\\[/.test(line)) return false;\n      if (/^#{2,6}\\s*\\[/.test(line)) return false;\n    }\n\n    // ë§¥ìŠ¤ë¬´ë¹„ í—¤ë” ì œê±°\n    if (isMaxMovie) {\n      if (idx === 0 && /^###/.test(line)) return false;\n      if (/^\\[ë§¥ìŠ¤ë¬´ë¹„=/.test(line)) return false;\n      if (/^```/.test(line)) return false;\n    }\n    \n    // ë‹¨ì¼ ë¬¸ì\n    if (line.length === 1 && line !== '.') return false;\n    if (line === 'ê°€') return false;\n    \n    // ë¹ˆ ë§ˆí¬ë‹¤ìš´\n    if (/^\\[\\]|\\(\\)$|^!$/.test(line)) return false;\n    \n    // ìˆ«ìë§Œ\n    if (/^\\d+\\.?\\s*$/.test(line)) return false;\n    \n    // ë‚ ì§œ/ì‹œê°„ë§Œ\n    if (/^\\d{4}[-./ë…„]\\d{1,2}[-./ì›”]\\d{1,2}[ì¼\\s\\d:]*$/.test(line)) return false;\n    if (/^(ì˜¤ì „|ì˜¤í›„)\\s+\\d{1,2}:\\d{2}$/.test(line)) return false;\n    \n    // ì˜¨ë„ë§Œ\n    if (/^[ê°€-í£]+\\s+\\d{1,2}Â°?\\s*$/.test(line)) return false;\n    \n    // ì§€ì—­ëª…ë§Œ\n    if (/^(ì„œìš¸|ë¶€ì‚°|ëŒ€êµ¬|ì¸ì²œ|ê´‘ì£¼|ëŒ€ì „|ìš¸ì‚°|ê°•ë¦‰|ì œì£¼|ê²½ê¸°|ê°•ì›|ì¶©ë¶|ì¶©ë‚¨|ì „ë¶|ì „ë‚¨|ê²½ë¶|ê²½ë‚¨|ì„¸ì¢…)$/.test(line)) return false;\n    \n    // ë©”ë‰´\n    if (/^(ì •ì¹˜|ì‚¬íšŒ|ê²½ì œ|êµ­ì œ|ì „êµ­|ì™¸êµ|ë¶í•œ|ê¸ˆìœµ|ì‚°ì—…|ë¶€ë™ì‚°|IT|ê³¼í•™|ë°”ì´ì˜¤|ìƒí™œ|ë¬¸í™”|ì—°ì˜ˆ|ìŠ¤í¬ì¸ |ì˜¤í”¼ë‹ˆì–¸|í”¼í”Œ|í¬í† |TV|Now|ë¦¬ë·°)$/i.test(line)) return false;\n    \n    // ìˆ«ì+íŠ¹ìˆ˜ë¬¸ìë§Œ\n    if (/^[\\d\\s\\.\\/\\-]+$/.test(line)) return false;\n    \n    // ì§§ì€ ë¬¸ì¥ í•„í„°ë§ (ì±„ë„AëŠ” ì§§ì€ ë³¸ë¬¸ í—ˆìš©)\n    if (!isChannelA && line.length >= 15 && line.length < 80) {\n      if (/[\\.ë‹¤ìš”]$/.test(line) || \n          /[ì€ëŠ”ì´ê°€ì„ë¥¼ì—ê²Œì™€ê³¼ë„ë§Œì—ì„œë¶€í„°ê¹Œì§€ì˜]/.test(line) ||\n          /[í•˜í–ˆë ëœë˜ëŠ”í•œ]/.test(line)) {\n        return true;\n      }\n      return false;\n    }\n    \n    // ì´ë¯¸ì§€ ì„¤ëª…\n    if (/^(ê°ˆë¬´ë¦¬|ì œê³µ|ìº¡ì²˜|ì‚¬ì§„|ì¶œì²˜|í¬ìŠ¤í„°)\\s*[:=]?\\s*[^\\wê°€-í£]*$/i.test(line)) return false;\n    if (/â“’\\s*(AFP|ë‰´ìŠ¤1|ë§¥ìŠ¤ë¬´ë¹„|ì±„ë„A)/.test(line)) return false;\n    \n    // ê´‘ê³ \n    if (/Taboola|Sponsored|You May Like|Read More|Shop Now|Buy Now/i.test(line)) return false;\n    \n    // ì±„ë„A í‘¸í„°\n    if (isChannelA) {\n      if (line.includes('Copyright â’¸ ì±„ë„A') ||\n          line.includes('ë¬´ë‹¨ ì „ì¬, ì¬ë°°í¬ ë° AIí•™ìŠµ') ||\n          line.includes('CHANNEL A ALL RIGHTS RESERVED') ||\n          line.includes('ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸') ||\n          line.includes('ë¶€ê°€í†µì‹ ì‚¬ì—…ì‹ ê³ ') ||\n          line.includes('ì²­ì†Œë…„ë³´í˜¸ì±…ì„ì')) return false;\n    }\n    \n    // ë‰´ìŠ¤1 í‘¸í„°\n    if (line.includes('newsok@news1.kr') ||\n        line.includes('webmaster@news1.kr') ||\n        line.includes('ëŒ€í‘œì´ì‚¬') ||\n        line.includes('í¸ì§‘ì¸') ||\n        line.includes('SCë¹Œë”©') ||\n        line.includes('ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸') ||\n        line.includes('Copyright â“’ ë‰´ìŠ¤1')) return false;\n    \n    // ë§¥ìŠ¤ë¬´ë¹„ í‘¸í„°\n    if (line.includes('tadada@maxmovie.com') ||\n        line.includes('maxpress@maxmovie.com') ||\n        line.includes('<ì €ì‘ê¶Œì(c) ë§¥ìŠ¤ë¬´ë¹„') ||\n        line.includes('â“’ MediaYunseul')) return false;\n    \n    // í•œê²¨ë ˆ í‘¸í„°\n    if (line.includes('í•œê²¨ë ˆ í›„ì›') ||\n        line === ';)' ||\n        line === 'SNSì— ë™ì‹œë“±ë¡') return false;\n    \n    // ê¸°íƒ€ ë…¸ì´ì¦ˆ\n    if (/^(ë³µì‚¬|ê³µìœ |top|korea|ê°€|ëŒì•„ê°€ê¸°|Previous|Next|Copyright|ì´ì „|ë‹¤ìŒ|ëª©ë¡|ë¡œê·¸ì¸|í—¤ë” ë°”ë¡œê°€ê¸°|í‘¸í„° ë°”ë¡œê°€ê¸°)$/i.test(line)) return false;\n    \n    // íŠ¹ìˆ˜ íŒ¨í„´\n    if (isNews1 && /^!+$/.test(line)) return false;\n    if (isChannelA && /^â€¢$/.test(line)) return false;\n    \n    return true;\n  });\n\n  // === 7ë‹¨ê³„: ìµœì¢… í…ìŠ¤íŠ¸ í›„ì²˜ë¦¬ ===\n  let txt = lines.join('\\n')\n    .replace(/ëŒì•„ê°€ê¸°/g, '')\n    .replace(/https?:\\/\\/[^\\s)]+/g, '')\n    .replace(/[â–¶â–·â—â—†â– â˜…â€»â–²â–¼â†’â†â†‘â†“#â™¥â™¡âœ“âœ”â˜â—]/g, '')\n    .replace(/[|â”‚â”ƒ]+/g, '')\n    .replace(/\\*\\*/g, '')\n    .replace(/====+/g, '')\n    .replace(/----+/g, '')\n    .replace(/```/g, '')\n    .replace(/[\\u{1F300}-\\u{1F9FF}]/gu, '')\n    .replace(/[\\u{2600}-\\u{26FF}]/gu, '')\n    .replace(/[\\u{2700}-\\u{27BF}]/gu, '')\n    .replace(/\\n{3,}/g, '\\n\\n')\n    .replace(/ {2,}/g, ' ')\n    .replace(/^\\s+$/gm, '')\n    .trim();\n\n  // ìµœì¢… ê²€ì¦ (ì±„ë„AëŠ” ì§§ì€ ë³¸ë¬¸ í—ˆìš©)\n  const minLength = isChannelA ? 20 : 30;\n  if (!txt || txt.length < minLength) {\n    return `[ë³¸ë¬¸ ì—†ìŒ - ì›ë³¸: ${originalLength}ì, ì²˜ë¦¬ í›„: ${txt.length}ì, URL: ${url.substring(0, 50)}]`;\n  }\n  \n  return txt;\n}\n\n// 4. Transform Dataë¥¼ URL ê¸°ì¤€ìœ¼ë¡œ ë§µ ìƒì„±\nconst transformMap = new Map();\ntransformData.forEach(item => {\n  const url = item.json.url;\n  if (url) {\n    transformMap.set(url, item.json);\n  }\n});\n\n// 5. í˜„ì¬ ë°ì´í„° ì²˜ë¦¬ ë° 5ê°œ í•„ë“œë¡œ í†µì¼\nconst results = items.map((item) => {\n  const raw = item.json.results?.[0]?.raw_content || '';\n  const url = item.json.results?.[0]?.url || '';\n\n  const cleaned = cleanNewsBody(raw, url);\n  const contentLength = cleaned.includes('[ë³¸ë¬¸ ì—†ìŒ') ? 0 : cleaned.length;\n  const success = contentLength >= 100;\n\n  return {\n    json: {\n      success: success,\n      url: url,\n      content: cleaned,\n      extraction_method: success ? 'tavily' : 'error',\n      content_length: contentLength\n    }\n  };\n});\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        368,
        256
      ],
      "id": "694b2723-d68c-437a-96a7-c3dfdb7b5c39",
      "name": "Tavily Cleaning"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "a51cb158-a0c7-484c-8013-acf8a40a5f47",
              "leftValue": "={{ $json.extraction_method }}",
              "rightValue": "tavily",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        544,
        256
      ],
      "id": "06a258dc-f9a7-41a6-9637-0341cf98105d",
      "name": "Tavily Filter"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "ca9212de-c8f7-46e0-a7a5-ba4abaa8441d",
              "leftValue": "={{ $json.number }}",
              "rightValue": 1,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            },
            {
              "id": "0e985210-11d8-446e-b3a7-766a8c994345",
              "leftValue": "={{ $json.number }}",
              "rightValue": 10,
              "operator": {
                "type": "number",
                "operation": "lte"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -320,
        -640
      ],
      "id": "f9027278-61d9-454e-be6e-9579e47245d8",
      "name": "Test Filter",
      "disabled": true
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "29a61622-43bc-8089-885e-f45d0e1b32d0",
          "mode": "list",
          "cachedResultName": "ë‰´ìŠ¤ í¬ë¡¤ë§ ë°ì´í„°",
          "cachedResultUrl": "https://www.notion.so/29a6162243bc8089885ef45d0e1b32d0"
        },
        "title": "ë‰´ìŠ¤ í¬ë¡¤ë§ ë°ì´í„°",
        "simple": false,
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "At Time|date",
              "date": "={{ $('News Fields').item.json.atTime }}",
              "timezone": "Asia/Seoul"
            },
            {
              "key": "Category|select",
              "selectValue": "={{ $('News Fields').item.json.category }}"
            },
            {
              "key": "Content|rich_text",
              "textContent": "={{ $('News Fields').item.json.newsBody ? ($('News Fields').item.json.newsBody.length > 1950 ? $('News Fields').item.json.newsBody.slice(0, 1950) + '...' : $('News Fields').item.json.newsBody) : '' }}"
            },
            {
              "key": "Keyword Page|relation",
              "relationValue": [
                "={{ $('News Fields').item.json.keywordPageId }}"
              ]
            },
            {
              "key": "Keywords|select",
              "selectValue": "={{ $('News Fields').item.json.keyword }}"
            },
            {
              "key": "Movie|title",
              "title": "={{ $('News Fields').item.json.movie }}"
            },
            {
              "key": "Position|number",
              "numberValue": "={{ parseInt($('News Fields').item.json.position) }}"
            },
            {
              "key": "Pubdate|date",
              "includeTime": false,
              "date": "={{ $('News Fields').item.json.publishedDateOnly }}",
              "timezone": "Asia/Seoul"
            },
            {
              "key": "Source|select",
              "selectValue": "={{ $('News Fields').item.json.source }}"
            },
            {
              "key": "Thumbnail|url",
              "ignoreIfEmpty": true,
              "urlValue": "={{ $('News Fields').item.json.thumbnail || \"\" }}"
            },
            {
              "key": "Title|rich_text",
              "textContent": "={{ $('News Fields').item.json.title }}"
            },
            {
              "key": "URL|url",
              "ignoreIfEmpty": true,
              "urlValue": "={{ $('News Fields').item.json.url }}"
            }
          ]
        },
        "options": {
          "iconType": "file",
          "icon": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Google_News_icon.svg/768px-Google_News_icon.svg.png"
        }
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        368,
        -528
      ],
      "id": "a028135a-82e3-4f9c-b74d-78a0d9f2be4e",
      "name": "Notion DB",
      "credentials": {
        "notionApi": {
          "id": "1IYH8sk8KrXGZta9",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://api.notion.com/v1/blocks/{{ $json.id }}/children",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Notion-Version",
              "value": "2025-09-03"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $('Block Data').item.json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        544,
        -528
      ],
      "id": "7f912136-6a37-40c1-a400-725a4d50b578",
      "name": "Notion Block",
      "credentials": {
        "httpHeaderAuth": {
          "id": "l426XFoZtaDBUlPQ",
          "name": "Header Notion account"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// ê° ì•„ì´í…œì„ ê°œë³„ ì²˜ë¦¬\nconst data = $input.item.json;\n\n// ê° ê¸°ì‚¬ë³„ë¡œ Notion ë¸”ë¡ ë°°ì—´ ìƒì„±\nconst notionBlocks = [];\n\n// Title í—¤ë”© + ë‚´ìš©\nnotionBlocks.push({\n  object: \"block\",\n  type: \"heading_2\",\n  heading_2: {\n    rich_text: [{ type: \"text\", text: { content: \"Title\" } }]\n  }\n});\n\nconst titleText = data.title || \"ì œëª© ì—†ìŒ\";\nconst titleLink = data.url || null;\n\nnotionBlocks.push({\n  object: \"block\",\n  type: \"paragraph\",\n  paragraph: {\n    rich_text: [{ \n      type: \"text\", \n      text: { \n        content: titleText,\n        link: titleLink ? { url: titleLink } : undefined\n      }\n    }]\n  }\n});\n\n// Source í—¤ë”© + ë‚´ìš©\nnotionBlocks.push({\n  object: \"block\",\n  type: \"heading_2\",\n  heading_2: {\n    rich_text: [{ type: \"text\", text: { content: \"Source\" } }]\n  }\n});\n\nnotionBlocks.push({\n  object: \"block\",\n  type: \"paragraph\",\n  paragraph: {\n    rich_text: [{ \n      type: \"text\", \n      text: { \n        content: data.source || \"ì¶œì²˜ ì—†ìŒ\" \n      }\n    }]\n  }\n});\n\n// Pubdate í—¤ë”© + ë‚´ìš©\nnotionBlocks.push({\n  object: \"block\",\n  type: \"heading_2\",\n  heading_2: {\n    rich_text: [{ type: \"text\", text: { content: \"Pubdate\" } }]\n  }\n});\n\nnotionBlocks.push({\n  object: \"block\",\n  type: \"paragraph\",\n  paragraph: {\n    rich_text: [{ \n      type: \"text\", \n      text: { \n        content: data.publishedDateOnly || \"ë‚ ì§œ ì—†ìŒ\" \n      }\n    }]\n  }\n});\n\n// Image í—¤ë”© + ë‚´ìš©\nnotionBlocks.push({\n  object: \"block\",\n  type: \"heading_2\",\n  heading_2: {\n    rich_text: [{ type: \"text\", text: { content: \"Image\" } }]\n  }\n});\n\nif (data.thumbnail && data.thumbnail.trim() !== \"\") {\n  notionBlocks.push({\n    object: \"block\",\n    type: \"image\",\n    image: {\n      type: \"external\",\n      external: { url: data.thumbnail }\n    }\n  });\n} else {\n  notionBlocks.push({\n    object: \"block\",\n    type: \"paragraph\",\n    paragraph: {\n      rich_text: [{ \n        type: \"text\", \n        text: { \n          content: \"ì´ë¯¸ì§€ ì—†ìŒ\" \n        }\n      }]\n    }\n  });\n}\n\n// Content í—¤ë”© + ë‚´ìš©\nnotionBlocks.push({\n  object: \"block\",\n  type: \"heading_2\",\n  heading_2: {\n    rich_text: [{ type: \"text\", text: { content: \"Content\" } }]\n  }\n});\n\n// newsBody ì²˜ë¦¬\nconst content = data.newsBody || \"\";\n\nif (content.trim() === \"\") {\n  notionBlocks.push({\n    object: \"block\",\n    type: \"paragraph\",\n    paragraph: {\n      rich_text: [{ \n        type: \"text\", \n        text: { \n          content: \"ë³¸ë¬¸ ë‚´ìš© ì—†ìŒ\" \n        }\n      }]\n    }\n  });\n} else {\n  // newsBodyë¥¼ 2000ì ë‹¨ìœ„ë¡œ ë¶„í•  (Notion API ì œí•œ)\n  const chunkSize = 2000;\n  \n  for (let i = 0; i < content.length; i += chunkSize) {\n    const chunk = content.slice(i, i + chunkSize);\n    \n    if (chunk.trim() !== \"\") {\n      notionBlocks.push({\n        object: \"block\",\n        type: \"paragraph\",\n        paragraph: {\n          rich_text: [{ \n            type: \"text\", \n            text: { \n              content: chunk \n            }\n          }]\n        }\n      });\n    }\n  }\n}\n\n// êµ¬ë¶„ì„ \nnotionBlocks.push({\n  object: \"block\",\n  type: \"divider\",\n  divider: {}\n});\n\n// notionBlocksë§Œ ë°˜í™˜ (ì›ë³¸ ë°ì´í„° ì œì™¸)\nreturn {\n  json: {\n    children: notionBlocks\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        16,
        -624
      ],
      "id": "aa2f8874-c478-4cde-8142-ddc5e2709313",
      "name": "Block Data"
    },
    {
      "parameters": {
        "batchSize": 10,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -320,
        -400
      ],
      "id": "61b51133-241b-4e05-a945-d84b143cc702",
      "name": "News Loop"
    },
    {
      "parameters": {
        "batchSize": 20,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        192,
        -624
      ],
      "id": "f5e9f592-5937-41c8-b0cc-8e9cbfe1098d",
      "name": "Notion Loop"
    },
    {
      "parameters": {
        "jsCode": "// ì´ì „ ë…¸ë“œì—ì„œ ëª¨ë“  ì•„ì´í…œ ê°€ì ¸ì˜¤ê¸°\nconst cleaningItems = $('News Fields').all();\n\n// newsBody í•„ë“œë§Œ ì¶”ì¶œ\nconst newsBodies = cleaningItems.map(item => item.json.newsBody);\n\n// ì›í•˜ëŠ” êµ¬ë¶„ìë¡œ í•©ì¹¨ (ì˜ˆ: '\\n---\\n')\nconst allNewsBody = newsBodies.join('\\n---\\n');\n\n// keywordPageId ê°€ì ¸ì˜¤ê¸° (ì²« ë²ˆì§¸ ì•„ì´í…œì—ì„œ)\nconst keywordPageId = cleaningItems[0]?.json.keywordPageId || '';\n\n// ì¸ë„¤ì¼ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸° (ì²« ë²ˆì§¸ ì•„ì´í…œì—ì„œ)\nconst thumbnail = cleaningItems[0]?.json.thumbnail || '';\n\n// í•œ ê°œ ì•„ì´í…œìœ¼ë¡œ ë°˜í™˜\nreturn [\n  {\n    json: { \n      allNewsBody,\n      keywordPageId,\n      thumbnail \n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        752,
        -928
      ],
      "id": "513d75c3-9d6b-4866-af78-378749381210",
      "name": "All News Data"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=allNewBody: {{ $json.allNewsBody }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=ë‹¹ì‹ ì€ ë§¤ìš° ê¼¼ê¼¼í•˜ê³  ë¶„ì„ì ì¸ ê¸€ë¡œë²Œ ë‰´ìŠ¤ íŠ¸ë Œë“œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\nêµ¬ê¸€ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì–¸ë¡ ì˜ ë³´ë„ ê²½í–¥, ì—¬ë¡  ë™í–¥, ì´ìŠˆì˜ ì „ê°œ ê³¼ì •ì„ íŒŒì•…í•©ë‹ˆë‹¤.\n\nì•„ë˜ ì…ë ¥ê°’ì„ ë°”íƒ•ìœ¼ë¡œ, ëˆ„êµ¬ë„ ë‹¤ì‹œëŠ” ì›ë³¸ ë°ì´í„°ë¥¼ ë’¤ì§ˆ í•„ìš” ì—†ë„ë¡ ëª¨ë“  í•µì‹¬ ì¸ì‚¬ì´íŠ¸ì™€ ê·¼ê±°ë¥¼ ë°ì´í„° ê¸°ë°˜ ì‹œê°í™”ë¡œ ì¬êµ¬ì„±í•˜ì„¸ìš”.\n\n## ì…ë ¥ê°’\n- ì „ì²´ ë‰´ìŠ¤ í…ìŠ¤íŠ¸: {{ $json.allNewsBody }}\n\n## ì¶œë ¥ ê·œì¹™\n\n### 1. ë°ì´í„° ì¶©ì‹¤ì„±\n- ì…ë ¥ ë°ì´í„°ì—ì„œ ë“±ì¥í•˜ëŠ” ìˆ˜ì¹˜, ì¸ìš©, ê³ ìœ ëª…ì‚¬, íŠ¸ë Œë“œ í‚¤ì›Œë“œ, ì¶œì²˜ë¥¼ ë¹ ì§ì—†ì´ ì •ë¦¬\n- ì—†ëŠ” ì •ë³´ëŠ” ì„ì˜ë¡œ ì¶”ê°€ ê¸ˆì§€, ëª¨ë“  ë¶„ì„ ê²°ê³¼ëŠ” ì‹¤ì œ ê°’ë§Œ ì‚¬ìš©\n- TF-IDF, ì—°ê´€ì–´, ê°ì„± ë¶„ì„ ë“±ë„ ë°˜ë“œì‹œ ì‹¤ì œ ê³„ì‚° ê²°ê³¼ ê¸°ë°˜\n\n### 2. ì„¹ì…˜ êµ¬ì¡°(ì´ 8ê°œ, ìˆœì„œ ì—„ìˆ˜)\n- í•µì‹¬ ì¸ì‚¬ì´íŠ¸ (Executive Summary)\n- íŠ¸ë Œë“œ ë¶„ì„ (Trend Analysis)\n- ì—¬ë¡  ë™í–¥ ë° ë³´ë„ ê²½í–¥ (Public Sentiment & Media Coverage)\n- í‚¤ì›Œë“œ ë¶„ì„ (Keyword Analysis)\n- ê°ì„± ë¶„ì„ (Sentiment Analysis)\n- ì£¼ìš” ì´ìŠˆ ë° ì‚¬ë¡€ ì—°êµ¬ (Key Issues & Case Studies)\n- ì‚°ì—… ë° ì‹œì¥ ì‹œì‚¬ì  (Industry & Market Implications)\n- í–¥í›„ ì „ë§ ë° ì •ì±… ì œì–¸ (Outlook & Policy Recommendations)\n\n### 3. ê° ì„¹ì…˜ë§ˆë‹¤ ë‹¤ì–‘í•œ ì‹œê°ì  ë§ˆí¬ë‹¤ìš´ í¬ë§·ì„ ìˆœí™˜ ì‚¬ìš©\n- ì½œì•„ì›ƒ([!info], [!summary], [!warning] ë“±)\n- ì½œì•„ì›ƒì€ ë°˜ë“œì‹œ ì¸ìš© ë¸”ë¡(`> [!info] ì œëª©\\n> - ë‚´ìš©â€¦`) í˜•íƒœë¡œ ì‚¬ìš©\n- ì½œì•„ì›ƒì€ í—¤ë”©(##/###)ì—ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡!\n- ë¶ˆë ›Â·ë„˜ë²„ë§ ë¦¬ìŠ¤íŠ¸\n  - ## (ë©”ì¸ ì„¹ì…˜) ë‹¤ìŒ: ì²« ê³„ì¸µì€ ë„˜ë²„ë§ìœ¼ë¡œ í† ì¼\n  - ë‘ ë²ˆì§¸ ê³„ì¸µ: í•­ìƒ ë¶ˆë › í¬ì¸íŠ¸\n  - ê³„ì¸µì€ ìµœëŒ€ 2ë‹¨ê³„ê¹Œì§€ë§Œ\n  - í•µì‹¬ í•­ëª©ëª…(íŠ¸ë Œë“œ 1, ë°°ê²½, ë…¼ì  ë“±)ì€ êµµê²Œ ê°•ì¡°\n- í‘œ(ë§ˆí¬ë‹¤ìš´ í…Œì´ë¸”, ë“¤ì—¬ì“°ê¸°X)\n- ìˆ˜ì‹(LaTeX ë˜ëŠ” ì›ë¬¸ ì¸ìš©, ê³µì‹ ì§ì ‘ í‘œê¸°)\n- ì§§ì€ ë‹¨ë½, ê°•ì¡°ë¬¸ì¥\n- ì ˆëŒ€ ë‘ ì„¹ì…˜ì—ì„œ ê°™ì€ í¬ë§·ì´ ì—°ì†ë˜ì§€ ì•Šë„ë¡!\n- ë¶ˆë › í¬ì¸íŠ¸ ê³„ì¸µì€ 2ê³„ì¸µê¹Œì§€ë§Œ\n- ë©”ì¸ ì„¹ì…˜ í—¤ë”©(##) í˜•ì‹: ## <font color=\"#ffc000\">ì„¹ì…˜ëª…</font>\n- ì¤‘ìš”: í—¤ë”©ì— ë„˜ë²„ë§(1., 2., 3. ë“±) ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€\n- ì˜¬ë°”ë¥¸ ì˜ˆì‹œ: ## <font color=\"#ffc000\">íŠ¸ë Œë“œ ë¶„ì„</font>\n- ì˜ëª»ëœ ì˜ˆì‹œ: ## <font color=\"#ffc000\">2. íŠ¸ë Œë“œ ë¶„ì„</font>\n- ë§ˆí¬ë‹¤ìš´ ëì— \"ìš”ì•½:\", \"íƒœê·¸:\" ì¶”ê°€ ê¸ˆì§€!\n- ì¢…í•© ì¸ì‚¬ì´íŠ¸ ë° ì œì–¸ ì„¹ì…˜ì´ ë§ˆì§€ë§‰!\n- ë§ˆí¬ë‹¤ìš´ ëì— --- êµ¬ë¶„ì„  ì¶”ê°€ ê¸ˆì§€!\n- ë¬¸ì„œ ì „ì²´ì—ë„ --- êµ¬ë¶„ì„  ì‚¬ìš© ê¸ˆì§€!\n- í—¤ë”©(##) ë°”ë¡œ ì•„ë˜ì—ëŠ” â€˜ê³µë°± ì¤„(ì—”í„° 1íšŒ)â€™ë§Œ ë„£ê³ , ì ˆëŒ€ ë‘ ì¤„ ì´ìƒ ë„ìš°ì§€ ì•Šë„ë¡!\n- ì˜ˆì‹œ\n## í—¤ë”© ì˜ˆì‹œ\n\n> [!info] ì½œì•„ì›ƒ\n> - ë‚´ìš©\n\n## ë‹¤ìŒ í—¤ë”©\n\n- ë¦¬ìŠ¤íŠ¸ í•­ëª©\n\n### 4. ì–¸ì–´ ë° ë¬¸ì²´\n- ìœ ì°½í•˜ê³  ì „ë¬¸ì ì¸ í•œêµ­ì–´ë¡œë§Œ ì‘ì„±, ê¸°ìˆ /ê³ ìœ ëª…ì‚¬ ì›ë¬¸ ë³‘ê¸° ê°€ëŠ¥\n- ì¸ìš©/ìˆ˜ì¹˜/ì§ì ‘ íŠ¸ë Œë“œ ë‹¨ì–´/ëŒ€í‘œ í‚¤ì›Œë“œ ë°˜ë“œì‹œ ê° ì„¹ì…˜ì— 1íšŒ ì´ìƒ í¬í•¨\n- ë¶ˆí•„ìš”í•œ ê´‘ê³ , ì•ˆë‚´, ê°ìƒ, ì„¤ëª…ì„± ë©˜íŠ¸ ì¼ì ˆ ê¸ˆì§€\n- í†¤ì•¤ë§¤ë„ˆëŠ” ëª…í™•í•˜ê³  ì§ê´€ì ì¸ í‘œí˜„ ë“œë³„ 300~400ì)\n    - ì´ íŠ¸ë Œë“œê°€ ì‹œì¥/ì‚°ì—…/ë¬¸í™”ì— ë¯¸ì¹˜ëŠ” ì˜í–¥\n    - ë‹¤ë¥¸ íŠ¸ë Œë“œì™€ì˜ ì—°ê´€ì„±\n    - ì§€ì† ê°€ëŠ¥ì„± ë˜ëŠ” ì¼ì‹œì„± í‰ê°€\n\n### 5. ì¶œë ¥ ê¸¸ì´\n- ì „ì²´ ê¸€ì ìˆ˜ 22,000~30,000ì(ë°˜ë³µ/ìˆ˜ì‹ì–´ ê¸ˆì§€, ì‹¤ì œ ë°ì´í„°ë¡œë§Œ)\n- ìµœëŒ€ í† í° ëª¨ë‘ ì‚¬ìš©\n\n### 6. ë¶„ì„ ë‚´ìš© ìƒì„¸ ì˜ˆì‹œ\n\n#### í•µì‹¬ ì¸ì‚¬ì´íŠ¸\n- ë¶ˆë › í¬ì¸íŠ¸: ì „ì²´ ë¶„ì„ì˜ í•µì‹¬ ìš”ì•½ (800~1,200ì)\n  - ê°€ì¥ ì¤‘ìš”í•œ íŠ¸ë Œë“œ 3ê°€ì§€\n  - ì—¬ë¡ /ê°ì„± ë¶„í¬ì˜ í•µì‹¬ ë©”ì‹œì§€\n  - ì‚°ì—…/ì‹œì¥ì— ë¯¸ì¹˜ëŠ” ì£¼ìš” ì‹œì‚¬ì \n  - í–¥í›„ ì „ë§ í•œ ì¤„ ìš”ì•½\n- ì½œì•„ì›ƒ: í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½\n  - ì½œì•„ì›ƒ íƒ€ì…: [!summary]\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€: í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½\n  - ì´ ë‰´ìŠ¤ ê±´ìˆ˜\n  - ì£¼ìš” íŠ¸ë Œë“œ 5ê°œ ë¦¬ìŠ¤íŠ¸\n  - ì—¬ë¡  ë¶„í¬ (ê¸ì •/ì¤‘ë¦½/ë¶€ì •)\n  - ê°ì„± ë¶„í¬\n  - ìƒìœ„ í‚¤ì›Œë“œ Top 5\n\n#### íŠ¸ë Œë“œ ë¶„ì„\n- ì „ì²´ ë‰´ìŠ¤ì—ì„œ ë°œê²¬ëœ ì£¼ìš” íŠ¸ë Œë“œ 5ê°œ\n- ê° íŠ¸ë Œë“œ êµ¬ì¡°:\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!info], [!abstract], [!example], [!question], [!summary]\n    - ì½œì•„ì›ƒ íƒ€ì´í‹€ì— íŠ¸ë Œë“œ ì œëª© í¬í•¨\n    - ì˜ˆì‹œ: > [!info] K-ì½˜í…ì¸ ì˜ ê¸€ë¡œë²Œ ì‹ ë“œë¡¬í™”\n    - ë³´ë„ ë¹„ì¤‘(%)\n    - íŠ¹ì§• ìš”ì•½\n    - ì›ë¬¸ ì¸ìš© 2~3ê°œ\n  - ì½œì•„ì›ƒ ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ë¶ˆë › í¬ì¸íŠ¸: íŠ¸ë Œë“œ í•´ì„ (1,200~1,500ì)\n    - ì´ íŠ¸ë Œë“œê°€ ì‹œì¥/ì‚°ì—…/ë¬¸í™”ì— ë¯¸ì¹˜ëŠ” ì˜í–¥\n    - ë‹¤ë¥¸ íŠ¸ë Œë“œì™€ì˜ ì—°ê´€ì„±\n    - ì§€ì† ê°€ëŠ¥ì„± ë˜ëŠ” ì¼ì‹œì„± í‰ê°€\n\n#### ì—¬ë¡  ë™í–¥ ë° ë³´ë„ ê²½í–¥\n- ê¸ì •/ì¤‘ë¦½/ë¶€ì • ì—¬ë¡  ë¶„ì„\n- ë¶ˆë › í¬ì¸íŠ¸: ì—¬ë¡  ì „ì²´ êµ¬ì¡° í•´ì„ (400~600ì)\n  - ê¸ì •/ì¤‘ë¦½/ë¶€ì • ë¹„ìœ¨ì˜ ì˜ë¯¸\n  - ì—¬ë¡  ë¶„í¬ê°€ ê· í˜•ì ì¸ì§€ í¸í–¥ì ì¸ì§€ í‰ê°€\n  - ë³´ë„ í”„ë ˆì„ì´ ì—¬ë¡ ì— ë¯¸ì¹œ ì˜í–¥\n  - ì‹œê°„ íë¦„ì— ë”°ë¥¸ ì—¬ë¡  ë³€í™” ì¶”ì •\n- í‘œ: ì—¬ë¡  ìœ í˜•ë³„ ë¹„ì¤‘ ë° ì£¼ìš” í‚¤ì›Œë“œ\n| ì—¬ë¡  ìœ í˜• | ë¹„ì¤‘ | ì£¼ìš” í‚¤ì›Œë“œ |\n|----------|------|------------|\n| ê¸ì • | XX% | í‚¤ì›Œë“œ1, í‚¤ì›Œë“œ2, í‚¤ì›Œë“œ3 |\n| ì¤‘ë¦½ | XX% | í‚¤ì›Œë“œ1, í‚¤ì›Œë“œ2, í‚¤ì›Œë“œ3 |\n| ë¶€ì • | XX% | í‚¤ì›Œë“œ1, í‚¤ì›Œë“œ2, í‚¤ì›Œë“œ3 |\n\n- ê° ì—¬ë¡  êµ¬ì¡°:\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!tip] ê¸ì •, [!note] ì¤‘ë¦½, [!warning] ë¶€ì •)\n    - ì½œì•„ì›ƒ íƒ€ì´í‹€ì— ì—¬ë¡  ìœ í˜• ì œëª© í¬í•¨\n    - ì˜ˆì‹œ: > [!tip] ê¸ì • ì—¬ë¡ : K-ì½˜í…ì¸  ì‹ ë“œë¡¬ê³¼ ìë¶€ì‹¬\n    - í•µì‹¬ íŠ¹ì§•\n    - ì£¼ìš” ë³´ë„ í”„ë ˆì„ (ë¬¸í™” í˜„ìƒ, ì‚°ì—… ë™í–¥, ì‚¬íšŒ ë¹„í‰, ì†Œë¹„ ìœ í–‰ ë“±)\n    - ìœ í˜•ë³„ ëŒ€í‘œ ì¸ìš© (ê¸ì • 5, ë¶€ì • 3, ì¤‘ë¦½ 2)\n\n#### í‚¤ì›Œë“œ ë¶„ì„\n- ë¶ˆë › í¬ì¸íŠ¸: í‚¤ì›Œë“œ ì „ì²´ íŒ¨í„´ í•´ì„ (500~700ì)\n  - ìƒìœ„ í‚¤ì›Œë“œ êµ°ì§‘ ë¶„ì„ (ì½˜í…ì¸ /ì†Œë¹„/ì‚°ì—… ë“±)\n  - í‚¤ì›Œë“œ ê°„ ì—°ê´€ì„± (ì˜ˆ: ì¼€ë°í—Œ â†’ í—ŒíŠ¸ë¦­ìŠ¤ â†’ ê³¨ë“ )\n  - ì˜ˆìƒ ì™¸ í‚¤ì›Œë“œì˜ ë“±ì¥ ë°°ê²½\n  - í‚¤ì›Œë“œ ë¶„í¬ì˜ ê· í˜•ì„± í‰ê°€\n- í‘œ: ìƒìœ„ 20ê°œ í‚¤ì›Œë“œ (ìˆœìœ„ | í‚¤ì›Œë“œ | TF-IDF ì ìˆ˜)\n- ì½œì•„ì›ƒ: í‚¤ì›Œë“œ êµ°ì§‘ íŒ¨í„´ í•´ì„\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€ ì œëª© í¬í•¨\n  - ì‘í’ˆëª…/ìºë¦­í„° êµ°ì§‘\n  - ì†Œë¹„ í˜„ìƒ êµ°ì§‘\n  - ì‚°ì—…/ì‹œì¥ êµ°ì§‘\n  - ë¬¸í™”/ì‚¬íšŒ êµ°ì§‘\n- ì½œì•„ì›ƒ: ìˆ˜ì§‘ í‚¤ì›Œë“œë³„ ì´ìŠˆ ë¶„í¬\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€ ì œëª© í¬í•¨\n  - ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤/ì¼€ë°í—Œ\n  - í—ŒíŠ¸ë¦­ìŠ¤\n  - ê¹€ë°¥ì±Œë¦°ì§€\n\n#### ê°ì„± ë¶„ì„\n- í‘œ: ê°ì„± ë¶„í¬ (ìœ í˜• | ë¹„ìœ¨ | ëŒ€í‘œ í‚¤ì›Œë“œ Top 10)\n| ê°ì„± ìœ í˜• | ë¹„ìœ¨ | ëŒ€í‘œ í‚¤ì›Œë“œ Top 10 |\n|----------|------|-------------------|\n| ê¸ì • | 68% | ê°ë™, ìë¶€ì‹¬, ì‹ ë“œë¡¬, í˜ì‹ , ì„±ì¥, ê³µê°, ì—´í’, ì„±ê³µ, ì¦ê±°ì›€, ê¸°ëŒ€ê° |\n| ì¤‘ë¦½ | 21% | ì •ë³´, í˜„ìƒ, ê¸°ë¡, í˜‘ì—…, ì†Œë¹„, í™•ì‚°, íŠ¸ë Œë“œ, ì²´í—˜, ë¶„ì„, í˜„ì¥ |\n| ë¶€ì • | 11% | ìœ„í—˜, ë…¼ë€, ìƒì—…í™”, í’ˆê·€, ì§í‰, ì›ì¡°, ì•ˆì „, ìš°ë ¤, í•œê³„, ë¹„íŒ |\n\n- ë¶ˆë › í¬ì¸íŠ¸: ê°ì„± ì „ì²´ ë¶„í¬ í•´ì„ (500~700ì)\n  - ê¸ì • 68%ì˜ ì˜ë¯¸ (ì¼ë°˜ì  ë‰´ìŠ¤ ëŒ€ë¹„ ë†’ì€/ë‚®ì€ ìˆ˜ì¤€?)\n  - ë¶€ì • 11%ê°€ ì‹œì‚¬í•˜ëŠ” ë°” (ë¦¬ìŠ¤í¬ ìš”ì¸)\n  - ì¤‘ë¦½ 21%ì˜ ì—­í•  (ì •ë³´ ì „ë‹¬í˜• ë³´ë„ì˜ ë¹„ì¤‘)\n  - ê°ì„± ë¶„í¬ê°€ í–¥í›„ íŠ¸ë Œë“œì— ë¯¸ì¹  ì˜í–¥\n- ì½œì•„ì›ƒ: ê°ì„±ë³„ í•µì‹¬ ë¬¸ë§¥\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!tip] ê¸ì •, [!note] ì¤‘ë¦½, [!warning] ë¶€ì •)\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€ ì œëª© í¬í•¨\n  - ê¸ì • ê°ì„±ì˜ ì˜ë¯¸ (ê¸€ë¡œë²Œ ìœ„ìƒ, ì‚°ì—… íŒŒê¸‰ë ¥ ë“±)\n  - ë¶€ì • ê°ì„±ì˜ ì›ì¸ (ë¬¸í™” í¬ì„, ì•ˆì „ ìš°ë ¤, ì—­ëŸ‰ í•œê³„ ë“±)\n  - ì¤‘ë¦½ ê°ì„±ì˜ íŠ¹ì§• (ì •ë³´ ì „ë‹¬, í˜„í™© ë¶„ì„ ë“±)\n  - ê°ì„±ë³„ ëŒ€í‘œ ì¸ìš© (ê¸ì • 5, ë¶€ì • 3, ì¤‘ë¦½ 2)\n\n#### ì£¼ìš” ì´ìŠˆ ë° ì‚¬ë¡€ ì—°êµ¬\n- ì£¼ìš” ì´ìŠˆ 3~5ê°œ ì„ ì • (ì‚°ì—…/ì—¬ë¡ /ìœ í–‰/ë¬¸í™” ë“± ë‹¤ê°ë„)\n- ì£¼ìš” ì´ìŠˆì˜ í•µì‹¬ ë…¼ì \n- ì£¼ìš” ì´ìŠˆë³„ ì›ë¬¸ ì¸ìš© 2~3ê°œ\n- ê° ì´ìŠˆ êµ¬ì¡°:\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!info], [!abstract], [!example], [!question], [!summary]\n    - ì½œì•„ì›ƒ íƒ€ì´í‹€ì— ì£¼ìš” ì´ìŠˆ ì œëª© í¬í•¨\n    - ì˜ˆì‹œ: > [!example] ê·¸ë˜ë¯¸ ë³¸ìƒ í›„ë³´ ë“±ê·¹: KíŒÂ·Kì½˜í…ì¸ ì˜ ì£¼ë¥˜ ì§„ì…\n    - í•µì‹¬ ë‚´ìš©\n    - ì„¸ë¶€ ë¶„ì„\n    - ì£¼ìš” ìˆ˜ì¹˜/ì‚¬ë¡€\n    - ëŒ€í‘œ ì¸ìš© 2~3ê°œ\n  - ì½œì•„ì›ƒ ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ë¶ˆë › í¬ì¸íŠ¸: ì´ìŠˆ í•´ì„ (1,200~1,500ì)\n    - ì´ ì´ìŠˆê°€ ì‚°ì—…/ë¬¸í™”/ì†Œë¹„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥\n    - ë‹¤ë¥¸ ì´ìŠˆì™€ì˜ ì—°ê´€ì„±\n    - í–¥í›„ ì „ê°œ ë°©í–¥ ì˜ˆì¸¡\n\n#### ì‚°ì—… ë° ì‹œì¥ ì‹œì‚¬ì \n- í‘œ 1: SWOT ë¶„ì„ ë§¤íŠ¸ë¦­ìŠ¤\n| êµ¬ë¶„ | ê¸°íšŒ (Opportunities) | ìœ„í—˜ (Threats) |\n|------|---------------------|----------------|\n| ì½˜í…ì¸  ì‚°ì—… | ... | ... |\n| ì†Œë¹„ ì‹œì¥ | ... | ... |\n| ë¬¸í™” íŠ¸ë Œë“œ | ... | ... |\n- í‘œ 2: ê°€ì¹˜ì‚¬ìŠ¬ë³„ ì‹œì‚¬ì \n| ë‹¨ê³„ | í•µì‹¬ ì‹œì‚¬ì  | ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ | ì„±ê³µ ìš”ì¸ |\n|------|------------|--------------|-----------|\n| ì œì‘Â·ê¸°íš | ... | ... | ... |\n| ìœ í†µÂ·í™•ì‚° | ... | ... | ... |\n| ì†Œë¹„Â·ì°¸ì—¬ | ... | ... | ... |\n| íŒŒê¸‰Â·ì—°ê³„ | ... | ... | ... |\n- ë¶ˆë › í¬ì¸íŠ¸: í•µì‹¬ ì„±ê³µ ìš”ì¸ ë° ì¸ìš© 2~3ê°œ\n- ë¶ˆë › í¬ì¸íŠ¸: ì£¼ìš” ìœ„í—˜ ìš”ì¸ ë° ì¸ìš© 2~3ê°œ\n\n#### í–¥í›„ ì „ë§ ë° ì •ì±… ì œì–¸\n- ì½œì•„ì›ƒ: ì¤‘ë‹¨ê¸°\n  - ë‹¨ê¸° (1~2ë…„)\n  - ì¤‘ì¥ê¸° (3~5ë…„)\n- ë¶ˆë › í¬ì¸íŠ¸: ëŒ€ìƒë³„ ì œì–¸ (ê° ëŒ€ìƒë³„ 500~700ì)\n  - ë„˜ë²„ë§ í˜•ì‹: 1. ê¸°ì—…, 2. ì •ì±…, 3. ì†Œë¹„ì\n  - ê° ëŒ€ìƒ ì•„ë˜ í•˜ìœ„ ë¶ˆë ›ìœ¼ë¡œ ì œì–¸ ë‚˜ì—´\n  - ê³„ì¸µ: ë³¼ë“œ ë„˜ë²„ë§ â†’ ë¶ˆë ›(-), ì´ 2ë‹¨ê³„\n  - ê¸°ì—…: 3~5ê°œ ì œì–¸ (ê° í•œ ì¤„)\n  - ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ì •ì±…: 2~3ê°œ ì œì–¸ (ê° í•œ ì¤„)\n  - ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ì†Œë¹„ì: 2~3ê°œ ì œì–¸ (ê° í•œ ì¤„)\n\n### 7. JSON ì¶œë ¥ êµ¬ì¡° (í•„ìˆ˜)\nì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ ì¶œë ¥í•˜ì„¸ìš”:\n\n```json\n{\n  \"id\": \"[ê³ ìœ ê°’]\",\n  \"title\": \"[íŠ¸ë Œë“œ ë¶„ì„ ì£¼ì œì˜ ìì—°ìŠ¤ëŸ¬ìš´ í•œê¸€ ì œëª©]\",\n  \"content\": \"[ê³„ì¸µì  ë§ˆí¬ë‹¤ìš´ êµ¬ì¡°, ê·œì¹™ 100% ì ìš©, 18,000~25,000ì]\",\n  \"tags\": [\"íŠ¸ë Œë“œ\", \"ë‰´ìŠ¤ë¶„ì„\", \"ì‚°ì—…\", \"ì—¬ë¡ \", \"K-ì½˜í…ì¸ \", \"ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤\", ...]  // ìµœëŒ€ 10ê°œ\n}"
        }
      },
      "id": "abad9b94-8631-46f6-9a5b-dca39cc945e7",
      "name": "Zettlekasten Obsidian Note",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        928,
        -928
      ],
      "typeVersion": 1.7
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "87dfd91b-a554-4c30-9ffe-2aa903808ee4",
              "name": "markdown_file",
              "value": "={{ $json.output.tags.map(t => `#${t}`).join(' ') }}\n\n![](https://www.news1.kr/_next/image?url=https%3A%2F%2Fi3n.news1.kr%2Fsystem%2Fphotos%2F2025%2F9%2F2%2F7472237%2Fhigh.jpg&w=1920&q=75)\n\n{{ $json.output.content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1232,
        -928
      ],
      "id": "7436c437-781e-44b7-8259-3c1deba1534d",
      "name": "Combine Content"
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "markdown_file",
        "options": {
          "fileName": "={{ $('Zettlekasten Obsidian Note').item.json.output.title }}"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        1424,
        -928
      ],
      "id": "5b66fa95-3dde-43a4-a7b0-ce828341d5c0",
      "name": "Create File"
    },
    {
      "parameters": {
        "name": "={{ $('Zettlekasten Obsidian Note').item.json.output.title }}.md",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1k5YKP_LGaUHzTvP0hvuw9lSCVuFw3a8d",
          "mode": "list",
          "cachedResultName": "íŠ¸ë Œë“œ ë¦¬ì„œì¹˜",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1k5YKP_LGaUHzTvP0hvuw9lSCVuFw3a8d"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1616,
        -928
      ],
      "id": "b0edaa72-0483-4f9e-898a-8ce35dbd6104",
      "name": "Upload file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "BjmMmbCV1dlYbqNW",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {
          "maxTokens": 32768,
          "temperature": 0.2,
          "timeout": 180000,
          "topP": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        928,
        -768
      ],
      "id": "f84516ac-d155-4d3e-af69-81197d7754e8",
      "name": "Obsidian Model",
      "credentials": {
        "openAiApi": {
          "id": "GU4Fc8aV2Jc3O9Mo",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"id\": { \"type\": \"string\" },\n    \"title\": { \"type\": \"string\" },\n    \"content\": { \"type\": \"string\" },\n    \"tags\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    }\n  },\n  \"required\": [\"id\", \"title\", \"content\", \"tags\"]\n}"
      },
      "id": "26132278-c04b-42dc-8490-e1f9d0585325",
      "name": "Obsidian Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1072,
        -768
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=allNewBody: {{ $json.allNewsBody }}\nkeywordPageId: {{ $json.keywordPageId }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=ë‹¹ì‹ ì€ ë§¤ìš° ê¼¼ê¼¼í•˜ê³  ë¶„ì„ì ì¸ ê¸€ë¡œë²Œ ë‰´ìŠ¤ íŠ¸ë Œë“œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\nêµ¬ê¸€ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì–¸ë¡ ì˜ ë³´ë„ ê²½í–¥, ì—¬ë¡  ë™í–¥, ì´ìŠˆì˜ ì „ê°œ ê³¼ì •ì„ íŒŒì•…í•©ë‹ˆë‹¤.\n\nì•„ë˜ ì…ë ¥ê°’ì„ ë°”íƒ•ìœ¼ë¡œ, ëˆ„êµ¬ë„ ë‹¤ì‹œëŠ” ì›ë³¸ ë°ì´í„°ë¥¼ ë’¤ì§ˆ í•„ìš” ì—†ë„ë¡ ëª¨ë“  í•µì‹¬ ì¸ì‚¬ì´íŠ¸ì™€ ê·¼ê±°ë¥¼ ë°ì´í„° ê¸°ë°˜ ì‹œê°í™”ë¡œ ì¬êµ¬ì„±í•˜ì„¸ìš”.\n\n## ì…ë ¥ê°’\n- ì „ì²´ ë‰´ìŠ¤ í…ìŠ¤íŠ¸: {{ $json.allNewsBody }}\n\n## ì¶œë ¥ ê·œì¹™\n\n### 1. ë°ì´í„° ì¶©ì‹¤ì„±\n- ì…ë ¥ ë°ì´í„°ì—ì„œ ë“±ì¥í•˜ëŠ” ìˆ˜ì¹˜, ì¸ìš©, ê³ ìœ ëª…ì‚¬, íŠ¸ë Œë“œ í‚¤ì›Œë“œ, ì¶œì²˜ë¥¼ ë¹ ì§ì—†ì´ ì •ë¦¬\n- ì—†ëŠ” ì •ë³´ëŠ” ì„ì˜ë¡œ ì¶”ê°€ ê¸ˆì§€, ëª¨ë“  ë¶„ì„ ê²°ê³¼ëŠ” ì‹¤ì œ ê°’ë§Œ ì‚¬ìš©\n- TF-IDF, ì—°ê´€ì–´, ê°ì„± ë¶„ì„ ë“±ë„ ë°˜ë“œì‹œ ì‹¤ì œ ê³„ì‚° ê²°ê³¼ ê¸°ë°˜\n\n### 2. ì„¹ì…˜ êµ¬ì¡°(ì´ 8ê°œ, ìˆœì„œ ì—„ìˆ˜)\n- í•µì‹¬ ì¸ì‚¬ì´íŠ¸ (Executive Summary)\n- íŠ¸ë Œë“œ ë¶„ì„ (Trend Analysis)\n- ì—¬ë¡  ë™í–¥ ë° ë³´ë„ ê²½í–¥ (Public Sentiment & Media Coverage)\n- í‚¤ì›Œë“œ ë¶„ì„ (Keyword Analysis)\n- ê°ì„± ë¶„ì„ (Sentiment Analysis)\n- ì£¼ìš” ì´ìŠˆ ë° ì‚¬ë¡€ ì—°êµ¬ (Key Issues & Case Studies)\n- ì‚°ì—… ë° ì‹œì¥ ì‹œì‚¬ì  (Industry & Market Implications)\n- í–¥í›„ ì „ë§ ë° ì •ì±… ì œì–¸ (Outlook & Policy Recommendations)\n\n### 3. ê° ì„¹ì…˜ë§ˆë‹¤ ë‹¤ì–‘í•œ ì‹œê°ì  ë§ˆí¬ë‹¤ìš´ í¬ë§·ì„ ìˆœí™˜ ì‚¬ìš©\n- ì½œì•„ì›ƒ([!info], [!summary], [!warning] ë“±)\n- ì½œì•„ì›ƒì€ ë°˜ë“œì‹œ ì¸ìš© ë¸”ë¡(`> [!info] ì œëª©\\n> - ë‚´ìš©â€¦`) í˜•íƒœë¡œ ì‚¬ìš©\n- ì½œì•„ì›ƒì€ í—¤ë”©(##/###)ì—ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡!\n- ë¶ˆë ›Â·ë„˜ë²„ë§ ë¦¬ìŠ¤íŠ¸\n  - ## (ë©”ì¸ ì„¹ì…˜) ë‹¤ìŒ: ì²« ê³„ì¸µì€ ë„˜ë²„ë§ìœ¼ë¡œ í† ì¼\n  - ë‘ ë²ˆì§¸ ê³„ì¸µ: í•­ìƒ ë¶ˆë › í¬ì¸íŠ¸\n  - ê³„ì¸µì€ ìµœëŒ€ 2ë‹¨ê³„ê¹Œì§€ë§Œ\n  - í•µì‹¬ í•­ëª©ëª…(íŠ¸ë Œë“œ 1, ë°°ê²½, ë…¼ì  ë“±)ì€ êµµê²Œ ê°•ì¡°\n- í‘œ(ë§ˆí¬ë‹¤ìš´ í…Œì´ë¸”, ë“¤ì—¬ì“°ê¸°X)\n- ìˆ˜ì‹(LaTeX ë˜ëŠ” ì›ë¬¸ ì¸ìš©, ê³µì‹ ì§ì ‘ í‘œê¸°)\n- ì§§ì€ ë‹¨ë½, ê°•ì¡°ë¬¸ì¥\n- ì ˆëŒ€ ë‘ ì„¹ì…˜ì—ì„œ ê°™ì€ í¬ë§·ì´ ì—°ì†ë˜ì§€ ì•Šë„ë¡!\n- ë¶ˆë › í¬ì¸íŠ¸ ê³„ì¸µì€ 2ê³„ì¸µê¹Œì§€ë§Œ\n- ë©”ì¸ ì„¹ì…˜ í—¤ë”©(##) í˜•ì‹: ## <font color=\"#ffc000\">ì„¹ì…˜ëª…</font>\n- ì¤‘ìš”: í—¤ë”©ì— ë„˜ë²„ë§(1., 2., 3. ë“±) ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€\n- ì˜¬ë°”ë¥¸ ì˜ˆì‹œ: ## <font color=\"#ffc000\">íŠ¸ë Œë“œ ë¶„ì„</font>\n- ì˜ëª»ëœ ì˜ˆì‹œ: ## <font color=\"#ffc000\">2. íŠ¸ë Œë“œ ë¶„ì„</font>\n- ë§ˆí¬ë‹¤ìš´ ëì— \"ìš”ì•½:\", \"íƒœê·¸:\" ì¶”ê°€ ê¸ˆì§€!\n- ì¢…í•© ì¸ì‚¬ì´íŠ¸ ë° ì œì–¸ ì„¹ì…˜ì´ ë§ˆì§€ë§‰!\n- ë§ˆí¬ë‹¤ìš´ ëì— --- êµ¬ë¶„ì„  ì¶”ê°€ ê¸ˆì§€!\n- ë¬¸ì„œ ì „ì²´ì—ë„ --- êµ¬ë¶„ì„  ì‚¬ìš© ê¸ˆì§€!\n- í—¤ë”©(##) ë°”ë¡œ ì•„ë˜ì—ëŠ” â€˜ê³µë°± ì¤„(ì—”í„° 1íšŒ)â€™ë§Œ ë„£ê³ , ì ˆëŒ€ ë‘ ì¤„ ì´ìƒ ë„ìš°ì§€ ì•Šë„ë¡!\n- ì˜ˆì‹œ\n## í—¤ë”© ì˜ˆì‹œ\n\n> [!info] ì½œì•„ì›ƒ\n> - ë‚´ìš©\n\n## ë‹¤ìŒ í—¤ë”©\n\n- ë¦¬ìŠ¤íŠ¸ í•­ëª©\n\n### 4. ì–¸ì–´ ë° ë¬¸ì²´\n- ìœ ì°½í•˜ê³  ì „ë¬¸ì ì¸ í•œêµ­ì–´ë¡œë§Œ ì‘ì„±, ê¸°ìˆ /ê³ ìœ ëª…ì‚¬ ì›ë¬¸ ë³‘ê¸° ê°€ëŠ¥\n- ì¸ìš©/ìˆ˜ì¹˜/ì§ì ‘ íŠ¸ë Œë“œ ë‹¨ì–´/ëŒ€í‘œ í‚¤ì›Œë“œ ë°˜ë“œì‹œ ê° ì„¹ì…˜ì— 1íšŒ ì´ìƒ í¬í•¨\n- ë¶ˆí•„ìš”í•œ ê´‘ê³ , ì•ˆë‚´, ê°ìƒ, ì„¤ëª…ì„± ë©˜íŠ¸ ì¼ì ˆ ê¸ˆì§€\n- í†¤ì•¤ë§¤ë„ˆëŠ” ëª…í™•í•˜ê³  ì§ê´€ì ì¸ í‘œí˜„ ë“œë³„ 300~400ì)\n    - ì´ íŠ¸ë Œë“œê°€ ì‹œì¥/ì‚°ì—…/ë¬¸í™”ì— ë¯¸ì¹˜ëŠ” ì˜í–¥\n    - ë‹¤ë¥¸ íŠ¸ë Œë“œì™€ì˜ ì—°ê´€ì„±\n    - ì§€ì† ê°€ëŠ¥ì„± ë˜ëŠ” ì¼ì‹œì„± í‰ê°€\n\n### 5. ì¶œë ¥ ê¸¸ì´\n- ì „ì²´ ê¸€ì ìˆ˜ 22,000~30,000ì(ë°˜ë³µ/ìˆ˜ì‹ì–´ ê¸ˆì§€, ì‹¤ì œ ë°ì´í„°ë¡œë§Œ)\n- ìµœëŒ€ í† í° ëª¨ë‘ ì‚¬ìš©\n\n### 6. ë¶„ì„ ë‚´ìš© ìƒì„¸ ì˜ˆì‹œ\n\n#### í•µì‹¬ ì¸ì‚¬ì´íŠ¸\n- ë¶ˆë › í¬ì¸íŠ¸: ì „ì²´ ë¶„ì„ì˜ í•µì‹¬ ìš”ì•½ (800~1,200ì)\n  - ê°€ì¥ ì¤‘ìš”í•œ íŠ¸ë Œë“œ 3ê°€ì§€\n  - ì—¬ë¡ /ê°ì„± ë¶„í¬ì˜ í•µì‹¬ ë©”ì‹œì§€\n  - ì‚°ì—…/ì‹œì¥ì— ë¯¸ì¹˜ëŠ” ì£¼ìš” ì‹œì‚¬ì \n  - í–¥í›„ ì „ë§ í•œ ì¤„ ìš”ì•½\n- ì½œì•„ì›ƒ: í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½\n  - ì½œì•„ì›ƒ íƒ€ì…: [!summary]\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€: í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½\n  - ì´ ë‰´ìŠ¤ ê±´ìˆ˜\n  - ì£¼ìš” íŠ¸ë Œë“œ 5ê°œ ë¦¬ìŠ¤íŠ¸\n  - ì—¬ë¡  ë¶„í¬ (ê¸ì •/ì¤‘ë¦½/ë¶€ì •)\n  - ê°ì„± ë¶„í¬\n  - ìƒìœ„ í‚¤ì›Œë“œ Top 5\n\n#### íŠ¸ë Œë“œ ë¶„ì„\n- ì „ì²´ ë‰´ìŠ¤ì—ì„œ ë°œê²¬ëœ ì£¼ìš” íŠ¸ë Œë“œ 5ê°œ\n- ê° íŠ¸ë Œë“œ êµ¬ì¡°:\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!info], [!abstract], [!example], [!question], [!summary]\n    - ì½œì•„ì›ƒ íƒ€ì´í‹€ì— íŠ¸ë Œë“œ ì œëª© í¬í•¨\n    - ì˜ˆì‹œ: > [!info] K-ì½˜í…ì¸ ì˜ ê¸€ë¡œë²Œ ì‹ ë“œë¡¬í™”\n    - ë³´ë„ ë¹„ì¤‘(%)\n    - íŠ¹ì§• ìš”ì•½\n    - ì›ë¬¸ ì¸ìš© 2~3ê°œ\n  - ì½œì•„ì›ƒ ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ë¶ˆë › í¬ì¸íŠ¸: íŠ¸ë Œë“œ í•´ì„ (1,200~1,500ì)\n    - ì´ íŠ¸ë Œë“œê°€ ì‹œì¥/ì‚°ì—…/ë¬¸í™”ì— ë¯¸ì¹˜ëŠ” ì˜í–¥\n    - ë‹¤ë¥¸ íŠ¸ë Œë“œì™€ì˜ ì—°ê´€ì„±\n    - ì§€ì† ê°€ëŠ¥ì„± ë˜ëŠ” ì¼ì‹œì„± í‰ê°€\n\n#### ì—¬ë¡  ë™í–¥ ë° ë³´ë„ ê²½í–¥\n- ê¸ì •/ì¤‘ë¦½/ë¶€ì • ì—¬ë¡  ë¶„ì„\n- ë¶ˆë › í¬ì¸íŠ¸: ì—¬ë¡  ì „ì²´ êµ¬ì¡° í•´ì„ (400~600ì)\n  - ê¸ì •/ì¤‘ë¦½/ë¶€ì • ë¹„ìœ¨ì˜ ì˜ë¯¸\n  - ì—¬ë¡  ë¶„í¬ê°€ ê· í˜•ì ì¸ì§€ í¸í–¥ì ì¸ì§€ í‰ê°€\n  - ë³´ë„ í”„ë ˆì„ì´ ì—¬ë¡ ì— ë¯¸ì¹œ ì˜í–¥\n  - ì‹œê°„ íë¦„ì— ë”°ë¥¸ ì—¬ë¡  ë³€í™” ì¶”ì •\n- í‘œ: ì—¬ë¡  ìœ í˜•ë³„ ë¹„ì¤‘ ë° ì£¼ìš” í‚¤ì›Œë“œ\n| ì—¬ë¡  ìœ í˜• | ë¹„ì¤‘ | ì£¼ìš” í‚¤ì›Œë“œ |\n|----------|------|------------|\n| ê¸ì • | XX% | í‚¤ì›Œë“œ1, í‚¤ì›Œë“œ2, í‚¤ì›Œë“œ3 |\n| ì¤‘ë¦½ | XX% | í‚¤ì›Œë“œ1, í‚¤ì›Œë“œ2, í‚¤ì›Œë“œ3 |\n| ë¶€ì • | XX% | í‚¤ì›Œë“œ1, í‚¤ì›Œë“œ2, í‚¤ì›Œë“œ3 |\n\n- ê° ì—¬ë¡  êµ¬ì¡°:\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!tip] ê¸ì •, [!note] ì¤‘ë¦½, [!warning] ë¶€ì •)\n    - ì½œì•„ì›ƒ íƒ€ì´í‹€ì— ì—¬ë¡  ìœ í˜• ì œëª© í¬í•¨\n    - ì˜ˆì‹œ: > [!tip] ê¸ì • ì—¬ë¡ : K-ì½˜í…ì¸  ì‹ ë“œë¡¬ê³¼ ìë¶€ì‹¬\n    - í•µì‹¬ íŠ¹ì§•\n    - ì£¼ìš” ë³´ë„ í”„ë ˆì„ (ë¬¸í™” í˜„ìƒ, ì‚°ì—… ë™í–¥, ì‚¬íšŒ ë¹„í‰, ì†Œë¹„ ìœ í–‰ ë“±)\n    - ìœ í˜•ë³„ ëŒ€í‘œ ì¸ìš© (ê¸ì • 5, ë¶€ì • 3, ì¤‘ë¦½ 2)\n\n#### í‚¤ì›Œë“œ ë¶„ì„\n- ë¶ˆë › í¬ì¸íŠ¸: í‚¤ì›Œë“œ ì „ì²´ íŒ¨í„´ í•´ì„ (500~700ì)\n  - ìƒìœ„ í‚¤ì›Œë“œ êµ°ì§‘ ë¶„ì„ (ì½˜í…ì¸ /ì†Œë¹„/ì‚°ì—… ë“±)\n  - í‚¤ì›Œë“œ ê°„ ì—°ê´€ì„± (ì˜ˆ: ì¼€ë°í—Œ â†’ í—ŒíŠ¸ë¦­ìŠ¤ â†’ ê³¨ë“ )\n  - ì˜ˆìƒ ì™¸ í‚¤ì›Œë“œì˜ ë“±ì¥ ë°°ê²½\n  - í‚¤ì›Œë“œ ë¶„í¬ì˜ ê· í˜•ì„± í‰ê°€\n- í‘œ: ìƒìœ„ 20ê°œ í‚¤ì›Œë“œ (ìˆœìœ„ | í‚¤ì›Œë“œ | TF-IDF ì ìˆ˜)\n- ì½œì•„ì›ƒ: í‚¤ì›Œë“œ êµ°ì§‘ íŒ¨í„´ í•´ì„\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€ ì œëª© í¬í•¨\n  - ì‘í’ˆëª…/ìºë¦­í„° êµ°ì§‘\n  - ì†Œë¹„ í˜„ìƒ êµ°ì§‘\n  - ì‚°ì—…/ì‹œì¥ êµ°ì§‘\n  - ë¬¸í™”/ì‚¬íšŒ êµ°ì§‘\n- ì½œì•„ì›ƒ: ìˆ˜ì§‘ í‚¤ì›Œë“œë³„ ì´ìŠˆ ë¶„í¬\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€ ì œëª© í¬í•¨\n  - ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤/ì¼€ë°í—Œ\n  - í—ŒíŠ¸ë¦­ìŠ¤\n  - ê¹€ë°¥ì±Œë¦°ì§€\n\n#### ê°ì„± ë¶„ì„\n- í‘œ: ê°ì„± ë¶„í¬ (ìœ í˜• | ë¹„ìœ¨ | ëŒ€í‘œ í‚¤ì›Œë“œ Top 10)\n| ê°ì„± ìœ í˜• | ë¹„ìœ¨ | ëŒ€í‘œ í‚¤ì›Œë“œ Top 10 |\n|----------|------|-------------------|\n| ê¸ì • | 68% | ê°ë™, ìë¶€ì‹¬, ì‹ ë“œë¡¬, í˜ì‹ , ì„±ì¥, ê³µê°, ì—´í’, ì„±ê³µ, ì¦ê±°ì›€, ê¸°ëŒ€ê° |\n| ì¤‘ë¦½ | 21% | ì •ë³´, í˜„ìƒ, ê¸°ë¡, í˜‘ì—…, ì†Œë¹„, í™•ì‚°, íŠ¸ë Œë“œ, ì²´í—˜, ë¶„ì„, í˜„ì¥ |\n| ë¶€ì • | 11% | ìœ„í—˜, ë…¼ë€, ìƒì—…í™”, í’ˆê·€, ì§í‰, ì›ì¡°, ì•ˆì „, ìš°ë ¤, í•œê³„, ë¹„íŒ |\n\n- ë¶ˆë › í¬ì¸íŠ¸: ê°ì„± ì „ì²´ ë¶„í¬ í•´ì„ (500~700ì)\n  - ê¸ì • 68%ì˜ ì˜ë¯¸ (ì¼ë°˜ì  ë‰´ìŠ¤ ëŒ€ë¹„ ë†’ì€/ë‚®ì€ ìˆ˜ì¤€?)\n  - ë¶€ì • 11%ê°€ ì‹œì‚¬í•˜ëŠ” ë°” (ë¦¬ìŠ¤í¬ ìš”ì¸)\n  - ì¤‘ë¦½ 21%ì˜ ì—­í•  (ì •ë³´ ì „ë‹¬í˜• ë³´ë„ì˜ ë¹„ì¤‘)\n  - ê°ì„± ë¶„í¬ê°€ í–¥í›„ íŠ¸ë Œë“œì— ë¯¸ì¹  ì˜í–¥\n- ì½œì•„ì›ƒ: ê°ì„±ë³„ í•µì‹¬ ë¬¸ë§¥\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!tip] ê¸ì •, [!note] ì¤‘ë¦½, [!warning] ë¶€ì •)\n  - ì½œì•„ì›ƒ íƒ€ì´í‹€ ì œëª© í¬í•¨\n  - ê¸ì • ê°ì„±ì˜ ì˜ë¯¸ (ê¸€ë¡œë²Œ ìœ„ìƒ, ì‚°ì—… íŒŒê¸‰ë ¥ ë“±)\n  - ë¶€ì • ê°ì„±ì˜ ì›ì¸ (ë¬¸í™” í¬ì„, ì•ˆì „ ìš°ë ¤, ì—­ëŸ‰ í•œê³„ ë“±)\n  - ì¤‘ë¦½ ê°ì„±ì˜ íŠ¹ì§• (ì •ë³´ ì „ë‹¬, í˜„í™© ë¶„ì„ ë“±)\n  - ê°ì„±ë³„ ëŒ€í‘œ ì¸ìš© (ê¸ì • 5, ë¶€ì • 3, ì¤‘ë¦½ 2)\n\n#### ì£¼ìš” ì´ìŠˆ ë° ì‚¬ë¡€ ì—°êµ¬\n- ì£¼ìš” ì´ìŠˆ 3~5ê°œ ì„ ì • (ì‚°ì—…/ì—¬ë¡ /ìœ í–‰/ë¬¸í™” ë“± ë‹¤ê°ë„)\n- ì£¼ìš” ì´ìŠˆì˜ í•µì‹¬ ë…¼ì \n- ì£¼ìš” ì´ìŠˆë³„ ì›ë¬¸ ì¸ìš© 2~3ê°œ\n- ê° ì´ìŠˆ êµ¬ì¡°:\n  - ì½œì•„ì›ƒ íƒ€ì… ìˆœí™˜: [!info], [!abstract], [!example], [!question], [!summary]\n    - ì½œì•„ì›ƒ íƒ€ì´í‹€ì— ì£¼ìš” ì´ìŠˆ ì œëª© í¬í•¨\n    - ì˜ˆì‹œ: > [!example] ê·¸ë˜ë¯¸ ë³¸ìƒ í›„ë³´ ë“±ê·¹: KíŒÂ·Kì½˜í…ì¸ ì˜ ì£¼ë¥˜ ì§„ì…\n    - í•µì‹¬ ë‚´ìš©\n    - ì„¸ë¶€ ë¶„ì„\n    - ì£¼ìš” ìˆ˜ì¹˜/ì‚¬ë¡€\n    - ëŒ€í‘œ ì¸ìš© 2~3ê°œ\n  - ì½œì•„ì›ƒ ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ë¶ˆë › í¬ì¸íŠ¸: ì´ìŠˆ í•´ì„ (1,200~1,500ì)\n    - ì´ ì´ìŠˆê°€ ì‚°ì—…/ë¬¸í™”/ì†Œë¹„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥\n    - ë‹¤ë¥¸ ì´ìŠˆì™€ì˜ ì—°ê´€ì„±\n    - í–¥í›„ ì „ê°œ ë°©í–¥ ì˜ˆì¸¡\n\n#### ì‚°ì—… ë° ì‹œì¥ ì‹œì‚¬ì \n- í‘œ 1: SWOT ë¶„ì„ ë§¤íŠ¸ë¦­ìŠ¤\n| êµ¬ë¶„ | ê¸°íšŒ (Opportunities) | ìœ„í—˜ (Threats) |\n|------|---------------------|----------------|\n| ì½˜í…ì¸  ì‚°ì—… | ... | ... |\n| ì†Œë¹„ ì‹œì¥ | ... | ... |\n| ë¬¸í™” íŠ¸ë Œë“œ | ... | ... |\n- í‘œ 2: ê°€ì¹˜ì‚¬ìŠ¬ë³„ ì‹œì‚¬ì \n| ë‹¨ê³„ | í•µì‹¬ ì‹œì‚¬ì  | ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ | ì„±ê³µ ìš”ì¸ |\n|------|------------|--------------|-----------|\n| ì œì‘Â·ê¸°íš | ... | ... | ... |\n| ìœ í†µÂ·í™•ì‚° | ... | ... | ... |\n| ì†Œë¹„Â·ì°¸ì—¬ | ... | ... | ... |\n| íŒŒê¸‰Â·ì—°ê³„ | ... | ... | ... |\n- ë¶ˆë › í¬ì¸íŠ¸: í•µì‹¬ ì„±ê³µ ìš”ì¸ ë° ì¸ìš© 2~3ê°œ\n- ë¶ˆë › í¬ì¸íŠ¸: ì£¼ìš” ìœ„í—˜ ìš”ì¸ ë° ì¸ìš© 2~3ê°œ\n\n#### í–¥í›„ ì „ë§ ë° ì •ì±… ì œì–¸\n- ì½œì•„ì›ƒ: ì¤‘ë‹¨ê¸°\n  - ë‹¨ê¸° (1~2ë…„)\n  - ì¤‘ì¥ê¸° (3~5ë…„)\n- ë¶ˆë › í¬ì¸íŠ¸: ëŒ€ìƒë³„ ì œì–¸ (ê° ëŒ€ìƒë³„ 500~700ì)\n  - ë„˜ë²„ë§ í˜•ì‹: 1. ê¸°ì—…, 2. ì •ì±…, 3. ì†Œë¹„ì\n  - ê° ëŒ€ìƒ ì•„ë˜ í•˜ìœ„ ë¶ˆë ›ìœ¼ë¡œ ì œì–¸ ë‚˜ì—´\n  - ê³„ì¸µ: ë³¼ë“œ ë„˜ë²„ë§ â†’ ë¶ˆë ›(-), ì´ 2ë‹¨ê³„\n  - ê¸°ì—…: 3~5ê°œ ì œì–¸ (ê° í•œ ì¤„)\n  - ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ì •ì±…: 2~3ê°œ ì œì–¸ (ê° í•œ ì¤„)\n  - ë‹¤ìŒ ê³µë°± 1ì¤„\n  - ì†Œë¹„ì: 2~3ê°œ ì œì–¸ (ê° í•œ ì¤„)\n\n### 7. Notion ìë™í™”/ë¸”ë¡ ë³€í™˜ì„ ìœ„í•´ ë°˜ë“œì‹œ ì¶”ê°€ë¡œ ì§€ì¼œì•¼ í•  ì‚¬í•­\n- \"content\" í•„ë“œëŠ” Notion ë§ˆí¬ë‹¤ìš´ íŒŒì„œ/ë¸”ë¡ ìë™ ë³€í™˜ì— 100% ì í•©í•˜ë„ë¡\n- ëª¨ë“  í—¤ë”©ì€ ## ë˜ëŠ” ###ë¡œ\n- ì„¹ì…˜ êµ¬ì¡° ì œëª© í—¤ë”©ì€ ëª¨ë‘ ##, ì˜ˆ) ## í•µì‹¬ ì¸ì‚¬ì´íŠ¸(Key Insights)   \n- í‘œëŠ” |ë¡œ ì •í™•íˆ êµ¬ë¶„(ë“¤ì—¬ì“°ê¸°X)\n- í‘œì—ëŠ” ë°˜ë“œì‹œ í…Œì´ë¸” í—¤ë”ê°€ ì¡´ì¬í•˜ë¡\n- ì½œì•„ì›ƒ/ì¸ìš©/ë¶ˆë¦¿/ë„˜ë²„ë§ ë“± ëª¨ë“  ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì •í™•íˆ ë‹«ì•„ì„œ ì‘ì„±\n- ë³¼ë“œ(**êµµê²Œ**), ì´íƒ¤ë¦­(*ê¸°ìš¸ì„*), í•˜ì´ë¼ì´íŠ¸(==ê°•ì¡°==) ë“±ì€ ë§ˆí¬ë‹¤ìš´ ì›ì¹™ëŒ€ë¡œ\n- ì„¹ì…˜ë³„ í¬ë§·ì´ ë°˜ë³µë˜ì§€ ì•Šë„ë¡ í•  ê²ƒ\n- ë¶ˆì™„ì „í•œ í‘œ/ë¦¬ìŠ¤íŠ¸/ì¸ìš© ë“± ë§ˆí¬ë‹¤ìš´ êµ¬ë¬¸ ì˜¤ë¥˜ ì—†ì´ ì™„ì„±\n- ë¶ˆë › í¬ì¸íŠ¸ ê³„ì¸µì€ 2ê³„ì¸µê¹Œì§€ë§Œ\n\n### 8. JSON ì¶œë ¥ êµ¬ì¡° (í•„ìˆ˜)\nì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œ ë°˜ë“œì‹œ ì¶œë ¥í•˜ì„¸ìš”:\n\n```json\n{\n  \"id\": \"[ê³ ìœ ê°’]\",\n  \"title\": \"[íŠ¸ë Œë“œ ë¶„ì„ ì£¼ì œì˜ ìì—°ìŠ¤ëŸ¬ìš´ í•œê¸€ ì œëª©]\",\n  \"content\": \"[ê³„ì¸µì  ë§ˆí¬ë‹¤ìš´ êµ¬ì¡°, ê·œì¹™ 100% ì ìš©, 18,000~25,000ì]\",\n  \"tags\": [\"íŠ¸ë Œë“œ\", \"ë‰´ìŠ¤ë¶„ì„\", \"ì‚°ì—…\", \"ì—¬ë¡ \", \"K-ì½˜í…ì¸ \", \"ì¼€ì´íŒë°ëª¬í—Œí„°ìŠ¤\", ...]  // ìµœëŒ€ 10ê°œ\n}"
        }
      },
      "id": "771a139b-4d38-461d-8696-a2d8f1aa976d",
      "name": "Zettlekasten Notion Block",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        928,
        -624
      ],
      "typeVersion": 1.7
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {
          "maxTokens": 32768,
          "temperature": 0.2,
          "timeout": 180000,
          "topP": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        928,
        -448
      ],
      "id": "89c87c47-2522-4f99-85a5-f09050363047",
      "name": "Notion Model",
      "credentials": {
        "openAiApi": {
          "id": "GU4Fc8aV2Jc3O9Mo",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"id\": { \"type\": \"string\" },\n    \"title\": { \"type\": \"string\" },\n    \"content\": { \"type\": \"string\" },\n    \"tags\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    }\n  },\n  \"required\": [\"id\", \"title\", \"content\", \"tags\"]\n}"
      },
      "id": "e2b24450-2e5e-4af5-8922-06b68d6eb86e",
      "name": "Notion Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1072,
        -448
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "content": "## Trigger",
        "height": 240,
        "width": 534,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1312,
        -448
      ],
      "typeVersion": 1,
      "id": "1705ff66-5afb-4ced-b178-856913cbd1a9",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## TASK\n### ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘\n- [SerpAPI](https://serpapi.com/google-news-api) í˜¸ì¶œ\n- í‚¤ì›Œë“œë³„ 2ê°œ",
        "height": 352,
        "width": 214,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -768,
        -560
      ],
      "typeVersion": 1,
      "id": "e10260e1-0019-4f16-a241-a2e7d99748d1",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## TASK\n### ë°ì´í„° ì „ì²˜ë¦¬\n- ì‚¬ì´íŠ¸ í•„í„°ë§\n- URL ì¤‘ë³µ ì œê±°",
        "height": 352,
        "width": 166,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -544,
        -560
      ],
      "typeVersion": 1,
      "id": "dc517db0-178d-453f-91fa-378ee0299894",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## TASK\n### ë³¸ë¬¸ í¬ë¡¤ë§\n- [Newspaper3k](https://google-news-scraper-production.up.railway.app/extract) - íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬, ì •ì  HTML íŒŒì‹±\n- [Playwright](https://google-news-playwright-production.up.railway.app/playwright) - í—¤ë“œë¦¬ìŠ¤ ë¸Œë¼ìš°ì €, ë™ì  JS ë Œë”ë§\n- [Tavily Extract](https://docs.tavily.com/documentation/api-reference/endpoint/extract) - AI ê¸°ë°˜ ê²€ìƒ‰ API, ì›” ë¬´ë£Œ í¬ë ˆë”§",
        "height": 736,
        "width": 1206
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        -304
      ],
      "typeVersion": 1,
      "id": "ad37a26b-b2e4-435e-a2fd-fdce90b1431a",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## TASK\n### ë°ì´í„° ì €ì¥\n- ë…¸ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ì ì¬\n- [ë…¸ì…˜ API](https://developers.notion.com/reference/patch-block-children) ì—…ë°ì´íŠ¸",
        "height": 416,
        "width": 886,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        -736
      ],
      "typeVersion": 1,
      "id": "7a75aed1-55cc-4bc4-8e53-8d49d6045bb3",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## Target\n### ë°ì´í„° ì „ì†¡\n- êµ¬ê¸€ ë“œë¼ì´ë¸Œ ë° ì˜µì‹œë””ì–¸ ì—°ë™\n- ë…¸ì…˜ ë¸”ë¡í¬ë§·íŒ… ë° ì½˜í…ì¸  ì¶”ê°€",
        "height": 752,
        "width": 1088,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        -1072
      ],
      "typeVersion": 1,
      "id": "e8fc3b40-1160-460a-bd8a-fb84442c5d0d",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "jsCode": "const md = $json[\"output\"][\"content\"];\n\n// ----------- HTML íƒœê·¸ ì œê±° í•¨ìˆ˜ ----------- //\nfunction stripHtmlTags(text) {\n  return text.replace(/<font[^>]*>|<\\/font>/gi, '').trim();\n}\n\n// ----------- Markdown Inline ë³€í™˜ í•¨ìˆ˜ ----------- //\nfunction mdToRichText(text) {\n  const patterns = [\n    { regex: /\\*\\*(.*?)\\*\\*/, annotation: { bold: true } },\n    { regex: /\\*(.*?)\\*/, annotation: { italic: true } },\n    { regex: /==(.*?)==/, annotation: { color: \"yellow_background\" } }\n  ];\n  let rich = [];\n  let rest = text;\n  while (rest.length > 0) {\n    let minIdx = rest.length;\n    let matchObj = null;\n    let patternObj = null;\n    for (const p of patterns) {\n      const m = p.regex.exec(rest);\n      if (m && m.index < minIdx) {\n        minIdx = m.index;\n        matchObj = m;\n        patternObj = p;\n      }\n    }\n    if (matchObj) {\n      if (matchObj.index > 0) {\n        rich.push({ type: 'text', text: { content: rest.slice(0, matchObj.index) } });\n      }\n      rich.push({\n        type: 'text',\n        text: { content: matchObj[1] },\n        annotations: patternObj.annotation\n      });\n      rest = rest.slice(matchObj.index + matchObj[0].length);\n    } else {\n      if (rest.length > 0) rich.push({ type: 'text', text: { content: rest } });\n      break;\n    }\n  }\n  return rich;\n}\n\n// ----------- 2ë‹¨ê³„ childrenë§Œ í—ˆìš©í•˜ë„ë¡ flatten ----------- //\nfunction safeChildren(children) {\n  if (!children) return;\n  return children.map(child => {\n    if (['bulleted_list_item', 'numbered_list_item'].includes(child.type)) {\n      if (child[child.type].children) {\n        child[child.type].children = child[child.type].children.map(grandChild => {\n          if (grandChild[grandChild.type] && grandChild[grandChild.type].children) {\n            delete grandChild[grandChild.type].children;\n          }\n          return grandChild;\n        });\n      }\n    }\n    return child;\n  });\n}\n\n// ----------- ë¶ˆë¦¿ì— ìŒë”°ì˜´í‘œ ì—¬ëŸ¬ ê°œ â†’ children ë¶„ë¦¬ ----------- //\nfunction splitBulletsWithQuotes(text) {\n  const quotePattern = /\"([^\"]+)\"/g;\n  let matches = [];\n  let match;\n  let lastIndex = 0;\n  let children = [];\n  while ((match = quotePattern.exec(text)) !== null) {\n    matches.push(match[1]);\n    lastIndex = quotePattern.lastIndex;\n  }\n  if (matches.length > 1) {\n    for (let quoted of matches) {\n      children.push({\n        object: 'block',\n        type: 'bulleted_list_item',\n        bulleted_list_item: { rich_text: mdToRichText(quoted) }\n      });\n    }\n    let rest = text.slice(lastIndex).replace(/^[,\\s]+/, '');\n    if (rest.length > 0) {\n      children.push({\n        object: 'block',\n        type: 'bulleted_list_item',\n        bulleted_list_item: { rich_text: mdToRichText(rest) }\n      });\n    }\n    return children;\n  }\n  return null;\n}\n\n// ----------- ë³¸ë¬¸ ë¸”ë¡ ë³€í™˜ ----------- //\nconst lines = md.split('\\n');\nlet blocks = [];\nlet i = 0;\n\nwhile (i < lines.length) {\n  let line = lines[i];\n\n  // êµ¬ë¶„ì„ (---)ì€ ë¬´ì‹œ\n  if (line.trim() === '---') {\n    i++; continue;\n  }\n\n  // Heading\n  if (line.startsWith('### ')) {\n    blocks.push({ \n      object: 'block', \n      type: 'heading_3', \n      heading_3: { \n        rich_text: mdToRichText(stripHtmlTags(line.replace(/^###\\s*/, ''))) \n      } \n    });\n    i++; continue;\n  }\n  if (line.startsWith('## ')) {\n    blocks.push({ \n      object: 'block', \n      type: 'heading_2', \n      heading_2: { \n        rich_text: mdToRichText(stripHtmlTags(line.replace(/^##\\s*/, ''))) \n      } \n    });\n    i++; continue;\n  }\n  if (line.startsWith('# ')) {\n    blocks.push({ \n      object: 'block', \n      type: 'heading_1', \n      heading_1: { \n        rich_text: mdToRichText(stripHtmlTags(line.replace(/^#\\s*/, ''))) \n      } \n    });\n    i++; continue;\n  }\n\n  // ë„˜ë²„ë“œ ë¦¬ìŠ¤íŠ¸ (í•˜ìœ„: ë¶ˆë¦¿/ì¸ìš©/ë”°ì˜´í‘œ)\n  if (/^\\d+\\.\\s+/.test(line)) {\n    let numberListBlocks = [];\n    while (i < lines.length && /^\\d+\\.\\s+/.test(lines[i])) {\n      let itemText = lines[i].replace(/^\\d+\\.\\s+/, '').trim();\n      let children = [];\n      let j = i + 1;\n      while (\n        j < lines.length &&\n        (lines[j].trim().startsWith('- ') ||\n         lines[j].trim().startsWith('> ') ||\n         lines[j].trim().match(/^\".*\"$/) ||\n         lines[j].trim().match(/^\".*\"$/))\n      ) {\n        let childLine = lines[j].trim();\n        if (childLine.startsWith('- ')) {\n          children.push({\n            object: 'block',\n            type: 'bulleted_list_item',\n            bulleted_list_item: { rich_text: mdToRichText(childLine.replace(/^- /, '').trim()) }\n          });\n        }\n        else if (childLine.startsWith('> ')) {\n          children.push({\n            object: 'block',\n            type: 'quote',\n            quote: { rich_text: mdToRichText(childLine.replace(/^> /, '').trim()) }\n          });\n        }\n        else if (childLine.match(/^\".*\"$/) || childLine.match(/^\".*\"$/)) {\n          children.push({\n            object: 'block',\n            type: 'quote',\n            quote: { rich_text: mdToRichText(childLine.replace(/^[\"\"]|[\"\"]$/g, '').trim()) }\n          });\n        }\n        j++;\n      }\n      let block = {\n        object: 'block',\n        type: 'numbered_list_item',\n        numbered_list_item: { rich_text: mdToRichText(itemText) }\n      };\n      if (children.length > 0) block.numbered_list_item.children = safeChildren(children);\n      numberListBlocks.push(block);\n      i = j;\n    }\n    blocks.push(...numberListBlocks);\n    continue;\n  }\n\n  // ë³¼ë“œ ë¶ˆë¦¿(ìƒìœ„), children ì§€ì›\n  if (/^- \\*\\*(.+?)\\*\\*/.test(line)) {\n    const parentText = line.replace(/^- \\*\\*(.+?)\\*\\*/, '$1').trim();\n    let parentBlock = {\n      object: 'block',\n      type: 'bulleted_list_item',\n      bulleted_list_item: { rich_text: mdToRichText(parentText), children: [] }\n    };\n    let j = i + 1;\n    while (j < lines.length) {\n      let childLine = lines[j];\n      if (/^- (?!\\*\\*)/.test(childLine)) {\n        parentBlock.bulleted_list_item.children.push({\n          object: 'block',\n          type: 'bulleted_list_item',\n          bulleted_list_item: { rich_text: mdToRichText(childLine.replace(/^- /, '').trim()) }\n        });\n        j++; continue;\n      }\n      if (/^> /.test(childLine)) {\n        parentBlock.bulleted_list_item.children.push({\n          object: 'block',\n          type: 'quote',\n          quote: { rich_text: mdToRichText(childLine.replace(/^> /, '').trim()) }\n        });\n        j++; continue;\n      }\n      if (/^\"/.test(childLine.trim())) {\n        parentBlock.bulleted_list_item.children.push({\n          object: 'block',\n          type: 'quote',\n          quote: { rich_text: mdToRichText(childLine.trim().replace(/^\"/, '').replace(/\"$/, '').trim()) }\n        });\n        j++; continue;\n      }\n      if (/^\\d+\\.\\s+/.test(childLine)) {\n        parentBlock.bulleted_list_item.children.push({\n          object: 'block',\n          type: 'numbered_list_item',\n          numbered_list_item: { rich_text: mdToRichText(childLine.replace(/^\\d+\\.\\s+/, '').trim()) }\n        });\n        j++; continue;\n      }\n      if (\n        childLine.trim() === '' ||\n        /^- \\*\\*/.test(childLine) ||\n        /^#{1,3} /.test(childLine) ||\n        /^\\d+\\.\\s+/.test(childLine)\n      ) break;\n      parentBlock.bulleted_list_item.children.push({\n        object: 'block',\n        type: 'paragraph',\n        paragraph: { rich_text: mdToRichText(childLine.trim()) }\n      });\n      j++;\n    }\n    parentBlock.bulleted_list_item.children = safeChildren(parentBlock.bulleted_list_item.children);\n    blocks.push(parentBlock);\n    i = j;\n    continue;\n  }\n\n  // **ë¶ˆë¦¿ ê³„ì¸µ êµ¬ì¡°**\n  if (/^- /.test(line.trim())) {\n    let parentText = line.trim().replace(/^- /, '');\n    // ìŒë”°ì˜´í‘œ ì—¬ëŸ¬ ê°œ â†’ children\n    let splitChildren = splitBulletsWithQuotes(parentText);\n    if (splitChildren) {\n      // í•˜ìœ„ ë¶ˆë¦¿(2ì¹¸ ì´ìƒ ë“¤ì—¬ì“°ê¸°)\n      let j = i + 1;\n      let childBullets = [];\n      while (j < lines.length && /^ {2,}- /.test(lines[j])) {\n        childBullets.push({\n          object: 'block',\n          type: 'bulleted_list_item',\n          bulleted_list_item: { rich_text: mdToRichText(lines[j].replace(/^ {2,}- /, '')) }\n        });\n        j++;\n      }\n      blocks.push({\n        object: 'block',\n        type: 'bulleted_list_item',\n        bulleted_list_item: { rich_text: mdToRichText(\"\"), children: safeChildren([...splitChildren, ...childBullets]) }\n      });\n      i = j;\n      continue;\n    }\n    // **2ì¹¸ ë“¤ì—¬ì“°ê¸° í•˜ìœ„ ë¶ˆë¦¿ë§Œ children**\n    let j = i + 1;\n    let childBullets = [];\n    while (j < lines.length && /^ {2,}- /.test(lines[j])) {\n      childBullets.push({\n        object: 'block',\n        type: 'bulleted_list_item',\n        bulleted_list_item: { rich_text: mdToRichText(lines[j].replace(/^ {2,}- /, '')) }\n      });\n      j++;\n    }\n    let parentBlock = {\n      object: 'block',\n      type: 'bulleted_list_item',\n      bulleted_list_item: { rich_text: mdToRichText(parentText) }\n    };\n    if (childBullets.length > 0) {\n      parentBlock.bulleted_list_item.children = safeChildren(childBullets);\n    }\n    blocks.push(parentBlock);\n    i = j;\n    continue;\n  }\n\n  // í‘œ\n  if (line.trim().startsWith('|')) {\n    let tableRows = [];\n    while (i < lines.length && lines[i].trim().startsWith('|')) {\n      tableRows.push(lines[i].trim());\n      i++;\n    }\n    const rows = tableRows.map(row => row.replace(/^\\|/, '').replace(/\\|$/, '').split('|').map(cell => cell.trim()));\n    const tableBlock = {\n      object: 'block',\n      type: 'table',\n      table: {\n        table_width: rows[0].length,\n        has_column_header: true,\n        has_row_header: false,\n        children: rows.slice(2).map(row =>\n          ({\n            object: 'block',\n            type: 'table_row',\n            table_row: {\n              cells: row.map(cell => mdToRichText(cell))\n            }\n          })\n        )\n      }\n    };\n    blocks.push(tableBlock);\n    continue;\n  }\n\n  // Callout\n  if (line.trim().startsWith('> [!')) {\n    const match = line.trim().match(/^\\> \\[\\!(\\w+)\\] (.*)/);\n    const type = match && match[1] ? match[1].toLowerCase() : \"info\";\n    const content = match && match[2] ? match[2] : \"\";\n    const emojiMap = { \n      'info': 'â„¹ï¸', \n      'abstract': 'ğŸ“‹',\n      'example': 'ğŸ“Œ',\n      'question': 'â“',\n      'summary': 'ğŸ’¡', \n      'tip': 'âœ…',\n      'note': 'ğŸ“',\n      'warning': 'âš ï¸' \n    };\n    const emoji = emojiMap[type] || 'ğŸ’¬';\n    let calloutText = content;\n    let k = i + 1;\n    let calloutChildren = [];\n    while (lines[k] && lines[k].trim().startsWith('> -')) {\n      calloutChildren.push({\n        object: 'block',\n        type: 'bulleted_list_item',\n        bulleted_list_item: { rich_text: mdToRichText(lines[k].trim().replace(/^>\\s*-\\s*/, '')) }\n      });\n      k++;\n    }\n    let block = {\n      object: 'block',\n      type: 'callout',\n      callout: {\n        icon: { emoji },\n        rich_text: mdToRichText(calloutText),\n        color: 'gray_background'\n      }\n    };\n    if (calloutChildren.length > 0)\n      block.callout.children = safeChildren(calloutChildren);\n    blocks.push(block);\n    i = k;\n    continue;\n  }\n\n  // ì¸ìš©\n  if (line.trim().startsWith('> ')) {\n    blocks.push({\n      object: 'block',\n      type: 'quote',\n      quote: { rich_text: mdToRichText(line.trim().replace(/^>\\s*/, '')) }\n    });\n    i++; continue;\n  }\n\n  // ì¸ìš©(ê³µë°±)\n  if (/^ +/.test(line) && line.trim().length > 0) {\n    blocks.push({\n      object: 'block',\n      type: 'quote',\n      quote: { rich_text: mdToRichText(line.trim()) }\n    });\n    i++; continue;\n  }\n\n  // ì¼ë°˜ í…ìŠ¤íŠ¸\n  if (line.trim().length > 0) {\n    blocks.push({\n      object: 'block',\n      type: 'paragraph',\n      paragraph: { rich_text: mdToRichText(line.trim()) }\n    });\n    i++; continue;\n  }\n  i++;\n}\n\nreturn [{ json: { children: blocks } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1232,
        -624
      ],
      "id": "5d74cf35-c08c-44a0-87b7-b92bc8d9dc97",
      "name": "Block Format"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://api.notion.com/v1/blocks/{{ $('All News Data').item.json.keywordPageId }}/children",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Notion-Version",
              "value": "2025-09-03"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{$json}}",
        "options": {
          "timeout": 60000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1424,
        -624
      ],
      "id": "a90dac24-1c43-4fa5-a222-f680cea8b790",
      "name": "Block Update",
      "credentials": {
        "httpHeaderAuth": {
          "id": "l426XFoZtaDBUlPQ",
          "name": "Header Notion account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Notion Trigger": {
      "main": [
        [
          {
            "node": "Keywords Field",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keywords Field": {
      "main": [
        [
          {
            "node": "News Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "News Split Out": {
      "main": [
        [
          {
            "node": "News Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "News Search": {
      "main": [
        [
          {
            "node": "News Transform",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FastAPI Cleaning": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "News Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Playwright Cleaning": {
      "main": [
        [
          {
            "node": "Playwright Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FastAPI Extract": {
      "main": [
        [
          {
            "node": "FastAPI Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Playwright Extract": {
      "main": [
        [
          {
            "node": "Playwright Cleaning",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "News Transform": {
      "main": [
        [
          {
            "node": "Test Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FastAPI Switch": {
      "main": [
        [
          {
            "node": "FastAPI Cleaning",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Playwright Extract",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Playwright Switch": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Tavily Extract",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "News Fields": {
      "main": [
        [
          {
            "node": "Block Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tavily Extract": {
      "main": [
        [
          {
            "node": "Tavily Cleaning",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tavily Cleaning": {
      "main": [
        [
          {
            "node": "Tavily Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tavily Filter": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Test Filter": {
      "main": [
        [
          {
            "node": "News Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notion DB": {
      "main": [
        [
          {
            "node": "Notion Block",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Block Data": {
      "main": [
        [
          {
            "node": "Notion Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "News Loop": {
      "main": [
        [
          {
            "node": "News Fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "FastAPI Extract",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notion Loop": {
      "main": [
        [
          {
            "node": "All News Data",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Notion DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notion Block": {
      "main": [
        [
          {
            "node": "Notion Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "All News Data": {
      "main": [
        [
          {
            "node": "Zettlekasten Obsidian Note",
            "type": "main",
            "index": 0
          },
          {
            "node": "Zettlekasten Notion Block",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zettlekasten Obsidian Note": {
      "main": [
        [
          {
            "node": "Combine Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combine Content": {
      "main": [
        [
          {
            "node": "Create File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create File": {
      "main": [
        [
          {
            "node": "Upload file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obsidian Model": {
      "ai_languageModel": [
        [
          {
            "node": "Zettlekasten Obsidian Note",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Obsidian Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Zettlekasten Obsidian Note",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Zettlekasten Notion Block": {
      "main": [
        [
          {
            "node": "Block Format",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Notion Model": {
      "ai_languageModel": [
        [
          {
            "node": "Zettlekasten Notion Block",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Notion Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Zettlekasten Notion Block",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Block Format": {
      "main": [
        [
          {
            "node": "Block Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "ab029c4a-abd4-4d5e-b74b-2bdca49fe999",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "ed29603280f689e433d162d6eb2f4c0ef594feb614602d9f72d06ccb3a8d3e19"
  },
  "id": "GIKYXynaiYbB02vs",
  "tags": [
    {
      "updatedAt": "2025-10-22T12:49:51.287Z",
      "createdAt": "2025-10-22T12:49:51.287Z",
      "id": "Vay2kkcYupDfIRMl",
      "name": "ë°ì´í„° í´ë˜ìŠ¤"
    }
  ]
}