{
  "name": "Serious Accident Agent",
  "nodes": [
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE",
          "mode": "list",
          "cachedResultName": "Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥†ÌòÑÌô©",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "ÏãúÌä∏1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "arno": "={{ $json.arno }}",
            "datetime": "={{ $json.datetime }}",
            "location": "={{ $json.location }}",
            "accident_space": "={{ $json.accident_space }}",
            "original_text": "={{ $json.original_text }}",
            "cause_of_death": "={{ $json.cause_of_death }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "arno",
              "displayName": "arno",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datetime",
              "displayName": "datetime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "accident_space",
              "displayName": "accident_space",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "cause_of_death",
              "displayName": "cause_of_death",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "original_text",
              "displayName": "original_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "fe0c7e04-3840-47fa-a899-b00ae8a9f6d8",
      "name": "Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -208,
        992
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KKndhIOqMyfVMSRi",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "## TASK\n### Îç∞Ïù¥ÌÑ∞ ÏöîÏïΩ Î∞è Íµ¨Ï°∞Ìôî\n- Google Gemini Ï†ïÎ≥¥ Ï∂îÏ∂ú\n- ÌïÑÎìúÎ™Ö Ï†ïÎ¶¨ Î∞è ÎÇ†ÏßúÏàú Ï†ïÎ†¨",
        "height": 508,
        "width": 1092,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1712,
        704
      ],
      "id": "66eddcff-8b38-4ee6-a386-853cfca73e43",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "## TARGET\n### Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•\n- [Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥†ÌòÑÌô©](https://docs.google.com/spreadsheets/d/1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE/edit?usp=sharing) Ï†ÑÏÜ°\n- 10Í∞úÏî© Î∞∞ÏπòÎ≥Ñ ÏàúÏ∞® Ï≤òÎ¶¨ ",
        "height": 504,
        "width": 556,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -608,
        704
      ],
      "id": "2c2d9b0f-5977-4e59-864f-b70bb1c18e62",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "## Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥† ÏûêÎèôÎ∂ÑÏÑùÍ∏∞\n### API ÏÇ¨Ïö©\n- [ÌïúÍµ≠ÏÇ∞ÏóÖÏïàÏ†ÑÎ≥¥Í±¥Í≥µÎã® ÌôàÌéòÏù¥ÏßÄ](https://www.kosha.or.kr/kosha/index.do) ÏÇ¨Í≥†ÏÇ¨Îßù ÏÜçÎ≥¥ Îç∞Ïù¥ÌÑ∞\n- [ÌïúÍµ≠ÏÇ∞ÏóÖÏïàÏ†ÑÎ≥¥Í±¥Í≥µÎã®_ÏÇ¨Í≥†ÏÇ¨Îßù Í≤åÏãúÌåê Ï†ïÎ≥¥ Ï°∞ÌöåÏÑúÎπÑÏä§](https://www.data.go.kr/data/15119137/openapi.do)\n\n### API Î∞úÍ∏â\n- Data.go.kr ÌöåÏõêÍ∞ÄÏûÖ - Î°úÍ∑∏Ïù∏\n- ÌôúÏö©Ïã†Ï≤≠ - API Î∞úÍ∏â\n- [ÌÅ¨Î°¨ ÏõπÏä§ÌÜ†Ïñ¥ JSON-handle](https://chromewebstore.google.com/detail/json-handle/iahnhfdhidomcpggpaimmmahffihkfnj?hl=ko&utm_source=ext_sidebar) ÏÑ§Ïπò\n- [ÌôúÏö©Ïã†Ï≤≠ ÌòÑÌô©](https://www.data.go.kr/iim/api/selectAcountList.do) - [ÎØ∏Î¶¨Î≥¥Í∏∞](https://apis.data.go.kr/B552468/news_api02/getNews_api02?serviceKey=7JoLokAR%2FRTfM%2FJwVNepjVIYCxYVM8SoTkD85mCgAXik51SO%2BuM%2Bdmho7kDpSwMO9FX3t1WwxweejH0NGWpYJQ%3D%3D&pageNo=1&numOfRows=10&callApiId=1040) ÌÅ¥Î¶≠\n- Ï†ÄÏû•Ìï† Íµ¨Í∏Ä ÏãúÌä∏ ÎßåÎì§Í∏∞",
        "height": 316,
        "width": 876
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2880,
        368
      ],
      "id": "7ee42f32-ecbb-4218-9d82-c3ac3539826d",
      "name": "Sticky Note8"
    },
    {
      "parameters": {},
      "id": "6779380c-4e20-42e0-b756-30dc9362cf89",
      "name": "When clicking ‚ÄòTest workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -2832,
        848
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## TASK\n### Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Î∞è ÏãúÍ∞ÅÌôî\n- Íµ¨Í∏Ä ÏãúÌä∏ ÎèÑÍµ¨Î°ú Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå\n- ÌÜµÍ≥Ñ Î∂ÑÏÑù Î∞è Ïù∏ÏÇ¨Ïù¥Ìä∏ ÎèÑÏ∂ú",
        "height": 488,
        "width": 488,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2688,
        1232
      ],
      "id": "6c8ed639-9bca-4533-b5fe-d28e1db8493d",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "text": "=INPUT)\nÏÇ¨Í±¥Î≤àÌò∏: {{ $json.arno }} \nÌÇ§ÏõåÎìú: {{ $json.keyword }}\nÏΩòÌÖêÏ∏†: {{ $json.contents }}\n\n---\n\nOUTPUT)\nÎãπÏã†ÏùÄ ÏÇ∞ÏóÖÏû¨Ìï¥ ÏÇ¨Í≥† Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§. Ï£ºÏñ¥ÏßÑ ÏÇ¨Í≥† ÏÜçÎ≥¥ ÌÖçÏä§Ìä∏ÏóêÏÑú Íµ¨Ï°∞ÌôîÎêú Ï†ïÎ≥¥Î•º Ï†ïÌôïÌïòÍ≤å Ï∂îÏ∂úÌïòÏÑ∏Ïöî.\n\nÏ∂îÏ∂ú Í∑úÏπô:\n\n- arno: ÏûÖÎ†•Îêú arno Í∞í Í∑∏ÎåÄÎ°ú\n- datetime: YYYY-MM-DD HH:MM:SS ÌòïÏãù\n- location: ÏãúÎèÑ ÏãúÍµ∞Íµ¨ÍπåÏßÄ (Ïòà: Í≤ΩÍ∏∞ÎèÑ Ïö©Ïù∏Ïãú)\n- accident_space: ÏÇ¨Í≥†Í∞Ä Î∞úÏÉùÌïú Íµ¨Ï≤¥Ï†Å Ïû•ÏÜå (Ïòà: Í≥µÏû• ÏßÄÎ∂ï Î≥¥Ïàò Í≥µÏÇ¨ÌòÑÏû•)\n- cause_of_death: ÏÇ¨ÎßùÏõêÏù∏ÏùÑ Îã§Ïùå Ï§ë ÌïòÎÇòÎ°ú Î∂ÑÎ•ò (Îñ®Ïñ¥Ïßê, ÍπîÎ¶º, Îí§ÏßëÌûò, ÎÅºÏûÑ, ÎÑòÏñ¥Ïßê, Î∂ÄÎî™Ìûò, Í∞êÏ†Ñ, Î¨ºÏ≤¥Ïóê ÎßûÏùå, ÏßàÏãù, Ìè≠Î∞ú, ÌôîÏû¨, Ï§ëÎèÖ, Í∏∞ÌÉÄ)\n- original_text: Ï†ÑÏ≤¥ ÌÖçÏä§Ìä∏ Í∑∏ÎåÄÎ°ú\n\nÏ§ëÏöî: \n- ÏàúÏàò JSONÎßå Ï∂úÎ†•ÌïòÏÑ∏Ïöî.\n- ÎßàÌÅ¨Îã§Ïö¥ ÏΩîÎìúÎ∏îÎü≠(```)ÏùÑ Ï†àÎåÄ ÏÇ¨Ïö©ÌïòÏßÄ ÎßàÏÑ∏Ïöî.",
        "schemaType": "manual",
        "inputSchema": "={\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"arno\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"datetime\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"format\": \"datetime\",\n\t\t\t\"pattern\": \"^\\\\d{4}-\\\\d{2}-\\\\d{2} \\\\d{2}:\\\\d{2}:\\\\d{2}$\",\n\t\t\t\"description\": \"YYYY-MM-DD HH:MM:SS ÌòïÏãùÏùò ÎÇ†ÏßúÏãúÍ∞Ñ\"\n\t\t},\n\t\t\"location\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"accident_space\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"cause_of_death\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"original_text\": {\n\t\t\t\"type\": \"string\"\n\t\t}\n\t},\n\t\"required\": [\"arno\", \"datetime\", \"location\", \"accident_space\", \"cause_of_death\", \"original_text\"]\n}",
        "options": {
          "systemPromptTemplate": "You are an expert extraction algorithm. Only extract relevant information from the text. If you do not know the value of an attribute asked to extract, you may omit the attribute's value."
        }
      },
      "id": "76641108-d56a-4544-8383-d08b87459127",
      "name": "Information Extractor",
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1,
      "position": [
        -1408,
        864
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "## TARGET\n### Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•\n- JSON ÌòïÏãù ÏµúÏ¢Ö Ï†ïÎ¶¨\n- Slack Î¶¨Ìè¨Ìä∏ Ï†ÑÏÜ°",
        "height": 508,
        "width": 440,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2192,
        1232
      ],
      "id": "7f5d9c9a-60f2-4c4b-a96d-0953e0f0a75b",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C09RN4CG6KB",
          "mode": "list",
          "cachedResultName": "ÏûêÎèôÌôî-ÌÅ¥ÎûòÏä§"
        },
        "messageType": "block",
        "blocksUi": "={{ $json.output }}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        -1952,
        1376
      ],
      "id": "32a6b0e7-e4a0-4e86-9c1c-aba26ee6f64b",
      "name": "Slack",
      "webhookId": "08cf6ff0-5cb7-4104-b42d-af7fe0b5baeb",
      "credentials": {
        "slackOAuth2Api": {
          "id": "pUuwYYXjcBnnYwro",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "batchSize": 10,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -544,
        864
      ],
      "id": "aed5e1af-8247-4de2-aba4-4b8d1c826856",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "26cf31e8-7d47-4fb7-bff3-94438ea960d4",
              "name": "arno",
              "value": "={{ $json.output.arno }}",
              "type": "string"
            },
            {
              "id": "633422fb-9c1e-43b8-b3d3-151126648615",
              "name": "datetime",
              "value": "={{ $json.output.datetime }}",
              "type": "string"
            },
            {
              "id": "fef8ac20-b592-475b-91ec-15a36600f9fc",
              "name": "location",
              "value": "={{ $json.output.location }}",
              "type": "string"
            },
            {
              "id": "67982226-39fb-4890-a38d-f55ec7dec122",
              "name": "accident_space",
              "value": "={{ $json.output.accident_space }}",
              "type": "string"
            },
            {
              "id": "7c672c41-7a13-4b28-ae8b-185226522ce1",
              "name": "cause_of_death",
              "value": "={{ $json.output.cause_of_death }}",
              "type": "string"
            },
            {
              "id": "bbb379bd-1a6d-426e-9b80-8956bb0bb7af",
              "name": "original_text",
              "value": "={{ $json.output.original_text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1104,
        864
      ],
      "id": "511cb9dc-8358-4e59-8b2d-6ad91ba550b7",
      "name": "Extract Fields"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=PERSONA:\nÎãπÏã†ÏùÄ Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥† Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑùÍ∞ÄÏûÖÎãàÎã§. ÏÇ¨Í≥† Îç∞Ïù¥ÌÑ∞Î•º Í∏∞Î∞òÏúºÎ°ú ÌòÑÌô©ÏùÑ ÌååÏïÖÌïòÍ≥†, Î¨∏Ï†ú Ìï¥Í≤∞ÏùÑ ÏúÑÌïú Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑùÍ≥º ÌÜµÍ≥ÑÏ†Å Ïù∏ÏÇ¨Ïù¥Ìä∏Î•º Ï†úÍ≥µÌïòÎäî Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§.\n\nTASK:\n- Get Incident Data Íµ¨Í∏Ä ÏãúÌä∏ ÎèÑÍµ¨Î•º ÌôúÏö©ÌïòÏó¨ Ï§ëÎåÄÏû¨Ìï¥ Îç∞Ïù¥ÌÑ∞Î•º Î∂ÑÏÑùÌïòÏÑ∏Ïöî\n- ÏÇ¨Í≥† Î∞úÏÉù ÌòÑÌô©ÏùÑ ÌååÏïÖÌïòÍ≥†, ÏÇ¨Îßù ÏõêÏù∏, ÏßÄÏó≠ Î∂ÑÌè¨, ÏãúÍ∞ÑÎåÄ Ìå®ÌÑ¥, Ïû•ÏÜå ÌäπÏÑ± Îì±ÏùÑ Î∂ÑÏÑùÌïòÏó¨ Ïù∏ÏÇ¨Ïù¥Ìä∏ÏôÄ Í∞úÏÑ† Ï†úÏïàÏùÑ ÎèÑÏ∂úÌïòÏÑ∏Ïöî\n- Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑùÏóêÎäî ÌÜµÍ≥ÑÏ†Å Í∏∞Î≤ï(ÎπàÎèÑ Î∂ÑÏÑù, Ï∂îÏÑ∏ Î∂ÑÏÑù, Î∂ÑÌè¨ Î∂ÑÏÑù Îì±)ÏùÑ ÌôúÏö©ÌïòÏÑ∏Ïöî\n- Í≤∞Í≥ºÎäî ÌïµÏã¨ Ïù∏ÏÇ¨Ïù¥Ìä∏ÏôÄ Íµ¨Ï≤¥Ï†ÅÏù∏ Í∞úÏÑ† Ï†úÏïàÏúºÎ°ú ÏöîÏïΩÌïòÏÑ∏Ïöî\n\nTOOLS:\n- Get Incident Data: Íµ¨Í∏Ä ÏãúÌä∏ÏóêÏÑú Ï§ëÎåÄÏû¨Ìï¥ Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî ÎèÑÍµ¨\n- Î∞òÎìúÏãú Ïù¥ ÎèÑÍµ¨Î•º Î®ºÏ†Ä ÏÇ¨Ïö©ÌïòÏó¨ Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏ†∏Ïò® ÌõÑ Î∂ÑÏÑùÌïòÏÑ∏Ïöî\n\nCONTEXT:\nÎ∂ÑÏÑùÏóê ÏÇ¨Ïö©Ìï† Îç∞Ïù¥ÌÑ∞Îäî Get Incident Data Íµ¨Í∏Ä ÏãúÌä∏Ïóê Ï†ÄÏû•ÎêòÏñ¥ ÏûàÏúºÎ©∞ Îã§ÏùåÍ≥º Í∞ôÏùÄ Ïª¨Îüº Íµ¨Ï°∞Î•º Í∞ÄÏßëÎãàÎã§:\n- arno: ÏÇ¨Í≥† Í≥†Ïú† Î≤àÌò∏\n- datetime: ÏÇ¨Í≥† Î∞úÏÉù ÏùºÏãú (YYYY-MM-DD HH:MM:SS)\n- location: ÏÇ¨Í≥† Î∞úÏÉù ÏßÄÏó≠ (ÏãúÎèÑ ÏãúÍµ∞Íµ¨)\n- accident_space: ÏÇ¨Í≥† Î∞úÏÉù Ïû•ÏÜå\n- cause_of_death: ÏÇ¨Îßù ÏõêÏù∏ (Îñ®Ïñ¥Ïßê, ÍπîÎ¶º, ÎÅºÏûÑ, Î∂ÄÎî™Ìûò Îì±)\n- original_text: ÏÇ¨Í≥† ÎÇ¥Ïö© ÏÉÅÏÑ∏ Í∏∞Ïà†\n\nANALYSIS GUIDELINES:\nÏÇ¨Ïö©Ïûê ÏßàÎ¨∏Ïóê Îî∞Îùº Ï†ÅÏ†àÌïú Î∂ÑÏÑù ÏàòÌñâ:\n1. Ï†ÑÏ≤¥ ÌòÑÌô© ‚Üí Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÌÜµÍ≥Ñ\n2. ÌäπÏ†ï Í∏∞Í∞Ñ ‚Üí Í∏∞Í∞Ñ ÌïÑÌÑ∞ÎßÅ Î∂ÑÏÑù\n3. ÌäπÏ†ï ÏßÄÏó≠ ‚Üí ÏßÄÏó≠Î≥Ñ ÎπÑÍµê\n4. ÌäπÏ†ï ÏõêÏù∏ ‚Üí ÏõêÏù∏Î≥Ñ ÏÉÅÏÑ∏ Î∂ÑÏÑù\n5. Ìä∏Î†åÎìú ‚Üí ÏãúÍ≥ÑÏó¥ Î∂ÑÏÑù\n\nÌï≠ÏÉÅ Ìè¨Ìï®:\n- Íµ¨Ï≤¥Ï†Å ÏàòÏπò (Í±¥Ïàò, ÎπÑÏú®, Ï¶ùÍ∞êÎ•†)\n- ÎπÑÍµê Î∂ÑÏÑù (Í∏∞Í∞Ñ/ÏßÄÏó≠/ÏõêÏù∏Î≥Ñ)\n- Ìå®ÌÑ¥ Î∞è ÌäπÏù¥ÏÇ¨Ìï≠\n- Ïã§Ìñâ Í∞ÄÎä•Ìïú Í∞úÏÑ† Ï†úÏïà\n\nCONSTRAINTS:\n- Î∞òÎìúÏãú Get Incident Data ÎèÑÍµ¨Î°ú Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞Î•º Î®ºÏ†Ä Ï°∞ÌöåÌïòÏÑ∏Ïöî\n- Í∞ÄÏÉÅÏùò Îç∞Ïù¥ÌÑ∞ÎÇò ÏòàÏãúÎ°ú ÎãµÎ≥ÄÌïòÏßÄ ÎßàÏÑ∏Ïöî\n- Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÍ±∞ÎÇò Î∂ÄÏ°±Ìïú Í≤ΩÏö∞ Î™ÖÏãúÏ†ÅÏúºÎ°ú ÏïåÎ†§Ï£ºÏÑ∏Ïöî\n- ÌÜµÍ≥Ñ ÏàòÏπòÎäî Ï†ïÌôïÌïòÍ≤å Í≥ÑÏÇ∞ÌïòÏÑ∏Ïöî\n- Í∞úÏÑ† Ï†úÏïàÏùÄ Íµ¨Ï≤¥Ï†ÅÏù¥Í≥† Ïã§Ìñâ Í∞ÄÎä•Ìï¥Ïïº Ìï©ÎãàÎã§\n\nVISUALIZATION:\nÏ∞®Ìä∏ Ïù¥ÎØ∏ÏßÄÎäî ÏÉùÏÑ±ÌïòÏßÄ ÏïäÏäµÎãàÎã§. ÎåÄÏã† ÌÖçÏä§Ìä∏ Í∏∞Î∞ò ÏãúÍ∞ÅÌôîÎ•º ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî:\n\nÏù¥Î™®ÏßÄ Î∞î Ï∞®Ìä∏ (ÎπÑÏú® ÌëúÌòÑ):\nüî¥ Îñ®Ïñ¥Ïßê  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 40% (15Í±¥)\nüü° ÍπîÎ¶º    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       20% (8Í±¥)\nüü¢ ÎÅºÏûÑ    ‚ñà‚ñà‚ñà‚ñà         13% (6Í±¥)\n\nÏàúÏúÑ Î¶¨Ïä§Ìä∏:\n1. Í≤ΩÍ∏∞ÎèÑ  12Í±¥ (32%) ü•á\n2. ÏÑúÏö∏Ïãú   8Í±¥ (21%) ü•à\n3. Î∂ÄÏÇ∞Ïãú   5Í±¥ (13%) ü•â\n\nÌä∏Î†åÎìú ÌëúÌòÑ:\nüìà Ï¶ùÍ∞Ä: Ï†ÑÏõî ÎåÄÎπÑ +15%\nüìâ Í∞êÏÜå: Ï†ÑÎÖÑ ÎåÄÎπÑ -8%\n\nÏãúÍ∞ÑÎåÄ Ìå®ÌÑ¥:\nüåÖ Ïò§Ï†Ñ(06-12) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 12Í±¥\nüåû Ïò§ÌõÑ(12-18) ‚ñà‚ñà‚ñà‚ñà‚ñà    7Í±¥\nüåô ÏïºÍ∞Ñ(18-24) ‚ñà‚ñà       3Í±¥\n\nÍ∑úÏπô:\n- ‚ñà Î¨∏ÏûêÎ°ú Î∞î Ï∞®Ìä∏ ÌëúÌòÑ (ÎπÑÏú®Ïóê ÎßûÍ≤å Í∏∏Ïù¥ Ï°∞Ï†à)\n- Ïù¥Î™®ÏßÄÎ°ú Ïπ¥ÌÖåÍ≥†Î¶¨ Íµ¨Î∂Ñ\n- Ïà´ÏûêÏôÄ ÎπÑÏú® Ìï≠ÏÉÅ Î≥ëÍ∏∞\n- Íµ¨Ï°∞ÌôîÎêú Îì§Ïó¨Ïì∞Í∏∞ ÏÇ¨Ïö©\n\nFORMAT:\nÎãµÎ≥ÄÏùÄ Slack Block Kit JSON ÌòïÏãùÏúºÎ°ú ÏûëÏÑ±ÌïòÏÑ∏Ïöî.\n- ÏàúÏàò JSONÎßå Ï∂úÎ†• (ÏΩîÎìú Î∏îÎ°ùÏù¥ÎÇò Ï∂îÍ∞Ä ÏÑ§Î™Ö ÏóÜÏù¥)\n- Ï∂úÎ†• ÌòïÏãù: {\"blocks\": [...]}\n- Íµ¨Ï°∞: Ìó§Îçî ‚Üí Ï†ÑÏ≤¥ ÌòÑÌô© ‚Üí Ï£ºÏöî ÌÜµÍ≥Ñ ‚Üí Ïù∏ÏÇ¨Ïù¥Ìä∏ ‚Üí Í∞úÏÑ† Ï†úÏïà ‚Üí Ï∂úÏ≤ò\n\n{\n  \"blocks\": [\n    {\n      \"type\": \"header\",\n      \"text\": {\n        \"type\": \"plain_text\",\n        \"text\": \"üìä Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥† Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Í≤∞Í≥º\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*üìà Ï†ÑÏ≤¥ ÌòÑÌô©*\\n‚Ä¢ Ï¥ù ÏÇ¨Í≥† Í±¥Ïàò: 15Í±¥\\n‚Ä¢ Î∂ÑÏÑù Í∏∞Í∞Ñ: 2025-04-01 ~ 2025-04-30\\n‚Ä¢ ÏÇ¨ÎßùÏûê Ïàò: 17Î™Ö\"\n      }\n    },\n    {\n      \"type\": \"divider\"\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*üéØ Ï£ºÏöî ÌÜµÍ≥Ñ*\\n\\n*ÏÇ¨Îßù ÏõêÏù∏Î≥Ñ Î∂ÑÌè¨*\\nüî¥ Îñ®Ïñ¥Ïßê  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 40% (6Í±¥)\\nüü° ÎÅºÏûÑ    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     27% (4Í±¥)\\nüü¢ ÍπîÎ¶º    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       20% (3Í±¥)\\nüîµ Î∂ÄÎî™Ìûò  ‚ñà‚ñà‚ñà‚ñà         13% (2Í±¥)\\n\\n*ÏßÄÏó≠Î≥Ñ Î∂ÑÌè¨ TOP 3*\\n1. Í≤ΩÍ∏∞ÎèÑ  5Í±¥ (33%) ü•á\\n2. ÏÑúÏö∏Ïãú  3Í±¥ (20%) ü•à\\n3. Î∂ÄÏÇ∞Ïãú  2Í±¥ (13%) ü•â\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*üí° ÌïµÏã¨ Ïù∏ÏÇ¨Ïù¥Ìä∏*\\n1. Í≥†ÏÜåÏûëÏóÖ(Îñ®Ïñ¥Ïßê) ÏÇ¨Í≥†Í∞Ä Ï†ÑÏ≤¥Ïùò 40%Î°ú Í∞ÄÏû• ÎÜíÏùå\\n2. Í±¥ÏÑ§ÌòÑÏû•ÏóêÏÑú 60% Ïù¥ÏÉÅ Î∞úÏÉù\\n3. Ïò§Ï†Ñ ÏãúÍ∞ÑÎåÄ(09:00-12:00)Ïóê ÏßëÏ§ë Î∞úÏÉù\\n4. Í≤ΩÍ∏∞ÎèÑ ÏßÄÏó≠ ÏÇ¨Í≥†Ïú®Ïù¥ ÌÉÄ ÏßÄÏó≠ ÎåÄÎπÑ 2Î∞∞ ÎÜíÏùå\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*‚úÖ Í∞úÏÑ† Ï†úÏïà*\\n1. Í≥†ÏÜåÏûëÏóÖ ÏïàÏ†ÑÎÇúÍ∞Ñ Î∞è ÏïàÏ†ÑÎåÄ Ï∞©Ïö© ÏùòÎ¨¥Ìôî Í∞ïÌôî\\n2. Í±¥ÏÑ§ÌòÑÏû• ÏïàÏ†ÑÍ¥ÄÎ¶¨Ïûê Î∞∞Ïπò ÌôïÎåÄ\\n3. Ïò§Ï†Ñ ÏûëÏóÖ ÏãúÏûë Ï†Ñ ÏïàÏ†Ñ Ï†êÍ≤Ä Ï≤†Ï†ÄÌôî\\n4. Í≤ΩÍ∏∞ÎèÑ ÏßÄÏó≠ ÏßëÏ§ë ÏïàÏ†Ñ ÍµêÏú° Î∞è Ï†êÍ≤Ä Ïã§Ïãú\\n5. ÎÅºÏûÑ ÏÇ¨Í≥† ÏòàÎ∞©ÏùÑ ÏúÑÌïú ÏûëÏóÖ Ï†àÏ∞® ÌëúÏ§ÄÌôî\"\n      }\n    },\n    {\n      \"type\": \"context\",\n      \"elements\": [\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"üìÖ Î∂ÑÏÑù ÏùºÏãú: 2025-05-01 | Îç∞Ïù¥ÌÑ∞ Ï∂úÏ≤ò: ÌïúÍµ≠ÏÇ∞ÏóÖÏïàÏ†ÑÎ≥¥Í±¥Í≥µÎã®\"\n        }\n      ]\n    }\n  ]\n}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -2624,
        1376
      ],
      "id": "fed65f72-35b8-4adc-b597-68d177e85739",
      "name": "Accident Analysis Agent"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -2832,
        1040
      ],
      "id": "081675d7-fa20-4b91-9f5e-c3c9e16910e8",
      "name": "Run Every Midnight"
    },
    {
      "parameters": {
        "public": true,
        "initialMessages": "=Î¨¥ÏóáÏùÑ ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî?",
        "options": {
          "subtitle": "Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥† Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù AIÏûÖÎãàÎã§.",
          "title": "ÏïàÎÖïÌïòÏÑ∏Ïöî! üëã",
          "responseMode": "responseNodes"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -2832,
        1376
      ],
      "id": "e3b39a44-1137-4c28-bc4d-b2e20974f498",
      "name": "When chat message received",
      "webhookId": "3bedbc43-24c6-4863-8c6f-80f6122c74ff"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "714ab424-517d-4c4c-85f7-7bfaee6f47a1",
              "name": "output",
              "value": "={{ $json.output.replaceAll('```','').replaceAll('json','') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2128,
        1376
      ],
      "id": "e107546c-819b-4215-ab7a-288c8411dc42",
      "name": "Remove Code Fence"
    },
    {
      "parameters": {
        "amount": 1
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -368,
        992
      ],
      "id": "37561648-afed-4382-8017-8f4d454c110f",
      "name": "Wait",
      "webhookId": "a7e6c9c4-91c4-48df-a28c-0514e54b72ba"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        -2448,
        1568
      ],
      "id": "537c1620-33bb-4f83-b1cb-78343d92508b",
      "name": "Think"
    },
    {
      "parameters": {
        "content": "## TASK\n### API Ìò∏Ï∂ú Î∞è Îç∞Ïù¥ÌÑ∞ ÏàòÏßë\n- Ï¥àÍ∏∞ Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞(~2,678Í±¥) 1Ìöå ÏàòÏßë\n- Îß§Ïùº ÏûêÏ†ï ÏµúÏã† 100Í±¥ Ï≤¥ÌÅ¨ ‚Üí Ïã†Í∑ú ÏÇ¨Í≥†Îßå ÏûêÎèô Ï∂îÍ∞Ä",
        "height": 512,
        "width": 960,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2688,
        704
      ],
      "id": "d22639fd-d387-4307-9bb2-2d182404dd0a",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "content": "## TRIGGER",
        "height": 512,
        "width": 182,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2880,
        704
      ],
      "typeVersion": 1,
      "id": "8ffd908b-ed4c-461e-8f49-91a67c8e5d47",
      "name": "Sticky Note14"
    },
    {
      "parameters": {
        "url": "https://apis.data.go.kr/B552468/news_api02/getNews_api02",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "numOfRows",
              "value": "1000"
            },
            {
              "name": "callApiId",
              "value": "1040"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "*/*"
            }
          ]
        },
        "options": {
          "pagination": {
            "pagination": {
              "parameters": {
                "parameters": [
                  {
                    "name": "pageNo",
                    "value": "={{ $pageCount + 1 }}"
                  }
                ]
              },
              "limitPagesFetched": true,
              "maxRequests": 3,
              "requestInterval": 100
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2624,
        848
      ],
      "id": "a414406d-3cd8-40bf-8159-48f235e383c1",
      "name": "HTTP Request (Before)",
      "credentials": {
        "httpQueryAuth": {
          "id": "GYn8Nbae0LdIjZ76",
          "name": "Serious Accident Auth account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://apis.data.go.kr/B552468/news_api02/getNews_api02",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "numOfRows",
              "value": "10"
            },
            {
              "name": "callApiId",
              "value": "1040"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "*/*"
            }
          ]
        },
        "options": {
          "pagination": {
            "pagination": {
              "parameters": {
                "parameters": [
                  {
                    "name": "pageNo",
                    "value": "={{ $pageCount + 1 }}"
                  }
                ]
              },
              "limitPagesFetched": true,
              "maxRequests": 1,
              "requestInterval": 100
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2624,
        1040
      ],
      "id": "0df69f0f-2384-4474-9968-f3292872bcd3",
      "name": "HTTP Request (After)",
      "credentials": {
        "httpQueryAuth": {
          "id": "GYn8Nbae0LdIjZ76",
          "name": "Serious Accident Auth account"
        }
      }
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "h1vHJDkiJ1uRF68o",
          "mode": "list",
          "cachedResultName": "Serious Accident",
          "cachedResultUrl": "/projects/dxmOSdrB8oXX8d4S/datatables/h1vHJDkiJ1uRF68o"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "arno": "={{ $json.arno }}",
            "keyword": "={{ $json.keyword }}",
            "contents": "={{ $json.contents.removeTags().replaceAll('&nbsp;','').trim() }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "arno",
              "displayName": "arno",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "keyword",
              "displayName": "keyword",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "contents",
              "displayName": "contents",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -2096,
        848
      ],
      "id": "80a7922a-e2f6-4745-8ced-74005c19447b",
      "name": "Insert row (Before)"
    },
    {
      "parameters": {
        "fieldToSplitOut": "body.items.item",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -2448,
        848
      ],
      "id": "e45849f5-1b62-4eb5-b6d1-64505c37670e",
      "name": "Split Out (Before)"
    },
    {
      "parameters": {
        "fieldToSplitOut": "body.items.item",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -2448,
        1040
      ],
      "id": "652b62bf-03b7-4139-bdea-95c682fdd4d5",
      "name": "Split Out (After)"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "h1vHJDkiJ1uRF68o",
          "mode": "list",
          "cachedResultName": "Serious Accident",
          "cachedResultUrl": "/projects/dxmOSdrB8oXX8d4S/datatables/h1vHJDkiJ1uRF68o"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "arno",
              "condition": "like",
              "keyValue": "202510"
            },
            {
              "keyName": "arno",
              "condition": "like",
              "keyValue": "202509"
            }
          ]
        },
        "limit": 100
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -1760,
        944
      ],
      "id": "2ddcf106-822c-4c62-b38d-9f38704172e3",
      "name": "Get row(s)"
    },
    {
      "parameters": {
        "operation": "rowNotExists",
        "dataTableId": {
          "__rl": true,
          "value": "h1vHJDkiJ1uRF68o",
          "mode": "list",
          "cachedResultName": "Serious Accident",
          "cachedResultUrl": "/projects/dxmOSdrB8oXX8d4S/datatables/h1vHJDkiJ1uRF68o"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "arno",
              "keyValue": "={{ $json.arno }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -2272,
        1040
      ],
      "id": "3e6fc067-7520-4ba8-9119-be2f9f511c28",
      "name": "If row does not exist",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "deleteRows",
        "dataTableId": {
          "__rl": true,
          "value": "h1vHJDkiJ1uRF68o",
          "mode": "list",
          "cachedResultName": "Serious Accident",
          "cachedResultUrl": "/projects/dxmOSdrB8oXX8d4S/datatables/h1vHJDkiJ1uRF68o"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "arno",
              "condition": "isEmpty"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -1920,
        1040
      ],
      "id": "047f1512-a0b1-41aa-ab06-b1d247492068",
      "name": "Delete row(s)"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "4857ef20-56b3-44e5-8851-57a8d8a67900",
              "leftValue": "={{ $json.datetime }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -928,
        864
      ],
      "id": "e1fd2143-9edb-4934-a882-8d12e6262571",
      "name": "Datetime Filter"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "h1vHJDkiJ1uRF68o",
          "mode": "list",
          "cachedResultName": "Serious Accident",
          "cachedResultUrl": "/projects/dxmOSdrB8oXX8d4S/datatables/h1vHJDkiJ1uRF68o"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "arno": "={{ $json.arno }}",
            "keyword": "={{ $json.keyword }}",
            "contents": "={{ $json.contents?.removeTags()?.replaceAll('&nbsp;','')?.trim() ?? '' }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "arno",
              "displayName": "arno",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "keyword",
              "displayName": "keyword",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "contents",
              "displayName": "contents",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -2096,
        1040
      ],
      "id": "7aa91d94-09e5-4e1e-83e0-8bf447eebf45",
      "name": "Insert row (After)",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "datetime"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        -752,
        864
      ],
      "id": "aa849688-e4ec-4b85-a922-111bdfbefd7f",
      "name": "Datatime Sort"
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "arno"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        -2272,
        848
      ],
      "id": "762d0318-0dd5-4af9-be95-44c3e0bf19e1",
      "name": "Article Number Sort"
    },
    {
      "parameters": {
        "content": "## TRIGGER",
        "height": 336,
        "width": 182,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2880,
        1232
      ],
      "typeVersion": 1,
      "id": "9b7e0c22-a720-4a39-a15b-cb2379a3bd94",
      "name": "Sticky Note15"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -2624,
        1568
      ],
      "id": "8c4fb393-4553-437b-bb3d-5e3b7f0ab652",
      "name": "Gemini 2.5 Pro",
      "credentials": {
        "googlePalmApi": {
          "id": "ePPwdI0uT0G0C906",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE",
          "mode": "list",
          "cachedResultName": "Ï§ëÎåÄÏû¨Ìï¥ ÏÇ¨Í≥†ÌòÑÌô©",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "ÏãúÌä∏1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DE8G5Wkyv8KIexT7TJ3V7yXtyqT_pT7iWW27N5hoCdE/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        -2336,
        1568
      ],
      "id": "af61b070-a3c3-4495-bfd7-63a1ce3ceea4",
      "name": "Get Incident Data",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KKndhIOqMyfVMSRi",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        -368,
        784
      ],
      "id": "1fca9e27-7d44-4d61-8e16-dd1a42e4a0b4",
      "name": "No Operation"
    },
    {
      "parameters": {
        "message": "={{ $json.chatResponse }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chat",
      "typeVersion": 1,
      "position": [
        -1952,
        1584
      ],
      "id": "f990dc20-6ea2-44a1-8838-e1ffe5ddb9bf",
      "name": "Respond to Chat"
    },
    {
      "parameters": {
        "jsCode": "// Slack ÏùëÎãµÏóêÏÑú blocks Ï∂îÏ∂ú\nconst slackResponse = $input.first().json;\n\nlet blocks;\nif (Array.isArray(slackResponse)) {\n  blocks = slackResponse[0]?.message?.blocks;\n} else if (slackResponse.message?.blocks) {\n  blocks = slackResponse.message.blocks;\n} else if (slackResponse.blocks) {\n  blocks = slackResponse.blocks;\n}\n\nif (!blocks || !Array.isArray(blocks)) {\n  return {\n    json: {\n      chatResponse: slackResponse.text || slackResponse.message?.text || 'Îç∞Ïù¥ÌÑ∞Î•º Ï≤òÎ¶¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.'\n    }\n  };\n}\n\n// Slack Block KitÏùÑ ÌÖçÏä§Ìä∏Î°ú Î≥ÄÌôò\nlet text = '';\n\nblocks.forEach(block => {\n  // \"Automated with this n8n workflow\" ÎßÅÌÅ¨Í∞Ä Ìè¨Ìï®Îêú sectionÏùÄ Ïä§ÌÇµ\n  if (block.type === 'section' && \n      block.text?.text?.includes('Automated with this')) {\n    return; // Ïù¥ Î∏îÎ°ùÏùÄ Í±¥ÎÑàÎõ∞Í∏∞\n  }\n  \n  switch(block.type) {\n    case 'header':\n      const headerText = block.text?.text || '';\n      text += `\\n# ${headerText.replace(/:[a-z_]+:/g, '').trim()}\\n\\n`;\n      break;\n    \n    case 'section':\n      const sectionText = block.text?.text || '';\n      const converted = sectionText\n        .replace(/\\*([^*]+)\\*/g, '**$1**')\n        .replace(/:chart_with_upwards_trend:/g, 'üìà')\n        .replace(/:dart:/g, 'üéØ')\n        .replace(/:bulb:/g, 'üí°')\n        .replace(/:white_check_mark:/g, '‚úÖ')\n        .replace(/:date:/g, 'üìÖ')\n        .replace(/:red_circle:/g, 'üî¥')\n        .replace(/:large_yellow_circle:/g, 'üü°')\n        .replace(/:large_green_circle:/g, 'üü¢')\n        .replace(/:large_blue_circle:/g, 'üîµ')\n        .replace(/:large_purple_circle:/g, 'üü£')\n        .replace(/:white_circle:/g, '‚ö™')\n        .replace(/:black_circle:/g, '‚ö´')\n        .replace(/:first_place_medal:/g, 'ü•á')\n        .replace(/:second_place_medal:/g, 'ü•à')\n        .replace(/:third_place_medal:/g, 'ü•â')\n        .replace(/:sun_with_face:/g, 'üåû')\n        .replace(/:sunny:/g, '‚òÄÔ∏è')\n        .replace(/:crescent_moon:/g, 'üåô');\n      \n      text += `${converted}\\n\\n`;\n      break;\n    \n    case 'divider':\n      text += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n\\n`;\n      break;\n    \n    case 'context':\n      if (block.elements) {\n        block.elements.forEach(el => {\n          const contextText = el.text || '';\n          // contextÏóêÎèÑ \"Automated\" ÎßÅÌÅ¨Í∞Ä ÏûàÏùÑ Ïàò ÏûàÏúºÎãà Ï≤¥ÌÅ¨\n          if (!contextText.includes('Automated with this')) {\n            text += `_${contextText}_\\n`;\n          }\n        });\n        text += `\\n`;\n      }\n      break;\n  }\n});\n\nreturn {\n  json: {\n    chatResponse: text.trim()\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2128,
        1584
      ],
      "id": "88517530-8c87-4ac7-91fe-49b707ccdd07",
      "name": "Convert to Text"
    },
    {
      "parameters": {
        "maxItems": 50,
        "keep": "lastItems"
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -1584,
        864
      ],
      "id": "85c95e6e-15aa-45f9-80f5-5fdbda2e0914",
      "name": "Limit 50"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -1408,
        1040
      ],
      "id": "112d0936-7661-45b8-8e6b-4c548baf7d53",
      "name": "Gemini 2.0 Flash",
      "credentials": {
        "googlePalmApi": {
          "id": "ePPwdI0uT0G0C906",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‚ÄòTest workflow‚Äô": {
      "main": [
        [
          {
            "node": "HTTP Request (Before)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor": {
      "main": [
        [
          {
            "node": "Extract Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "No Operation",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Fields": {
      "main": [
        [
          {
            "node": "Datetime Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run Every Midnight": {
      "main": [
        [
          {
            "node": "HTTP Request (After)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Accident Analysis Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Accident Analysis Agent": {
      "main": [
        [
          {
            "node": "Remove Code Fence",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Code Fence": {
      "main": [
        [
          {
            "node": "Slack",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "Accident Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request (Before)": {
      "main": [
        [
          {
            "node": "Split Out (Before)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request (After)": {
      "main": [
        [
          {
            "node": "Split Out (After)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out (Before)": {
      "main": [
        [
          {
            "node": "Article Number Sort",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out (After)": {
      "main": [
        [
          {
            "node": "If row does not exist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s)": {
      "main": [
        [
          {
            "node": "Limit 50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If row does not exist": {
      "main": [
        [
          {
            "node": "Insert row (After)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete row(s)": {
      "main": [
        [
          {
            "node": "Get row(s)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Datetime Filter": {
      "main": [
        [
          {
            "node": "Datatime Sort",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert row (After)": {
      "main": [
        [
          {
            "node": "Delete row(s)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Datatime Sort": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Article Number Sort": {
      "main": [
        [
          {
            "node": "Insert row (Before)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini 2.5 Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Accident Analysis Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get Incident Data": {
      "ai_tool": [
        [
          {
            "node": "Accident Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Slack": {
      "main": [
        [
          {
            "node": "Convert to Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to Text": {
      "main": [
        [
          {
            "node": "Respond to Chat",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit 50": {
      "main": [
        [
          {
            "node": "Information Extractor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini 2.0 Flash": {
      "ai_languageModel": [
        [
          {
            "node": "Information Extractor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "379c1f5d-c82c-478e-bf31-8a8a765755f3",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "ed29603280f689e433d162d6eb2f4c0ef594feb614602d9f72d06ccb3a8d3e19"
  },
  "id": "NsBAsvTBRj2soHdL",
  "tags": [
    {
      "updatedAt": "2025-10-21T11:32:42.222Z",
      "createdAt": "2025-10-21T11:32:42.222Z",
      "id": "NRu8IMSLoDaICN1k",
      "name": "ÏûêÎèôÌôî ÌÅ¥ÎûòÏä§"
    }
  ]
}